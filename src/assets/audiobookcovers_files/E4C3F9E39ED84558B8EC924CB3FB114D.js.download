window._clConfig={"accountId":17021,"guid":"E4C3F9E39ED84558B8EC924CB3FB114D","siteId":17333,"version":"latest","forms":{"30114":{"id":30114,"name":"10 book marketing mistakes to avoid","publishStatus":"FOR_ALL","testingStatus":"OFF","branded":false},"30115":{"id":30115,"name":"Book pre-launch checklist","publishStatus":"FOR_ALL","testingStatus":"OFF","branded":false},"42664":{"id":42664,"name":"Writing journey","publishStatus":"DEBUG","testingStatus":"OFF","branded":false},"33035":{"id":33035,"name":"Checklist: how to analyze your genre","publishStatus":"DEBUG","testingStatus":"OFF","branded":false},"38524":{"id":38524,"name":"Cyber Monday Offer","publishStatus":"DEBUG","testingStatus":"OFF","branded":false}},"formVariants":{"f30114v30114":{"formId":30114,"id":"f30114v30114","type":"DETACHED","layoutType":"DETACHED","placements":[],"rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"NO_LIMIT","isActive":true}]},"CUSTOM_CODE":{"enabled":false},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"AND","conditions":[{"operator":"USER_LEAVES_PAGE","operand":{"name":"VISITOR"}}]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"}}]},{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://miblart.com/blog/tiktok-for-indie-authors/"}]}]},"exclude":{"relation":"OR","groups":[]}}},"HIDE":{"enabled":true,"type":"HIDE","relation":"OR","conditions":[{"name":"WIDGET_CLOSED","isActive":true,"params":{"unit":"COUNT","amount":1.0}}]},"ANNOYANCE":{"type":"SHOW_IN_INTERVAL"},"SELECTOR":{"enabled":false,"selector":"","selectors":[]}},"asyncRules":{},"revision":"f4f36240-f97c-416c-b183-b3bff068438c","asyncRulesEnabled":false,"checkThisWidgetOnly":false,"useCase":"SUBSCRIPTION_FORM","widgetType":"SUBSCRIPTION_FORM"},"f42664v42664":{"formId":42664,"id":"f42664v42664","type":"FLOATING_BOX","layoutType":"FLOATING_BOX","placements":[],"rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"NO_LIMIT","isActive":true}]},"CUSTOM_CODE":{"enabled":false},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"AND","conditions":[{"operator":"USER_LEAVES_PAGE","operand":{"name":"VISITOR"}}]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"}}]}]},"exclude":{"relation":"OR","groups":[{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://miblart.com/join-writing-challenge/"}]}]}}},"SCHEDULE":{"enabled":false,"type":"SCHEDULE","predicates":[]},"HIDE":{"enabled":true,"type":"HIDE","relation":"OR","conditions":[{"name":"WIDGET_CLOSED","isActive":true,"params":{"unit":"COUNT","amount":1.0}}]},"SELECTOR":{"enabled":false,"selector":"","selectors":[]},"ANNOYANCE":{"type":"SHOW_IN_INTERVAL"}},"asyncRules":{},"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"useCase":"INFORMER","widgetType":"INFORMER"},"f33035v33035":{"formId":33035,"id":"f33035v33035","type":"FLOATING_BOX","layoutType":"FLOATING_BOX","placements":[],"rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"ONCE_PER_SESSION","isActive":true}]},"CUSTOM_CODE":{"enabled":false},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"AND","conditions":[{"operator":"TIME_SPENT_ON_PAGE","value":{"unit":"SECOND","amount":"15"},"operand":{"name":"VISITOR"}}]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"}}]},{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://miblart.com/blog/book-cover-trends-this-year/"},{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://miblart.com/blog/fantasy-book-cover-fonts/"}]}]},"exclude":{"relation":"OR","groups":[]}}},"SCHEDULE":{"enabled":false,"type":"SCHEDULE","predicates":[]},"HIDE":{"enabled":false,"type":"HIDE","relation":"OR","conditions":[]},"ANNOYANCE":{"type":"SHOW_IN_INTERVAL"},"SELECTOR":{"enabled":false,"selector":"","selectors":[]}},"asyncRules":{"HIDE_FOR_SUBSCRIBERS":{"enabled":true,"checkThisWidgetOnly":false}},"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"useCase":"SUBSCRIPTION_FORM","widgetType":"SUBSCRIPTION_FORM"},"f38524v38524":{"formId":38524,"id":"f38524v38524","type":"FLOATING_BOX","layoutType":"FLOATING_BOX","placements":[],"rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"ONCE_PER_SESSION","isActive":true}]},"CUSTOM_CODE":{"enabled":false},"SELECTOR":{"enabled":false,"selector":"","selectors":[]},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"AND","conditions":[{"operand":{"name":"VISITOR"},"operator":"TIME_SPENT_ON_PAGE","value":{"unit":"SECOND","amount":"20"}}]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"}}]}]},"exclude":{"relation":"OR","groups":[]}}},"SCHEDULE":{"enabled":false,"type":"SCHEDULE","predicates":[]},"ANNOYANCE":{"type":"SHOW_IN_INTERVAL"},"HIDE":{"enabled":false,"type":"HIDE","relation":"OR","conditions":[]}},"asyncRules":{},"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"useCase":"INFORMER","widgetType":"INFORMER"},"f30115v30115":{"formId":30115,"id":"f30115v30115","type":"DETACHED","layoutType":"DETACHED","placements":[],"rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"NO_LIMIT","isActive":true}]},"CUSTOM_CODE":{"enabled":false},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"AND","conditions":[{"operator":"USER_LEAVES_PAGE","operand":{"name":"VISITOR"}}]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"}}]},{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://miblart.com/blog/how-much-does-it-cost-to-self-publish-book/"}]}]},"exclude":{"relation":"OR","groups":[]}}},"HIDE":{"enabled":true,"type":"HIDE","relation":"OR","conditions":[{"name":"WIDGET_CLOSED","isActive":true,"params":{"unit":"COUNT","amount":1.0}}]},"ANNOYANCE":{"type":"SHOW_IN_INTERVAL"},"SELECTOR":{"enabled":false,"selector":"","selectors":[]}},"asyncRules":{},"revision":"dec6f277-913f-4610-b1f7-a7a3b7a94144","asyncRulesEnabled":false,"checkThisWidgetOnly":false,"useCase":"SUBSCRIPTION_FORM","widgetType":"SUBSCRIPTION_FORM"}},"formConfig":{"ANNOYANCE_SAFEGUARD_ENABLED":"true","ANNOYANCE_SAFEGUARD":"{\"unit\":\"MINUTE\",\"amount\":3}","SESSION_TTL":"{\"unit\":\"MINUTE\",\"amount\":30}","CHECK_SEGMENT_MEMBERSHIP":"false","abTests":[]},"apiConfig":{"staticResourcesUrl":"https://cdn.claspo.io/","hostUrl":"https://script.claspo.io/","scriptClientEventsUrl":"https://script.claspo.io/site-script/v1/event","asyncRulesCheckUrl":"https://script.claspo.io/forms/v2/async-rules/{id}/check"}};//config end
window.scriptLog09u8y9 = function scriptLog09u8y9(logLevel, message, data) {
  var productPrefix = 'cl';
  var config = window["_" + productPrefix + 'Config'];
  var tryCallback = function (cb) {
    try {
      return cb();
    } catch (e) {
      return undefined;
    }
  }

  function send(d) {
    const url = config && config.apiConfig && config.apiConfig.scriptClientEventsUrl;

    const c = new XMLHttpRequest;
    c.open("POST", url, !0);
    c.setRequestHeader("Content-type", "application/json; charset=utf-8");
    c.send(JSON.stringify(d));
  }

  function composeError(data) {
    if (data instanceof Error) {
      return tryCallback(() => JSON.stringify({error: data.name + ' ' + data.message + ' ' + data.stack})) || 'UNHANDLED';
    } else {
      return tryCallback(() => JSON.stringify({error: data})) || 'UNHANDLED';
    }
  }

  let key = productPrefix + 'ScriptStatus';
  if (logLevel === 'OK') {
    tryCallback(() => localStorage.setItem(key, logLevel));
    return;
  }

  var d = {
    scriptVersion: config.version,
    orgId: +config.orgId,
    siteId: +config.siteId,
    tenantId: config.tenantId,
    guid: config.guid,
    url: window.location.href,
    message: message,
    log_level: logLevel
  };

  if (logLevel === 'ERROR') {

    var prevStatus = tryCallback(() => localStorage.getItem(key));
    if (prevStatus !== undefined && prevStatus !== logLevel) {
      tryCallback(() => localStorage.setItem(key, logLevel));
      d.data = composeError(data);
      send(d);
    }

  } else {
    d.data = tryCallback(() => JSON.stringify(data));
    send(d);
  }


}

try {
   "use strict";!function(){async function e(e,t){return t||(t=await import(e)),t}function t(e,t,i){e:if("object"==typeof t&&null!==t){var n=t[Symbol.toPrimitive];if(void 0!==n){if("object"!=typeof(t=n.call(t,"string")))break e;throw new TypeError("@@toPrimitive must return a primitive value.")}t=String(t)}return(t="symbol"==typeof t?t:String(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function i(e){return e=Number.parseInt(e),Number.isInteger(e)?e:0}function n(e){return je.SYSTEM_ATTRIBUTE_PREFIX+e}function o(e){return[...e].reduce(((e,t)=>{let[i,n]=t;return e[i]=n,e}),{})}function r(e,t){return o(Object.entries(e).filter((e=>([e]=e,!t.includes(e)))))}function a(e){var t;return e.useCase&&e.useCase===Qe.REQUEST_FORM?null:(null===(t=Ce.getUserInfo())||void 0===t?void 0:t.clContactId)||Ie.get("clContactId")}function s(e,t){return btoa(unescape(encodeURIComponent(JSON.stringify(qe.createFormParams(e,void 0,t)))))}function l(e,t){e.children&&e.children.forEach((e=>l(e,t))),t(e)}function d(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function c(e,t){e&&Object.keys(e)&&Object.keys(e).forEach(t)}function h(e){var t=this;let i,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];clearTimeout(i),i=setTimeout((()=>{e.apply(t,r)}),n)}}function u(e,t,i){return Math.min(Math.max(t,e),i)}function m(e,t){return function(i){return t(e(i))}}function p(e,t){if(!(this instanceof p))return new p(e,t);if(t&&t in ci&&(t=null),t&&!(t in di))throw Error("Unknown model: "+t);if(null==e)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof p)this.model=e.model,this.color=[...e.color],this.valpha=e.valpha;else if("string"==typeof e){if(null===(t=ai.get(e)))throw Error("Unable to parse color from string: "+e);this.model=t.model;var i=di[this.model].channels;this.color=t.value.slice(0,i),this.valpha="number"==typeof t.value[i]?t.value[i]:1}else if(0<e.length)this.model=t||"rgb",i=di[this.model].channels,t=Array.prototype.slice.call(e,0,i),this.color=E(t,i),this.valpha="number"==typeof e[i]?e[i]:1;else if("number"==typeof e)this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{if(this.valpha=1,t=Object.keys(e),"alpha"in e&&(t.splice(t.indexOf("alpha"),1),this.valpha="number"==typeof e.alpha?e.alpha:0),!((t=t.sort().join(""))in hi))throw Error("Unable to parse color from object: "+JSON.stringify(e));this.model=hi[t],({labels:i}=di[this.model]);let n=[];for(t=0;t<i.length;t++)n.push(e[i[t]]);this.color=E(n)}if(ui[this.model])for(i=di[this.model].channels,t=0;t<i;t++)(e=ui[this.model][t])&&(this.color[t]=e(this.color[t]));this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function g(e){return function(t){return Number(t.toFixed(e))}}function E(e,t){for(let i=0;i<t;i++)"number"!=typeof e[i]&&(e[i]=0);return e}function v(e){return[e.getConfig("appearanceLanguage"),e.getConfig("browserLanguage"),"en"].filter((e=>!!e))}function _(e,t){return t.reduce(((t,i)=>t||(i?e[i]?t={translations:e[i],language:i}:(t=i.includes("-")?i.split("-")[0].toLowerCase():i.includes("_")?i.split("_")[0].toLowerCase():i,t=e[t]?{translations:e[t],language:t}:null):t=null,t||null)),null)}function f(e,t){return Object.keys(e).filter((e=>!t.includes(e))).reduce(((t,i)=>Object.assign(Object.assign({},t),{[i]:e[i]})),{})}function y(e,t,i){var n;return null===(n=e[t])||void 0===n?void 0:n.find((e=>e.element===i))}function T(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).map((e=>Object.assign(Object.assign({},e),{styleAttributes:Object.assign({},e.styleAttributes)})))}function I(e){return Object.values(Mi).reduce(((t,i)=>Object.assign(t,{[i]:T(e)})),{[Mi.DESKTOP]:[],[Mi.MOBILE]:[]})}function O(e,t,i,n){let o=e=>{var r,a;(r=e=e instanceof DocumentFragment||(null==e?void 0:e.nodeType)===Node.DOCUMENT_FRAGMENT_NODE?e.host:e)&&(r=n&&"function"==typeof n?n(e.getAttribute(t)):(null===(a=null==e?void 0:e.getAttribute)||void 0===a?void 0:a.call(e,t))===i);return r?e:e&&e.parentNode&&o(e.parentNode)||null};return o(e)}function A(e,t){let i=t.id,n=b(t.options),o=Object.assign(Object.assign({},Ui),t.styleAttributes);var r=t.options.map((t=>{const i=document.createElement("span");i.classList.add("opt");const r=document.createElement("span");return r.innerText=t,i.appendChild(r),t=window.getComputedStyle(e.parentElement),C(r,o),C(i,{display:"inline-flex",justifyContent:t["text-align"]||Bi.justifyContent},n,o),i})),a=Object.assign({},Fi),s=document.createElement("span");s.classList.add("container"),C(s,{paddingLeft:t.styleAttributes.borderLeftWidth||0,paddingRight:t.styleAttributes.borderRightWidth||0,paddingTop:t.styleAttributes.borderTopWidth||0,paddingBottom:t.styleAttributes.borderBottomWidth||0});let l=document.createElement("span");l.innerText=n,C(l,Object.assign(Object.assign({},o),{visibility:"hidden"}));let d=document.createElement("span");return d.classList.add("opts"),r.forEach((e=>{d.appendChild(e)})),s.append(l,d),e.innerHTML="",e.appendChild(s),C(e,a),r=1===t.options.length?10:0,a=s.querySelectorAll(".opt")[0].offsetHeight,r="".concat(a-r,"px"),s.style.height=r,l.style.height=r,e.classList.add("container--staticTextRoller"),s=function(e){var t=Math.max(...e.options.map((e=>e.replace(/\s+/g,"").length)));return t=Math.max(Math.ceil(t/15),1),e=e.options.length,{optionTimePercentage:100/e,duration:e*(1e3*t+500),longestOptionFractions:t}}(t),function(e,t,i){var n=t.options.length-1;let o=i.optionTimePercentage/(1<i.longestOptionFractions?1.5:3);n=t.options.map(((e,t)=>"\n    ".concat(t*i.optionTimePercentage,"% {\n      transform: translateY(calc(").concat(100*t,"% + ").concat(1*t,"px));\n    }\n    ").concat(t*i.optionTimePercentage+o,"% {\n      transform: translateY(calc(").concat(100*t,"% + ").concat(1*t,"px));\n    }"))).flat().concat("\n    100% {\n      transform: translateY(calc(".concat(100*t.options.length,"% + ").concat(n,"px));\n    }\n    ")).join("\n"),t=document.createElement("style"),t.innerHTML="@keyframes slide-down {".concat(n,"}"),n=e.querySelector(".opt").cloneNode(!0),e.appendChild(t),e.querySelector(".opts").appendChild(n)}(e,t,s),function(e,t,i){i=i.duration/1e3,1<t.options.length?e.style.animation="slide-down ".concat(i,"s infinite"):(e.style.transform="translateY(0%)",e.querySelectorAll(".opt")[0].style.display="none")}(d,t,s),{element:e,id:i}}function C(e,t,i,n,o){let r={};i&&(i=S(i,t,n)-5,r={minWidth:"".concat(Math.min(i,o),"px")}),Object.entries(Object.assign(Object.assign({},r),t)||{}).forEach((t=>{let[i,n]=t;e.style[i]=n}))}function S(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};let i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=document.createElement("span"),o=document.createElement("span");o.innerText=e,n.appendChild(o);for(let[e,t]of Object.entries(i))o.style[e]=t;for(let[e,i]of Object.entries(t))n.style[e]=i;return n.style.visibility="hidden",document.body.appendChild(n),({width:t}=n.getBoundingClientRect()),document.body.removeChild(n),t}function b(e){return e.map((e=>({value:e,width:S(e)}))).sort(((e,t)=>t.width-e.width)).at(0).value}function N(e){return"\n    .".concat(e," {\n      position: absolute;\n      display: flex;\n      width: fit-content;\n      height: fit-content;\n      padding: 20px 0;\n      background: #000000;\n      border: 2px solid #FFFFFF;\n      border-radius: 5px;\n      box-shadow: 0 1px 5px rgba(0, 0, 0, 0.28);\n      animation: jello-animation 10.9s both;\n      animation-iteration-count: 1;\n    }\n\n    .").concat(e,"[cl-overlay-position='top']:after {\n        content: \"\";\n        position: absolute;\n        top: 100%;\n        left: calc(50% - 5px);\n        margin-left: -8px;\n        margin-top: -2px;\n        border-width: ").concat("12px",";\n        border-style: solid;\n        border-color: black transparent transparent transparent;\n    }\n\n    .").concat(e,"[cl-overlay-position='top']:before {\n        content: \"\";\n        position: absolute;\n        top: 100%;\n        left: calc(50% - 15px);\n        border-width: ").concat("14px",";\n        border-style: solid;\n        border-color: white transparent transparent transparent;\n    }\n    \n    .").concat(e,"[cl-overlay-position='bottom']:after {\n      content: \"\";\n      position: absolute;\n      top: -22px;\n      left: calc(50% - 4px);\n      margin-left: -5px;\n      margin-bottom: -2px;\n      border-width: ").concat("12px",";\n      border-style: solid;\n      border-color: transparent transparent black transparent;\n    }\n\n    .").concat(e,"[cl-overlay-position='bottom']:before {\n      content: \"\";\n      position: absolute;\n      top: -28px;\n      left: calc(50% - 11px);\n      border-width: ").concat("14px",";\n      border-style: solid;\n      border-color: transparent transparent white transparent;\n    }\n\n    .").concat(e,"[cl-overlay-position='right']:after {\n      content: \"\";\n      position: absolute;\n      top: calc(50% - 7px);\n      left: -18px;\n      margin-left: -5px;\n      border-width: ").concat("12px",";\n      border-style: solid;\n      border-color: transparent black transparent transparent;\n    }\n\n    .").concat(e,"[cl-overlay-position='right']:before {\n      content: \"\";\n      position: absolute;\n      top: calc(50% - 9px);\n      left: -28px;\n      border-width: ").concat("14px",";\n      border-style: solid;\n      border-color: transparent white transparent transparent;\n    }\n\n    .").concat(e,"[cl-overlay-position='left']:after {\n      content: \"\";\n      position: absolute;\n      top: calc(50% - 7px);\n      right: -22px;\n      margin-left: -5px;\n      border-width: ").concat("12px",";\n      border-style: solid;\n      border-color: transparent transparent transparent black;\n    }\n\n    .").concat(e,"[cl-overlay-position='left']:before {\n      content: \"\";\n      position: absolute;\n      top: calc(50% - 9px);\n      right: -28px;\n      border-width: ").concat("14px",";\n      border-style: solid;\n      border-color: transparent transparent transparent white;\n    }\n\n    .suggestion-text-container {\n      height: fit-content;\n      width: fit-content;\n      display: flex;\n      flex-direction: column;\n      align-items: flex-start;\n      gap: 3px;\n      margin: 2px 10px;\n      letter-spacing: normal;\n      font-size: 14px;\n    }\n\n    .did-you-mean-text {\n      height: 16px;\n      white-space: nowrap;\n      width: fit-content;\n      line-height: 16px;\n      letter-spacing: normal;\n      font-size: 14px;\n      color: white;\n    }\n\n    .suggestion-text {\n      height: 16px;\n      white-space: nowrap;\n      width: fit-content;\n      color: white;\n      line-height: 16px;\n      font-weight: bold;\n      letter-spacing: normal;\n      font-size: 14px;\n    }\n\n    .accept-button {\n      position: relative;\n      width: 36px;\n      height: 36px;\n\n      border: 2px solid #FFFFFF;\n      border-radius: 7px;\n      cursor: pointer;\n    }\n\n    .accept-button:after {\n      content: '';\n      position: absolute;\n      top: 42%;\n      left: 50%;\n      width: 9px;\n      height: 14px;\n      border: solid;\n      border-color: white;\n      border-width: 0 3px 3px 0;\n      -webkit-transform: translate(-50%, -50%) rotate(45deg);\n      -ms-transform: translate(-50%, -50%) rotate(45deg);\n      transform: translate(-50%, -50%) rotate(45deg);\n    }\n\n    .deny-button {\n      position: relative;\n      width: 36px;\n      height: 36px;\n      border: 2px solid black;\n      border-radius: 7px;\n      cursor: pointer;\n    }\n\n    .deny-button:before, .deny-button:after {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      content: '';\n      height: 18px;\n      width: 2px;\n      background-color: #595959;\n    }\n\n    .deny-button:before {\n      transform: translate(-50%, -50%) rotate(45deg);\n    }\n\n    .deny-button:after {\n      transform: translate(-50%, -50%) rotate(-45deg);\n    }\n\n    @keyframes jello-animation {\n      0% {\n        transform: scale3d(1, 1, 1);\n      }\n      3% {\n        transform: scale3d(1.25, 0.75, 1);\n      }\n      4% {\n        transform: scale3d(0.75, 1.25, 1);\n      }\n      5% {\n        transform: scale3d(1.15, 0.85, 1);\n      }\n      6.5% {\n        transform: scale3d(0.95, 1.05, 1);\n      }\n      7.5% {\n        transform: scale3d(1.05, 0.95, 1);\n      }\n      10% {\n        transform: scale3d(1, 1, 1);\n      }\n      100% {\n        transform: scale3d(1, 1, 1);\n      }\n    }\n  ")}function R(e){return class extends e{connect(e,t,i){switch(e){case ut.INSIDE:t.appendChild(i);break;case ut.BEFORE:case ut.AFTER:t.insertAdjacentElement(e===ut.BEFORE?"beforebegin":"afterend",i)}}}}function L(e){return(e=e.parentNode).host?e.host:L(e)}function M(e){return class extends(R(e)){constructor(){super(),this.eventListeners=[],this.lastDragOverEvent=null,this.focusedElements=[],this.observer=null,this._observeChanges()}connectedCallback(){super.connectedCallback(),this._addAllListeners()}disconnectedCallback(){var e,t,i;super.disconnectedCallback(),this._deactivateEventListeners(),null===(e=this.removeFocusSubscription)||void 0===e||e.off(),null===(t=this.setFocusSubscription)||void 0===t||t.off(),null===(i=this.componentFocusedSubscription)||void 0===i||i.off(),this.observer.disconnect()}_addAllListeners(){this.observer.observe(this.getRootElement(),{childList:!0,subtree:!0}),this.model.type===wt.VIEW&&(this.eventListeners.push({eventName:"mousemove",callback:this._mouseMoveEventListener.bind(this),element:this}),this.eventListeners.push({eventName:"mouseout",callback:this._mouseOutEventListener.bind(this),element:this})),this.removeFocusSubscription=this.services.eventEmitter.on(Qi.REMOVE_FOCUS,(()=>{this._removeFocus()})),this.setFocusSubscription=this.services.eventEmitter.on(Qi.SET_FOCUS,(e=>{this._removeFocus(),this.model.id===e&&this._setFocus("host")})),this.componentFocusedSubscription=this.services.eventEmitter.on(Qi.COMPONENT_FOCUSED,(e=>{let{id:t,targetElementName:i}=e;this._removeFocus(),this.model.id===t&&this._setFocus(i)})),this.manifest.preventDraggable||this.getHostElement().setAttribute("draggable","true"),this._setElementListeners(this.getHostElement()),this._setGlobalListeners(),this._setEventListeners(),this._activateEventListeners(),this._setFocusableElementsAttribute()}_observeChanges(){let e={addded:!1,removed:!1},t=h((()=>{e.removed&&this._removeListenersForDisconnectedNodes(),e.addded&&(this._setEventListeners(),this._activateEventListeners(),this._setFocusableElementsAttribute(),this._updateFocusedElementClasses()),e={addded:!1,removed:!1}}),500);this.observer=new MutationObserver((function(i){for(let n of i){for(let t of n.addedNodes)t instanceof HTMLElement&&"STYLE"!==t.nodeName&&!e.addded&&(e=Object.assign(Object.assign({},e),{addded:!0}));for(let t of n.removedNodes)t instanceof HTMLElement&&"STYLE"!==t.nodeName&&!e.removed&&(e=Object.assign(Object.assign({},e),{removed:!0}));t()}}))}_setEventListeners(){this.getRootElement().querySelectorAll("[cl-inline-edit], [cl-inline-edit] *").forEach((e=>{this._isEventListenerPresent(e)||(e.getAttribute("draggable")||e.setAttribute("draggable","true"),this._setElementListeners(e,!0))})),this.getRootElement().querySelectorAll(":not([cl-inline-edit]):not([cl-type]):not([cl-inline-edit] *)").forEach((e=>{if(!this._isEventListenerPresent(e)){if(e.getAttribute("draggable")||e.setAttribute("draggable","true"),e instanceof HTMLElement){let t=e.tagName.toLowerCase();"input"!==t&&"textarea"!==t||"readonly"===!e.getAttribute("readonly")||e.setAttribute("readonly","readonly"),this.manifest.componentType===qi.VIDEO&&e.classList.contains("video-overlay")&&(e.style.visibility="visible")}this._setElementListeners(e)}}))}_removeListenersForDisconnectedNodes(){this.eventListeners=this.eventListeners.filter((e=>(e.element.isConnected||e.element.removeEventListener(e.eventName,e.callback),e.element.isConnected)))}_setGlobalListeners(){this.eventListeners.push({eventName:"drop",callback:e=>this._documentDropListener(e),element:document})}_isEventListenerPresent(e){return!!this.eventListeners.find((t=>t.element===e))}_setElementListeners(e,t){[{eventName:"click",callback:e=>this._elementClickListener(e,t),element:e},{eventName:"dblclick",callback:this._elementDoubleClickListener.bind(this),element:e},{eventName:"dragstart",callback:this._elementDragStartListener.bind(this),element:e},{eventName:"dragend",callback:this._elementDragEndListener.bind(this),element:e},{eventName:"dragover",callback:this._elementDragOverListener.bind(this),element:e},{eventName:"blur",callback:this._blurEventListener.bind(this),element:e,useCapture:!0}].forEach((e=>this.eventListeners.push(e)))}_elementClickListener(e,t){e.preventDefault(),e.stopImmediatePropagation();let i=e.composedPath()[0],o=this.getHostElement();t&&this.services.eventEmitter.emit(Qi.SHOW_INLINE_EDIT,{id:this.model.id,hostElement:o,targetElement:i}),this.model.focusParentOnClick?(t=L(o),this.services.eventEmitter.emit(Qi.COMPONENT_FOCUSED,{id:t.getAttribute(n("id")),hostElement:t,targetElement:t,targetElementName:"host"})):this.services.eventEmitter.emit(Qi.COMPONENT_FOCUSED,{id:this.model.id,hostElement:o,targetElement:i,targetElementName:this._getElementNameByNode(i)}),this.services.eventEmitter.emit(Qi.COMPONENT_CLICKED,e)}_elementDoubleClickListener(e){e.preventDefault(),e.stopImmediatePropagation(),this.services.eventEmitter.emit(Qi.COMPONENT_DOUBLE_CLICKED,{id:this.model.id,hostElement:this.getHostElement(),targetElement:e.composedPath()[0]})}_elementDragStartListener(e){e.stopPropagation();let t=e.composedPath().find((e=>{var t;return null===(t=e.hasAttribute)||void 0===t?void 0:t.call(e,n("type"))})),i=t.getAttribute(n("type"));this.services.eventEmitter.emit(Qi.COMPONENT_DRAGSTART,{id:this.model.id,path:this.model.path,hostElement:this.getHostElement(),targetElement:e.composedPath()[0],event:e,checkIfAllowed:n=>{if(n){if(n=t.getBoundingClientRect(),i!==wt.FLOATING_IMAGE&&e.dataTransfer.setDragImage(t,e.pageX-n.left,e.pageY-n.top),i===wt.SLIDER){var o=t.shadowRoot.querySelector(".slides-container");o=new WebKitCSSMatrix(getComputedStyle(o).transform).m41,e.dataTransfer.setDragImage(t,e.pageX-n.left-o,e.pageY-n.top)}}else e.preventDefault(),this.services.eventEmitter.emit(Qi.COMPONENT_DRAGEND)}})}_elementDragEndListener(e){e.stopPropagation(),this.services.eventEmitter.emit(Qi.COMPONENT_DRAGEND,{id:this.model.id,path:this.model.path,hostElement:this.getHostElement(),targetElement:e.composedPath()[0],event:e})}_elementDragOverListener(e){e.preventDefault(),e.stopPropagation();let t=this.lastDragOverEvent;this.lastDragOverEvent=e,e.pageX&&e.pageY&&(t&&t.clientY===e.clientY&&t.clientX===e.clientX||this.services.eventEmitter.emit(Qi.COMPONENT_DRAGOVER,{id:this.model.id,hostElement:this.getHostElement(),targetElement:e.composedPath()[0],event:e}))}_documentDropListener(e){this.services.eventEmitter.emit(Qi.DOCUMENT_DROP,{id:this.model.id,hostElement:this.getHostElement(),targetElement:e.composedPath()[0],event:e})}_mouseMoveEventListener(e){let t=this._findClosestHostElement(e.composedPath());this.preHoveredElement&&this.preHoveredElement!==t&&this.preHoveredElement.classList.remove(je.SYSTEM_CLASS_PREFIX+"hovered"),(this.preHoveredElement=t)&&(t.classList.add(je.SYSTEM_CLASS_PREFIX+"hovered"),e={id:t.getAttribute(n("id")),hostElement:t,targetElement:e.composedPath()[0],event:e},this.services.eventEmitter.emit(Qi.COMPONENT_MOUSE_MOVE,e))}_mouseOutEventListener(e){e.stopPropagation(),(e=this._findClosestHostElement(e.composedPath()))&&e.classList.remove(je.SYSTEM_CLASS_PREFIX+"hovered")}_blurEventListener(e){e.stopImmediatePropagation()}_removeFocus(){this.focusedElements.length&&this.focusedElements.forEach((e=>{var t;return null===(t=e.classList)||void 0===t?void 0:t.remove(je.SYSTEM_CLASS_PREFIX+"focused")})),this.focusedElements=[]}_setFocus(e){var t=this.getHostElement();this.focusedElements=[t],t.classList.add(je.SYSTEM_CLASS_PREFIX+"focused"),"host"!==e&&((t=this.getElements().filter((t=>t.getAttribute(n("element"))===e))).forEach((e=>e.classList.add(je.SYSTEM_CLASS_PREFIX+"focused"))),this.focusedElements=this.focusedElements.concat(t))}_findClosestHostElement(e){return(e=e.filter((e=>e instanceof HTMLElement)).filter((e=>!!e.getAttribute(n("component"))))).length?e[0]:null}_activateEventListeners(){this.eventListeners.forEach((e=>{e.activated||(e.element.addEventListener(e.eventName,e.callback,e.useCapture),e.activated=!0)}))}_deactivateEventListeners(){this.eventListeners.forEach((e=>{e.element.removeEventListener(e.eventName,e.callback)})),this.eventListeners=[]}_getElementNameByNode(e){var t;return e&&(e=e.closest("[".concat(n("element"),"]")))&&("host"===(e=e.getAttribute(n("element")))||null!==(t=this.manifest.focusableElements)&&void 0!==t&&t.includes(e))?e:"host"}_setFocusableElementsAttribute(){this.getElements().forEach((e=>{var t;null!==(t=this.manifest.focusableElements)&&void 0!==t&&t.includes(e.getAttribute(n("element")))&&e.setAttribute(n("focusable-element"),"")}))}_updateFocusedElementClasses(){if(!(2>this.focusedElements.length)){var e=this.focusedElements.find((e=>e.hasAttribute(n("focusable-element"))));e&&this._setFocus(e.getAttribute(n("element")))}}}}function D(e){return e.reduce(((e,t)=>e+t),0)}function w(e){for(;e.firstElementChild;)e=e.firstElementChild;return e}function P(e){return e={[At.FLOATING_BAR]:2,[At.FLOATING_BOX]:2,[At.DETACHED]:1,[At.CONTENT_LOCKER]:0,[At.LAUNCHER]:3,[At.BUILT_IN]:0}[e]||0,e=localStorage.getItem("esOverlapDebug")?10*e:e,Math.round(Number.MAX_SAFE_INTEGER/1e7-e)}function x(e){return o(Object.entries(e).filter((e=>([,e]=e,null!=e&&""!==e))))}async function V(e){try{let t=(new TextEncoder).encode(e);return function(e){return Array.from(new Uint8Array(e)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(await crypto.subtle.digest("SHA-256",t))}catch(e){Ee.error("CANT_HASH",{errors:[e.toString()]})}}function k(e){return"object"!=typeof e||null===e}function F(e){var t,i;if("cl"!==Ce.getPrefix().debugPrefix&&!Ce.getContactRemapped()){var n=null===(t=window.__es_sdk)||void 0===t||null===(i=t.pushNotifications)||void 0===i?void 0:i.rebind;if(n&&(t=Ce.getWebPushContactId()))try{e.contactId&&e.contactId.toString().trim()!==t.toString().trim()?n("contactId",e.contactId,((e,t)=>U(e,t))):e.externalCustomerId?n("externalCustomerId",e.externalCustomerId,((e,t)=>U(e,t))):e.email?n("email",e.email,((e,t)=>U(e,t))):e.phone&&n("phone",e.phone,((e,t)=>U(e,t)))}catch(e){Ee.error(e,"Error while rebinding contact")}}}function U(e,t){if(Ce.setContactRemapped(e),e)if(t)B(t);else{var i,n;(e=null===(i=window.__es_sdk)||void 0===i||null===(n=i.pushNotifications)||void 0===n?void 0:n.getUserPushSubscriptionContactId)&&e((e=>B(e)))}}function B(e){lo.addToQueue({widgetSubscriptionContactId:e},"[WebContactService] rebindContact. After rebinding contact");let t={...o(Object.entries(Ce.getCustomerData()).filter((e=>([,e]=e,!!e)))),esContactId:e};Ce.setCustomerData(t),e={...o(Object.entries(Ce.getUserInfo()).filter((e=>([,e]=e,!!e)))),esContactId:e},Ce.setUserInfo(e)}function H(){return Promise.all((0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).map((e=>Promise.resolve(e).then((e=>({status:"fulfilled",value:e})),(e=>({status:"rejected",reason:e}))))))}function G(e,t){return e.reduce(((e,i)=>Array.isArray(i)&&1<t?e.concat(G(i,t-1)):e.concat(i)),[])}function W(e){return window.matchMedia("(max-width: ".concat(e.shared.mobileBreakpointWidth,"px)")).matches}function j(e,t,i){return e.filter((e=>{let n=(e=t[e.formId]).filter((e=>!0===i[e]));return e.length===n.length}))}function z(e,t,i){return i===$o.AND?e===t:i===$o.OR?0<t:void 0}function K(e,t,i,n){return n.includes(i)}function X(e,t,i,n){return String(n).startsWith(i)}function Y(e,t,i,n){return String(n).endsWith(i)}function Q(e,t,i,n){return String(n)===String(i)}function q(e,t,i,n){return-1<String(n).search(new RegExp(i))}function Z(e,t,i,n){return i.split(",").map((e=>e.trim())).some((e=>String(n).includes(e)))}function J(e,t,i,n){return null!=n&&""!==n}function $(e,t){return e-((2<arguments.length&&void 0!==arguments[2]?arguments[2]:0)||0)>=Pe.convert(t.unit,we.MILLISECOND,t.amount)}function ee(e,t,i,n){return $(e.timeSpentOnPageMs,i,e.cacheTimeShiftMs)}function te(e,t,i,n){return $(e.sessionDurationMs,i,e.cacheTimeShiftMs)}function ie(e,t,i,n){return $(e.unActiveMs,i,e.cacheTimeShiftMs)}function ne(e,t,i,n){return document.querySelector(i)}function oe(e,t,i,n){return i=!1,(e=e.formVariants&&e.formVariants[t.id])&&e.submit&&(i=!0),Po.log("VISITOR USER_ALREADY_SUBSCRIBED_FOR_THE_CURRENT_FORM ".concat(t.id," = ").concat(i)),i}function re(e,t,i,n){return!0===e.mouseout}function ae(e,t,i,n){return!0===e.firstTimeSeen}function se(e,t,i,n){({id:t}=t);let{formVariantVisibleMap:o,formVariantHoverMap:r}=e,{unit:a,amount:s}=i;return!(!o.has(t)||r.has(t))&&(e=Pe.convert(a,we.MILLISECOND,s),i=o.get(t),(new Date).getTime()-i.getTime()>=e)}function le(e,t,i,n,o){return e=e.readPercent>i,Po.log("pageReadPercent  ".concat(o," ").concat(JSON.stringify(i)," = ").concat(e)),e}function de(e,t,i,n,o){return e=e.sessionPagesCount>i,Po.log("pagesViewed  ".concat(o," ").concat(JSON.stringify(i)," = ").concat(e)),e}function ce(e,t,i,n,o){return e=+n<+i,Po.log("".concat(o," ").concat(i," = ").concat(e)),e}function he(e,t,i,n,o){return e=+n>+i,Po.log("".concat(o," ").concat(i," = ").concat(e)),e}function ue(e,t,i,n,o){var r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:[];Po.log("================ apply rules for formVariant ".concat(e.id," ================"));let a=new Yo(e.rules.CUSTOM_CODE,e),s=new Qo(e,i),l=new er(e.rules.HIDE,e,r),d=new ir(e.rules.SCHEDULE,e);r=new qo(e.rules.FREQUENCY,e,r);let c=new Cr(e.rules.TARGETING,e,n),h=new Sr(e),u=s.isEnabled(),m=s.isFulfilled(t,e),p=d.isEnabled(),g=d.isFulfilled(t),E=r.isEnabled(),v=r.isFulfilled(t);var _=r.isBasedOnTime(),f={fulfilled:v,basedOnTime:_};_=c.isEnabled();let y=c.isFulfilled(t),T=l.isEnabled();Po.log("frequencyStats ".concat(JSON.stringify(f))),f=l.isFulfilled(t,f);let I=h.isEnabled(),O=h.isFulfilled(o);var A=[];return T&&A.push(!f),p&&A.push(g),E&&A.push(v),_&&A.push(y),I&&A.push(O),{formVariant:e,allRulesFulfilled:A=!a.isEnabled()&&0<A.length&&A.length===A.filter((e=>!0===e)).length,stats:t,sessionStat:i,locationData:n,rules:{[Xo.ANNOYANCE]:{enabled:u,fulfilled:m,rule:s},[Xo.HIDE]:{enabled:T,fulfilled:f,rule:l},[Xo.SCHEDULE]:{enabled:p,fulfilled:g,rule:d},[Xo.FREQUENCY]:{enabled:E,fulfilled:v,rule:r},[Xo.TARGETING]:{enabled:_,fulfilled:y,rule:c},[Xo.CUSTOM_CODE]:{enabled:a.isEnabled(),fulfilled:a.isFulfilled(),rule:a},[Xo.PLACEMENT]:{enabled:I,fulfilled:O,rule:h}}}}function me(e,t){return":ENV"===e?W(t.document)?"mobile":"desktop":e}function pe(e,t,i){for(let n=0;n<t.length;n++){if(e=e[me(t[n],i)],Array.isArray(e))return e.map((e=>pe(e,t.slice(n+1),i)))}return e}class ge{constructor(e){this.commandsQueueProcessor=e}run(){this.commandsQueueProcessor.process()}}class Ee{static error(e){Ee._log("ERROR","RUNTIME_ERROR "+(1<arguments.length&&void 0!==arguments[1]?arguments[1]:""),e)}static warn(e,t){Ee._log("WARN",e,t)}static info(e,t){Ee.log(e,t)}static log(e,t){Ee._log("INFO",e,t)}static _log(e,t,i){if("localhost"===window.location.hostname)console.log(e,t,i);else if("ERROR"===e&&console.log(e,t,i),"function"==typeof window.scriptLog09u8y9)try{window.scriptLog09u8y9(e,t,i)}catch(e){console.error(e)}}}class ve{constructor(){this.currentProductPrefix=ve.PREFIX.startsWith("PRODUCT_PREFIX_PLACE")?"es":ve.PREFIX}getProductName(){return"claspo"}getPrefix(){return this.currentProductPrefix}getStoragePrefix(){return"es"===this.currentProductPrefix?"":"".concat(this.currentProductPrefix,".")}get(){var e="_".concat(this.currentProductPrefix,"Config");if(e=window[e],"es"===this.currentProductPrefix){let t=e.crawler,i=e.hasOwnProperty("crawler")&&0<Object.keys(e.crawler).length;t&&i||(e.crawler=ve.DEFAULT_CRAWLER)}return e}}t(ve,"PREFIX","cl"),t(ve,"DEFAULT_CRAWLER",{pages:{main:[],catalog:[],product:[]},catalog:{categoryKey:[]},product:{productKey:[]},status_cart:[],checkout:[],params:{CATEGORY:{recoms:{productsRecommendationsArgs:{categoryField:"tags_categories_ids"}}}}});var _e=new ve;class fe{_process(e){try{return e()}catch(e){return null}}}class ye extends fe{get(e){return this._process((()=>JSON.parse(localStorage.getItem(e))))}set(e,t){return this._process((()=>localStorage.setItem(e,JSON.stringify(t))))}remove(e){return this._process((()=>localStorage.removeItem(e)))}}class Te extends ye{constructor(e){super(),this.stateKey=e.getPrefix()+"State"}getClass(){return Te}get(e){return this._process((()=>JSON.parse(localStorage.getItem(e))))}set(e,t){this._process((()=>localStorage.setItem(e,JSON.stringify(t))))}setState(e){this._process((()=>this.set(this.stateKey,e)))}getState(){return this._process((()=>this.get(this.stateKey)))}}var Ie=new Te(_e);class Oe{constructor(e){this.configService=e}get(){let e=this.configService.getPrefix();return Oe.defaultStatesByProduct[e]||Oe.defaultStatesByProduct.es}}t(Oe,"prefix",{debugPrefix:_e.currentProductPrefix,storagePrefix:_e.getStoragePrefix()}),t(Oe,"defaultStatesByProduct",{cl:{prefix:Oe.prefix},es:{prefix:Oe.prefix,userInfo:{email:null,esContactId:null},tracking:{product:{productId:null},statusCart:{identifier:null,GUID:null},category:{categoryKey:null}},pageType:{previous:null,current:null,changedDate:null},experiment:{log:{},variants:[]},activatorConfig:{RECOMS:null,TRACKING:null},metrics:{lastDate:null,data:{}}}});var Ae=new Oe(_e);var Ce=new class{constructor(e,i,n){t(this,"state",null),this.configService=e,this.storageService=i,this.initialStateProvider=n,this.state=this._getInitialState()}getConfig(){return this.configService.get()}getState(){return this.state}setActivatorConfig(e){this.setState((t=>({...t,activatorConfig:e})))}getActivatorConfig(){return this.getState().activatorConfig}getUserInfo(){let{userInfo:e,webContact:t}=this.getState();return!e&&t?{...t,esContactId:t.utmContactId,clContactId:t.widgetSubscriptionContactId}:e}getExperimentVariants(){return(this.getState().experiment||{}).variants||[]}getFormAbTestsConfig(){return(this.getConfig().formConfig||{}).abTests||[]}getFormAbTestsFormVariants(){return(this.getState().formVariantsAbTest||{}).formVariants||[]}setFormAbTestFormVariants(e){this.setState((t=>({...t,formVariantsAbTest:{...t.formVariantsAbTest,formVariants:e}})))}addAbTestFormVariant(e){this.setState((t=>({...t,formVariantsAbTest:{...t.formVariantsAbTest,formVariants:[...t.formVariantsAbTest.formVariants,e]}})))}setState(e){this.state="function"==typeof e?e(this.getState()):{...this.getState(),...e},this.storageService.setState(this.getState())}_getInitialState(){return this.storageService.getState()||this.initialStateProvider.get()}addExperimentVariant(e){this.setState((t=>({...t,experiment:{...t.experiment,variants:[...t.experiment.variants,e]}})))}setExperimentVariants(e){this.setState((t=>({...t,experiment:{...t.experiment,variants:e}})))}setStatusCartIdentifier(e){let{identifier:t,GUID:i}=e;this.setState((e=>({...e,tracking:{...e.tracking,statusCart:{...e.tracking.statusCart,identifier:t,GUID:i}}})))}setProductPageId(e){this.setState((t=>({...t,tracking:{...t.tracking,product:{...t.tracking.product,productId:e}}})))}setPurchasedItems(e){this.setState((t=>({...t,tracking:{...t.tracking,purchasedItems:{products:e}}})))}setStatusCartProducts(e){this.setState((t=>({...t,tracking:{...t.tracking,statusCart:{...t.tracking.statusCart,products:e}}})))}setCategoryKey(e){this.setState((t=>({...t,tracking:{...t.tracking,category:{...t.tracking.category,categoryKey:e}}})))}setUserInfo(e){this.getState().userInfo&&this.setState((t=>({...t,userInfo:e})))}setPageType(e){let{previous:t,current:i}=e;this.setState((e=>({...e,pageType:{previous:t,current:i,changedDate:Date.now()}})))}getCustomerData(){let{customerData:e,webContact:t}=this.getState();return!e&&t?{...t,esContactId:t.utmContactId,clContactId:t.widgetSubscriptionContactId}:null!=e?e:{}}setCustomerData(e){this.getState().customerData&&this.setState((t=>({...t,customerData:e})))}getWebContact(){return this.getState().webContact||{}}setWebContact(e){this.setState((t=>({...t,webContact:{...t.webContact,...e}})))}eraseWebContact(){this.setState((e=>({...e,webContact:void 0})))}getMetrics(){return this.getState().metrics||{data:{}}}setMetrics(e){this.setState((t=>({...t,metrics:{...t.metrics,...e}})))}getLocationData(){return this.getState().locationData||{data:{}}}setLocationData(e){this.setState((t=>({...t,locationData:{...t.locationData,...e}})))}setPrefix(e,t){this.setState((i=>({...i,prefix:{debugPrefix:e,storagePrefix:t}})))}getPrefix(){return this.getState().prefix||Ae.prefix}setInstanceDebugMode(e){this.setState((t=>({...t,instanceDebugMode:e})))}getInstanceDebugMode(){return this.getState().instanceDebugMode||!1}setContactRemapped(e){this.setState((t=>({...t,contactRemappedV2:e})))}getContactRemapped(){return this.getState().contactRemappedV2||!1}setCustomerId(e){this.setState((t=>({...t,customerId:e})))}getCustomerId(){return this.getState().customerId||""}getWebPushContactId(){return this.storageService.get("esWebPushContactId")||""}}(_e,Ie,Ae);let Se=(e,t)=>{try{const i=new RegExp("".concat(t,"/(\\d+)")),n=e.match(i);return n?n[1]:null}catch(e){return Ee.error(e,"Failed to determine browser version"),null}},be=e=>{try{return e.includes("Chrome")?99>=Se(e,"Chrome"):e.includes("Safari")?12>=Se(e,"Version"):!e.includes("Firefox")||72>=Se(e,"Firefox")}catch(e){return Ee.error(e,"Unable to check if this browser is up to date"),!0}},Ne=!("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype),Re=(e,t,i,n)=>{const{addEventListenerBase:o,addEventListener:r}=EventTarget.prototype;(o||r).call(e,t,i,n)};class Le{constructor(){this.sessionCountKey="".concat(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").concat(Le.staticKeyPart)}isFirstTimeSeen(){let e=Ie.get(this.sessionCountKey),t=Ie.get(Le.staticKeyPart),i=this._parseKeyValue(e),n=this._parseKeyValue(t);return isNaN(e)||isNaN(e)?e?i:!t||n:1===Math.max(e,t)}_parseKeyValue(e){return null===e||!isNaN(e)&&1==+e}getStats(){return{firstTimeSeen:this.isFirstTimeSeen()}}destroy(){}}t(Le,"staticKeyPart","f.session.count");class Me{constructor(){this.prefix=0<arguments.length&&void 0!==arguments[0]?arguments[0]:""}incrementCount(e){let t=this.getCount(e)+1;Ie.set(e,t)}getKey(e){return this.prefix+e}getCount(e){return i(Ie.get(e))}map(e){let t=Ie.get(e)||{};return{put(i,n){t[i]=n,Ie.set(e,t)},incrementCount(n){t[n]=i(t[n])+1,Ie.set(e,t)},clear(i){delete t[i],Ie.set(e,t)},get:e=>t[e],value:()=>t}}}class De{static get(){try{let e=localStorage.getItem("cl.dev.session.ttl");return e?JSON.parse(e):JSON.parse(_e.get().formConfig.SESSION_TTL)}catch(e){return De.fallbackConfig}}}t(De,"fallbackConfig",{unit:"MINUTE",amount:"30"});let we={MILLISECOND:"MILLISECOND",SECOND:"SECOND",MINUTE:"MINUTE",HOUR:"HOUR",DAY:"DAY",WEEK:"WEEK",getAll:function(){return Object.keys(this).filter((e=>"getAll"!==e))}};class Pe{static convert(e,t,i){return e=Pe.toMsMapper[e](i),Pe.fromMsMapper[t](e)}}Pe.toMsMapper={[we.MILLISECOND]:e=>e,[we.SECOND]:e=>1e3*e,[we.MINUTE]:e=>6e4*e,[we.HOUR]:e=>36e5*e,[we.DAY]:e=>864e5*e,[we.WEEK]:e=>6048e5*e},Pe.fromMsMapper={[we.MILLISECOND]:e=>e,[we.SECOND]:e=>e/1e3,[we.MINUTE]:e=>e/6e4,[we.HOUR]:e=>e/36e5,[we.DAY]:e=>e/864e5,[we.WEEK]:e=>e/6048e5};class xe{constructor(e){if(this.endISOString=this.startISOString=null,e&&e.length){let[t,i]=e.split("_");this.startISOString=t,this.endISOString=i}}init(){let e=(new Date).toISOString();this.endISOString=this.startISOString=e}getStartISOString(){return this.startISOString}getEndISOString(){return this.endISOString}updateEndISODate(e){this.endISOString=e}isEmpty(){return!this.getStartISOString()||!this.getEndISOString()}toString(){return"".concat(this.getStartISOString(),"_").concat(this.getEndISOString())}}class Ve extends ye{constructor(e,i){super(),t(this,"_eventListener",(e=>{this._lastActivityDate=new Date,this._startIfNeeded(this._lastActivityDate.getTime()),Ve._eventListenersMap[e.type]&&this._updateLastActivity()})),this.prefix="".concat(e.getPrefix(),"."),this._sessionPagesCountKey=this.getKey("f.session.pages.count"),this.urlSearchKey=this.getKey("f.session.url.search"),this._sessionKey=this.getKey("f.session"),this._registeredKeysSet=new Set,this.registerKeys(this._sessionPagesCountKey,this.urlSearchKey,this._sessionKey),this.sessionConfig=i,this._lastActivityDate=new Date,this._expireIfNeeded(0),this._startIfNeeded(0),this._listeners=Object.keys(Ve._eventListenersMap).map((e=>(window.addEventListener(e,this._eventListener),e)))}registerKeys(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach((e=>{this._registeredKeysSet.add(e)}))}destroy(){this._listeners.forEach((e=>{window.removeEventListener(e,this._eventListener)}))}getLastActivityDate(){return this._lastActivityDate}get(e){return this._expireIfNeeded(this._lastActivityDate.getTime()),super.get(e)}_updateLastActivity(){let e=this.getPersistedValue();e.updateEndISODate(this._lastActivityDate.toISOString()),this.set(this._sessionKey,e.toString())}_expireIfNeeded(e){!this.isInCurrentSession(e)&&super.get(this._sessionKey)&&this.expireSession()}_startIfNeeded(e){this.isInCurrentSession(e)||this.startSession()}getPersistedValue(){return new xe(super.get(this._sessionKey))}getKey(e){return this.prefix+e}isInCurrentSession(e){var t=this.getPersistedValue();if(t.isEmpty())return!1;var i=this.sessionConfig.get();return i=Pe.convert(i.unit,we.MILLISECOND,i.amount),t=new Date(t.getEndISOString()).getTime(),e=Math.max(t,e),!(Date.now()-e>i)}expireSession(){Array.from(this._registeredKeysSet).forEach((e=>{super.remove(e)})),super.remove(this._sessionKey)}startSession(){let e=new xe;e.init(),super.set(this._sessionKey,e.toString()),this.incrementSessionCount()}incrementSessionCount(){let e="".concat(_e.getStoragePrefix()).concat("f.session.count");var t=Ie.get(e);t||"f.session.count"===e||(t=Ie.get("f.session.count")),t=i(t)+1,Ie.set(e,t)}incrementSessionPagesCount(){let e=this.getSessionPagesCount()+1;super.set(this._sessionPagesCountKey,e)}getSessionPagesCount(){var e=super.get(this._sessionPagesCountKey);return e?(e=Number.parseInt(e),Number.isNaN(e)?0:e):0}getInstance(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return new Ve(...t)}}t(Ve,"_eventListenersMap",{click:!1,touchmove:!1,touchstart:!1,scroll:!1,beforeunload:!0,hashchange:!0});var ke=new Ve(_e,De);class Fe extends Me{constructor(e){super(e),this.skipListKey=this.getKey("f.session.skipList"),this.urlSearchKey=this.getKey("f.session.url.search"),this.annoyanceLastClosedTsKey=this.getKey("f.session.annoyance.last_closed_ts"),this.annoyanceLastClosedPagesCount=this.getKey("f.session.annoyance.last_closed_pages_count"),ke.registerKeys(this.skipListKey,this.urlSearchKey,this.annoyanceLastClosedTsKey,this.annoyanceLastClosedPagesCount)}getStats(){let e=ke.getPersistedValue();return{sessionDurationMs:new Date-new Date(e.getStartISOString()),sessionPagesCount:this.getSessionPagesCount(),currentSession:e,sessionUrlSearchParams:this.getUrlSearchParams(),sessionAnnoyanceLastWidgetClosedMs:this.getSessionAnnoyanceDateTimeString()?new Date-new Date(this.getSessionAnnoyanceDateTimeString()):null,sessionAnnoyanceLastWidgetPagesCount:this.getSessionAnnoyancePagesCountString(),skipList:this.getSkipList(),isInCurrentSession:ke.isInCurrentSession(),lastActivityDate:ke.getLastActivityDate()}}getSkipList(){let e=ke.get(this.skipListKey);return e&&JSON.parse(e)||[]}addToSkipList(e){var t=ke.get(this.skipListKey);(t=JSON.parse(t)||[]).push(e),e=[...new Set(t)],ke.set(this.skipListKey,JSON.stringify(e))}getNowDateTime(){return(new Date).toISOString()}incrementSessionPagesCount(){ke.incrementSessionPagesCount()}getSessionPagesCount(){return ke.getSessionPagesCount()}setUrlSearchParams(){let e=window.location.search;if(e){let t=this.getUrlSearchParams();t.includes(e)||(t.push(e),ke.set(this.urlSearchKey,t.join(",")))}}getUrlSearchParams(){let e=ke.get(this.urlSearchKey);return e?e.split(","):[]}getSessionAnnoyanceDateTimeString(){return ke.get(this.annoyanceLastClosedTsKey)}getSessionAnnoyancePagesCountString(){return ke.get(this.annoyanceLastClosedPagesCount)}setAnnoyLastClosed(){ke.set(this.annoyanceLastClosedTsKey,this.getNowDateTime()),ke.set(this.annoyanceLastClosedPagesCount,this.getSessionPagesCount())}destroy(){}}class Ue extends Me{constructor(e){super(e),document.addEventListener("mousemove",this.handleInteraction.bind(this)),document.addEventListener("scroll",this.handleInteraction.bind(this)),document.addEventListener("keydown",this.handleInteraction.bind(this)),document.addEventListener("click",this.handleInteraction.bind(this)),document.addEventListener("touchstart",this.handleInteraction.bind(this)),this.startTime=new Date,this.lastInteraction=new Date,this.maxUnActiveMs=this.maxReadPercent=0}handleInteraction(){this.lastInteraction=new Date}incrementPageCount(){this.incrementCount(this.getKey("f.page.count")),this.startTime=new Date,this.lastInteraction=new Date,this.maxReadPercent=this.maxUnActiveMs=0}getStats(){let e=Number.parseInt(100*(window.scrollY+window.innerHeight)/document.documentElement.scrollHeight);return this.maxReadPercent=Math.max(this.maxReadPercent,e),this.maxUnActiveMs=Math.max(this.maxUnActiveMs,new Date-this.lastInteraction),{timeSpentOnPageMs:new Date-this.startTime,readPercent:this.maxReadPercent,unActiveMs:this.maxUnActiveMs,lastViewIndex:this.getCount(this.getKey("f.page.count"))}}destroy(){document.removeEventListener("mousemove",this.handleInteraction.bind(this)),document.removeEventListener("scroll",this.handleInteraction.bind(this)),document.removeEventListener("keydown",this.handleInteraction.bind(this)),document.removeEventListener("click",this.handleInteraction.bind(this)),document.removeEventListener("touchstart",this.handleInteraction.bind(this))}}class Be{constructor(){t(this,"listeners",{"*":[]})}emit(e,t){e=this.listeners[e],Array.isArray(e)&&e.forEach((e=>e(t))),this.listeners["*"].forEach((e=>e()))}on(e,t){let i=0;return this.listeners[e]&&this.listeners[e].length?(this.listeners[e].push(t),i=this.listeners[e].length-1):this.listeners[e]=[t],{off:()=>{this.listeners[e].splice(i,1)}}}destroy(){}}class He extends Me{constructor(e){super(e)}view(e){this.map(this.getKey(He.storageKeys.VIEW)).put(e,(new Date).toISOString())}submit(e){this.map(this.getKey(He.storageKeys.SUBMIT)).put(e,(new Date).toISOString())}setRelativeTimerViewDate(e){this.map(this.getKey(He.storageKeys.RELATIVE_TIMER_VIEW_DATE)).put(e,(new Date).toISOString())}clearRelativeTimerViewDate(e){this.map(this.getKey(He.storageKeys.RELATIVE_TIMER_VIEW_DATE)).clear(e)}close(e){this.map(this.getKey(He.storageKeys.CLOSE)).incrementCount(e)}closeDate(e){this.map(this.getKey(He.storageKeys.CLOSE_DATE)).put(e,(new Date).toISOString())}destroy(){}getStats(){var e=this.map(this.getKey(He.storageKeys.VIEW)).value();let t=this.map(this.getKey(He.storageKeys.SUBMIT)).value(),n=this.map(this.getKey(He.storageKeys.CLOSE)).value(),o=this.map(this.getKey(He.storageKeys.CLOSE_DATE)).value(),r=this.map(this.getKey(He.storageKeys.RELATIVE_TIMER_VIEW_DATE)).value(),a={};for(let t in e)a[t]=a[t]?{...a[t],view:e[t]}:{view:e[t]};for(let e in t)a[e]=a[e]?{...a[e],submit:t[e]}:{submit:t[e]};for(let e in r)a[e]=a[e]?{...a[e],relativeTimerViewDate:r[e]}:{relativeTimerViewDate:r[e]};for(let t in n)e=i(n[t]),a[t]=a[t]?{...a[t],close:e}:{close:e};for(let e in o)a[e]=a[e]?{...a[e],closeDate:o[e]}:{closeDate:o[e]};return{formVariants:a}}}t(He,"storageKeys",{VIEW:"f.fv.view",SKIP:"f.fv.skip",SUBMIT:"f.fv.submit",CLOSE:"f.fv.close",CLOSE_DATE:"f.fv.closeDate",RELATIVE_TIMER_VIEW_DATE:"f.fv.relativeTimerViewDate"});let Ge=new Set(["FLOATING_BOX","FLOATING_BAR","DETACHED"]);class We{constructor(){this.formVariantVisibleMap=new Map,this.formVariantHoverMap=new Map}visible(e){this.formVariantVisibleMap.set(e,new Date)}hover(e){this.formVariantHoverMap.set(e,new Date)}getStats(){return{formVariantVisibleMap:this.formVariantVisibleMap,formVariantHoverMap:this.formVariantHoverMap}}close(e){this.formVariantVisibleMap.delete(e),this.formVariantHoverMap.delete(e)}}let je={SYSTEM_CLASS_PREFIX:"cl-",SYSTEM_ATTRIBUTE_PREFIX:"cl-"};class ze extends Be{constructor(){super();let e=Ce.getPrefix().storagePrefix;this.siteStat=new Le(e),this.sessionStat=new Fe(e),this.pageStat=new Ue(e),this.formVariantStat=new He(e),this.formVariantHoverStat=new We,this.performDetection(),this.mouseOutHandler=this.onMouseOut.bind(this),this.mouseOverHandler=this.onMouseOver.bind(this),document.addEventListener("mouseout",this.mouseOutHandler),document.addEventListener("mouseover",this.mouseOverHandler)}getStats(){return{...this.siteStat.getStats(),...this.sessionStat.getStats(),...this.pageStat.getStats(),...this.formVariantStat.getStats(),...this.formVariantHoverStat.getStats()}}performDetection(){this.pageStat.incrementPageCount(),this.sessionStat.incrementSessionPagesCount(),this.sessionStat.setUrlSearchParams()}onUrlChanged(){this.reInitPageStat(),this.performDetection()}reInitPageStat(){this.pageStat.destroy(),this.pageStat=new Ue(Ce.getPrefix().storagePrefix)}onMouseOut(e){null==e.toElement&&null==e.relatedTarget&&this.emit("mouseout")}onMouseOver(e){e.toElement&&"HTML"===e.toElement.tagName||e.toElement===document.body?this.emit("mouseover"):(e=e.composedPath().find((e=>e instanceof HTMLElement&&e.getAttribute(n("widget-id")))))&&(e=e.getAttribute(n("widget-id")),this.formVariantHoverStat.hover(e))}onWidgetClosed(e){this.formVariantStat.close(e.id),this.formVariantHoverStat.close(e.id),"CONTENT_LOCKER"===e.type&&this.formVariantStat.closeDate(e.id),Ge.has(e.type)&&this.sessionStat.setAnnoyLastClosed()}destroy(){this.pageStat.destroy(),document.removeEventListener("mouseout",this.mouseOutHandler),document.removeEventListener("mouseover",this.mouseOverHandler)}}class Ke{isDebugQueryStringPresentInUrl(e){let t=window.location.href.toLowerCase();return!!Object.values(e).find((e=>t.includes(e)))}_getDebugIds(e,t){return(e.get(t)||"").split(",").map((e=>parseInt(e))).filter((e=>Number.isInteger(e)))}}let Xe="aa ab ae af ak am an ar as av ay az ba be bg bh bi bm bn bo br bs ca ce -- ch co cr cs cu cv cy da de dv dz ee el en eo es et eu fa ff fi fj fo fr fy ga gd gl gn gu gv ha -- he hi ho hr ht hu hy hz ia id ie ig ii ik io is it iu ja jv ka kg ki kj kk kl km kn ko kr ks ku kv kw ky la lb lg li ln lo lt lu lv mg mh mi mk ml mn mr ms mt my na nb nd ne ng nl nn no nr nv ny oc oj om or os pa pi pl ps pt qu rm rn ro ru rw ry sa sc sd se sg sh si sk sl sm sn so sq sr ss st su sv sw ta te tg th ti tk tl tn to tr ts tt tw ty ug uk ur uz ve vi vo wa wo xh yi yo za zh zu".split(" ");var Ye=new class{getLanguageForForms(){return this._fromHtml()||this._fromUrl()||this._fromNavigator()}getLanguageForRecoms(){var e;if(null!==(e=Ce.getConfig().features)&&void 0!==e&&e.mulanRecoms)return(e=this._fromHtml()||this._fromUrl())&&this._normalizeBrowserLanguagesForRecoms(e)||void 0}_fromHtml(){return document.querySelector("html").getAttribute("lang")}_fromUrl(){return location.href.split("/").filter((e=>2===e.length||5===e.length)).find((e=>Xe.includes(e)))}_fromNavigator(){return navigator.language}_normalizeBrowserLanguagesForRecoms(e){return e.includes("-")?e.split("-")[0].toLowerCase():e.includes("_")?e.split("_")[0].toLowerCase():e}};let Qe={SUBSCRIPTION_FORM:"SUBSCRIPTION_FORM",REQUEST_FORM:"REQUEST_FORM",INFORMER:"INFORMER",AGE_VERIFY:"AGE_VERIFY"};class qe{static parseFormVariantId(e){return{formId:+e.split("f")[1].split("v")[0],variantId:+e.split("v")[1],formVariantId:e}}static createFormParams(e,t,i,n){var o,r;let{formId:s,variantId:l}=qe.parseFormVariantId(e);var d=Ye.getLanguageForForms(),c=Ie.get("clContactId");let h=Ce.getConfig();var u,m;(i={formId:s,variantId:l,lang:d,browserLanguage:d,appearanceLanguage:i,contactId:c,accountId:h.siteId},d=Object.values(h.formVariants).find((t=>t.id===e)),(c=Object.values(h.forms).find((e=>e.id===s)))&&(i.iid=c.__interactionId),d&&d.hasOwnProperty("useCase")&&(i.contactId=a(d)),d&&d.hasOwnProperty("appearanceRevision")&&(i.appearanceRevision=d.appearanceRevision),d&&d.hasOwnProperty("revision")&&(i.revision=d.revision),d&&null!==(o=d.asyncRules)&&void 0!==o&&null!==(r=o.HIDE_FOR_SUBSCRIBERS)&&void 0!==r&&r.enabled)&&(i.checkThisWidgetOnly=!(null===(u=d.asyncRules)||void 0===u||null===(m=u.HIDE_FOR_SUBSCRIBERS)||void 0===m||!m.checkThisWidgetOnly));return i.triggeredBy=t||"Rules",n&&(i.random=Math.floor(1e6*Math.random())+1),h.formConfig.CUSTOM_DOMAIN&&(i.customDomain=h.formConfig.CUSTOM_DOMAIN),i}static createPageParams(){return{type:"view",accountId:Ce.getConfig().accountId||Ce.getConfig().orgId}}}t(qe,"createVariantsUUID",(function(e){return e=e.map((e=>qe.createFormParams(e.id))),btoa(unescape(encodeURIComponent(JSON.stringify(e))))})),t(qe,"createVariantUUID",s);let Ze=(e,t)=>Promise.all([e,t]).then((e=>{let[t,i]=e;const{status:n,statusText:o,headers:r}=i;return e={status:n,body:t,statusText:o,headers:r},i.ok?Promise.resolve(e):Promise.reject(e)}));class Je{static execute(e,t){let i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;var n=3<arguments.length?arguments[3]:void 0;return n={method:t,headers:n?{...n}:null,credentials:"same-origin",keepalive:!0,body:null},i&&(n.body="string"==typeof i?i:JSON.stringify(i)),fetch(e,n).then((e=>204===e.status?{...e,body:null}:"application/json"===(e.headers.get("Content-Type")||"").split(";")[0]?Ze(e.json(),e):Ze(e.text(),e))).catch((e=>Promise.reject(e)))}}class $e{constructor(e){this.uri=e}get(){return"".concat(this.getOrigin()).concat(this.uri)}_getBaseUrl(){let e=Ce.getConfig();return e&&e.formConfig&&e.formConfig.url||e.apiConfig&&e.apiConfig.hostUrl}getOrigin(){return new URL("".concat(this._getBaseUrl())).origin}}class et{static generate(){let e,t="";for(let i=0;32>i;i++)8!==i&&12!==i&&16!==i&&20!==i||(t+="-"),e=Math.floor(16*Math.random()).toString(16).toUpperCase(),t+=e;return t}}class tt{activate(){this._get(tt.userCookieName)||this._set(tt.userCookieName,Ce.getCustomerId()||this._generateUserCookieValue())}disable(){this.disabled=!0;var e=this._get(tt.userCookieName);e&&!Ce.getCustomerId()?Ce.setCustomerId(e):Ce.getCustomerId()||(e=this._generateUserCookieValue(),Ce.setCustomerId(e)),this.removeUserIdentifier()}getUserIdentifier(){if(this.disabled)return Ce.getCustomerId();if(!this._get(tt.userCookieName)){let e=this._generateUserCookieValue();return this._set(tt.userCookieName,e),e}return this._get(tt.userCookieName)}regenerateUserIdentifier(){let e=this._generateUserCookieValue();this._set(tt.userCookieName,e)}retrieveUserIdentifier(){return this._get(tt.userCookieName)}removeUserIdentifier(){this._set(tt.userCookieName,null,{expires:new Date(0)})}_get(e){try{let t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}catch(e){}}_set(e,t){let i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};i={path:"/",expires:new Date((new Date).getFullYear()+5,0),...i},i.expires instanceof Date&&(i.expires=i.expires.toUTCString());let n=encodeURIComponent(e)+"="+encodeURIComponent(t);for(let e in i){n+="; "+e;let t=i[e];!0!==t&&(n+="="+t)}try{var o;let i=null!==(o=location.host)&&void 0!==o?o:"localhost";if(1===i.split(".").length)document.cookie=n+"; path=/";else{let o=i.split(".");o.shift();let r="."+o.join(".");document.cookie=n+"; path=/; domain="+r,null!=this._get(e)&&this._get(e)===t||(r="."+i,document.cookie=n+"; path=/; domain="+r)}t&&Ce.setCustomerId(t)}catch(e){}}_generateUserCookieValue(){return et.generate()}}t(tt,"userCookieName","sc");var it=new tt;class nt extends(Ie.getClass()){activate(){var e=it.retrieveUserIdentifier();this.get(nt.userIdentifierName)&&!e||(e=e||Ce.getCustomerId()||this._generateUserIdentifier(),this.set(nt.userIdentifierName,e),Ce.setCustomerId(e),it.removeUserIdentifier())}disable(){this.disabled=!0;let e=this.get(nt.userIdentifierName);e&&!Ce.getCustomerId()?Ce.setCustomerId(e):Ce.getCustomerId()||Ce.setCustomerId(this._generateUserIdentifier()),this._remove(nt.userIdentifierName),it.removeUserIdentifier()}getUserIdentifier(){if(this.disabled)return Ce.getCustomerId();var e=this.get(nt.userIdentifierName);return e||(e=this._generateUserIdentifier(),this.set(nt.userIdentifierName,e),Ce.setCustomerId(e),e)}_remove(e){this._process((()=>localStorage.removeItem(e)))}_generateUserIdentifier(){return et.generate()}}t(nt,"userIdentifierName","sc");var ot=new nt(_e);class rt{getAppearance(e,t){return Je.execute(new $e("/forms/v3/page/".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r(qe.createFormParams(e,void 0,void 0,t),["iid","contactId"]))))))).get(),"GET",null,{"Content-Type":"text/plain","cl-customer-id":ot.getUserIdentifier()}).then((e=>e.body)).catch((e=>(Ee.error(e,"error on FormVariantDataSource#getAppearance"),{html:""})))}getDebugFormVariant(e){return Je.execute(new $e("/forms/v1/config/".concat(s("f".concat(e,"v").concat(e)))).get(),"GET",null,{"Content-Type":"text/plain","cl-customer-id":ot.getUserIdentifier()}).then((e=>e.body)).catch((e=>(Ee.error(e,"error on FormVariantDataSource#getDebugFormVariant"),null)))}}class at{async loadIfNeeded(e){let t=Ce.getConfig();if((e=e.filter((e=>!t.forms[e]))).length){var i=new rt;return(e=await Promise.all(e.map((e=>i.getDebugFormVariant(e))))).filter((e=>!!e)).forEach((e=>{let{form:i,formVariant:n}=e;t.forms[i.id]=i,t.formVariants[n.id]=n})),e}}}var st=new class extends Ke{constructor(){super(),t(this,"_queryParamNamesNeedUpdate",!0),t(this,"_queryParamNames",{})}getQueryParamNames(){return this._queryParamNames}publishedFormIdToDebug(){this._updateQueryParamNamesIfNeeded();var e=new URL(window.location.href.toLowerCase());return e=new URLSearchParams(e.searchParams),parseInt(e.get(this._queryParamNames.DEBUG_PUBLISHED_FORM))||0}isDebugVariantShouldBeShown(e,t){return this._updateQueryParamNamesIfNeeded(),!!this._getConfigsToDebug(e).find((e=>e.id===t))}isDebugShouldIgnoreRules(){this._updateQueryParamNamesIfNeeded();var e=new URL(window.location.href.toLowerCase());return function(e,t){if(null==e){if(t)throw Error("Parameter 'str' is null or undefined.");return!1}if("boolean"==typeof e)return!0===e;if("string"==typeof e){if(""==e)return!1;if("true"==(e=e.replace(/^\s+|\s+$/g,"")).toLowerCase()||"yes"==e.toLowerCase())return!0;e=(e=e.replace(/,/g,".")).replace(/^\s*\-\s*/g,"-")}return!isNaN(e)&&0!=parseFloat(e)}((e=new URLSearchParams(e.searchParams)).get(this._queryParamNames.DEBUG_IGNORE_RULES))}_updateQueryParamNamesIfNeeded(){if(this._queryParamNamesNeedUpdate){var e=Ce.getPrefix().debugPrefix;e&&(this._queryParamNamesNeedUpdate=!1,this._queryParamNames={DEBUG_FORM:"".concat(e,"DebugForm").toLowerCase(),DEBUG_PUBLISHED_FORM:"".concat(e,"PublishedForm").toLowerCase(),DEBUG_FORM_VARIANT:"".concat(e,"DebugFormVariant").toLowerCase(),DEBUG_IGNORE_RULES:"".concat(e,"IgnoreRules").toLowerCase()}),e=new at;var t=new URL(window.location.href.toLowerCase()),i=new URLSearchParams(t.searchParams);t=this._getDebugIds(i,this._queryParamNames.DEBUG_FORM),i=this._getDebugIds(i,this._queryParamNames.DEBUG_PUBLISHED_FORM),(t=[...new Set(t.concat(i)).values()].filter((e=>!Ce.getConfig().forms[e]))).length&&e.loadIfNeeded(t)}}_getConfigsToDebug(e){if(null===window.location.href||!this.isDebugQueryStringPresentInUrl(this._queryParamNames))return[];var t=new URL(window.location.href.toLowerCase());t=new URLSearchParams(t.searchParams);let i=this._getDebugIds(t,this._queryParamNames.DEBUG_FORM);return e=e.filter((e=>i.includes(e.formId))),this._getFormConfigsToDebug(e,t)}_getFormConfigsToDebug(e,t){if(t.has(this._queryParamNames.DEBUG_FORM_VARIANT)){let i=t.get(this._queryParamNames.DEBUG_FORM_VARIANT).split(",");e=e.filter((e=>i.includes(e.id)))}return e}};var lt=new class{formVariantHasEnabledAsyncRules(e){return!!(e&&e.asyncRules&&Object.keys(e.asyncRules).length)&&Object.keys(e.asyncRules).map((t=>e.asyncRules[t])).some((e=>e.enabled))}areFormsPresent(){var e=Ce.getConfig();let t=0<Object.values(e.forms||{}).length;return e=0<Object.values(e.formVariants||{}).length,t&&e}getForm(e){return Object.values(Ce.getConfig().forms||{}).find((t=>t.id===e))}getFormVariant(e){return Object.values(Ce.getConfig().formVariants||{}).find((t=>t.id===e))}getFormVariantByVariantId(e){return Object.values(Ce.getConfig().formVariants||{}).find((t=>t.id.endsWith("v".concat(e))))}getFormVariants(){return Object.values(Ce.getConfig().formVariants||{})}getStaticActiveFormVariants(e){let t=this._getActiveFormIDs(e);return Object.values(e.formVariants||{}).filter((e=>"BUILT_IN"===e.type)).filter((e=>t.includes(e.formId)))}getDebugFormVariants(){let e=Ce.getConfig(),t=Object.values(e.forms||{}).filter((e=>"DEBUG"===e.publishStatus)).map((e=>e.id));return Object.values(e.formVariants||{}).filter((e=>t.includes(e.formId)))}getFormVariantsToRender(e){return Object.values(e.formVariants||{}).filter((e=>this.filterByStatus(e)))}filterByStatus(e){return"DEBUG"!==this.getForm(e.formId).publishStatus||st.isDebugVariantShouldBeShown(this.getDebugFormVariants(),e.id)}_getActiveFormIDs(e){return Object.values(e.forms||{}).filter((e=>"FOR_ALL"===e.publishStatus)).map((e=>e.id))}};let dt={RECOMS:{ROOT_ELEMENT_ID_PREFIX:"es-recom-",ROOT_ELEMENT_CLASSNAME:"es-recom-container"},FORMS:{ROOT_ELEMENT_ID_PREFIX:"es-form-",ROOT_ELEMENT_CLASSNAME:"es-form-container"}};class ct{constructor(){t(this,"obs",null),t(this,"_attemptsCount",0),t(this,"_maxAttemptsCount",5),t(this,"_attemptsInterval",200)}observe(e){this.obs=new MutationObserver((t=>{try{this._mutationRecordsHasProductVariants(t)||e()}catch(e){Ee.error(e)}}));try{this.obs.observe(document.body,{subtree:!0,childList:!0,attributes:!0})}catch(e){let t=this,i=setInterval((()=>{if(this._attemptsCount++,t._attemptsCount>=t._maxAttemptsCount)throw clearInterval(i),e;try{this.obs.observe(document.body,{subtree:!0,childList:!0,attributes:!0}),clearInterval(i)}catch(e){}}),this._attemptsInterval)}}observing(){return null!==this.obs}disconnect(){this.obs&&(this.obs.disconnect(),this.obs=null)}_mutationRecordsHasProductVariants(e){return 0<e.filter((e=>{let t=Array.from(e.addedNodes);return e=Array.from(e.removedNodes),t.length||e.length?this._hasProductVariants(t)||this._hasProductVariants(e):null})).length}_hasProductVariants(e){return 0<e.filter((e=>e instanceof Element&&e.getAttribute("id")&&[dt.RECOMS].some((t=>e.getAttribute("id").startsWith(t.ROOT_ELEMENT_ID_PREFIX))))).length}}class ht{static isInstanceInDebugMode(){return Ce.getInstanceDebugMode()}static isFormStatusIsDebug(e){return"DEBUG"===lt.getForm(e).publishStatus}static isInDebugMode(e){return ht.isInstanceInDebugMode()||ht.isFormStatusIsDebug(e)}}let ut={BEFORE:"BEFORE",AFTER:"AFTER",INSIDE:"INSIDE"};class mt{static removeNode(e,t){var i=this.getParentPath(t);return t=t[t.length-1],(i=this.getNodeByPath(e,i))?((e=i.children.splice(t,1)[0]).path=null,mt.reIndex(i,i.path),e):((i=e.splice(t,1)[0]).path=null,e.forEach(((e,t)=>{e.path=[t],mt.reIndex(e,e.path)})),i)}static insertNode(e,t,i,n){var o=mt.getPathToInsert(t,n,i);return t=n===ut.INSIDE?t:this.getParentPath(o),t=this.getNodeByPath(i,t),o=o[o.length-1],t?(t.children.splice(o,0,e),mt.reIndex(t,t.path)):(i.splice(o,0,e),i.forEach(((e,t)=>{e.path=[t],mt.reIndex(e,e.path)}))),e}static moveNode(e,t,i,n){(i=mt.getNodeByPath(e,i))&&(t=mt.removeNode(e,t),i=mt.getNodeById(e,i.id).path,mt.insertNode(t,i,e,n))}static iterateDepthFirst(){return l(...arguments)}static reIndex(e,t){e.path=t,e.children&&e.children.forEach(((e,i)=>{mt.reIndex(e,t.concat(i))}))}static getRelativePath(e){return e.slice(1,e.length)}static getParentPath(e){return e.slice(0,-1)}static getNodeByPath(e,t){for(let i=0;i<t.length;i++){if(i===t.length-1)return e[t[i]]||null;if(!e[t[i]])return null;e=e[t[i]].children}}static getNodeById(e,t){let i=null;for(let n=0;n<e.length;n++){let o=e[n];if(i)break;if(o.id===t){i=o;break}o.children&&o.children.length&&(i=this.getNodeById(o.children,t))}return i}static getPathToInsert(e,t,i){let n,o=e[e.length-1];return t===ut.BEFORE?n=e:t===ut.AFTER?(n=e.slice(),n[e.length-1]=o+1):t===ut.INSIDE&&(n=e.concat([mt.getNodeByPath(i,e).children.length])),n}static getNodeOnClickData(e){let t=[],i={};return mt.iterateDepthFirst(e,(e=>{var n,o,r;let a=null===(o=null===(n=e.props)||void 0===n?void 0:n.handlers)||void 0===o?void 0:o.find((e=>"CLICK"===e.type)).actions;null!=a&&a.length&&(t=[...t,...a]),Object.keys((null===(r=e.props)||void 0===r?void 0:r.content)||{}).filter((e=>["detractor","passive","promoter"].includes(e))).map((t=>{var i;return((null===(i=e.props)||void 0===i?void 0:i.content)||{})[t]||null})).filter((e=>e)).forEach((e=>i[e]=e))})),{actions:t,npsViewIds:Object.keys(i)}}}class pt{constructor(){this.listeners=pt.createDefaultListenersState()}emit(e,t){let i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=this.listeners[e];n&&Object.values(n).forEach((n=>n(t,e,i))),Object.values(this.listeners["*"]).forEach((n=>n(t,e,i)))}on(e,t){let i=et.generate(),n=this.listeners[e];return n?n[i]=t:this.listeners[e]={[i]:t},{off:()=>{var t,n;null!==(n=null===(t=this.listeners)||void 0===t?void 0:t[e])&&void 0!==n&&n[i]&&delete this.listeners[e][i]}}}destroy(){this.listeners=pt.createDefaultListenersState()}}pt.createDefaultListenersState=()=>({"*":{}});class gt extends pt{constructor(){super()}subscribe(){}getValue(e){return e?{processor:(e,t)=>gt.processModel(t)}:{}}static processModel(e,t){var i,n,o;if(!e.arguments)return"";let r,a=e.arguments.find((e=>"dataLayerEventName"===e.name)),s=e.arguments.find((e=>"dataLayerPropPath"===e.name));if(!(a&&a.value&&s&&s.value&&window.dataLayer))return"";for(let e=window.dataLayer.length-1;0<=e;e--){if((null===(i=window.dataLayer[e])||void 0===i?void 0:i.event)===a.value){r=window.dataLayer[e];break}if("event"===(null===(n=window.dataLayer[e])||void 0===n?void 0:n[0])&&(null===(o=window.dataLayer[e])||void 0===o?void 0:o[1])===a.value){r=window.dataLayer[e][2];break}}return r?(i=function(e,t){return e.reduce(((e,i)=>e.concat(t(i))),[])}(s.value.split(".").map((e=>e.trim())).map((e=>e.split(/[\[\]]/))),(e=>e)).filter((e=>!!e)),gt.getValueByPropPath(r,i,e,t)):""}static getValueByPropPath(e,t,i,n){try{let i=t.reduce(((e,t)=>{if(d(e)||Array.isArray(e))return e[t];throw Error('Tried to access non object data by propName "'.concat(t,'". Data: ').concat(e))}),e);return Array.isArray(i)&&!n?i.join(", "):i}catch(e){return""}}}gt.sourceId="DATA_LAYER";var Et=new class{constructor(e){this.hostURL=e}track(e,t){let i="".concat(this.hostURL,"/user-activity/public/v1/activity");return e={activityType:e,page:JSON.stringify(t)},navigator.sendBeacon(i,JSON.stringify(e)),Promise.resolve()}}(Ce.getConfig().apiConfig.hostUrl);class vt{constructor(e,i){t(this,"injectedConnectorIds",[]),t(this,"injectedPreviewMap",{}),t(this,"cacheDocuments",{}),t(this,"appearanceLoading",!1),t(this,"userActionsDetector",null),t(this,"componentResolver",null),this.dataSource=e,this.browserLanguageService=i}activate(e,t){this.userActionsDetector=e,this.componentResolver=t}destroy(){}destroyForm(e){this.removeInjectedDocumentConnector(e.id),this.removeInjectedConnectorId(e.id)}async getAppearanceFromCacheOrLoad(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};t.ignoreLoading||(this.appearanceLoading=!0);let i=e.id;var n=ht.isInDebugMode(e.formId);return n=this.cacheDocuments[i]||await this.dataSource.getAppearance(i,n),this.cacheDocuments[i]=n,t.ignoreLoading||(this.appearanceLoading=!1),n}prepareForm(e,t){return this.getAppearanceFromCacheOrLoad(e,t).then((async e=>{if(!e||!e.document)return{appearance:e,manifests:[]};let{manifests:t}=await this.componentResolver.loadComponentsIfNecessary(null==e?void 0:e.document,Ce.getConfig().apiConfig.staticResourcesUrl);return{appearance:e,manifests:t}}))}isAppearanceLoading(){return!!this.appearanceLoading}addInjectedConnectorId(e){this.injectedConnectorIds.push(e)}addInjectedDocumentConnector(e,t){this.injectedPreviewMap[e]=t}getInjectedDocumentConnectors(){return Object.values(this.injectedPreviewMap)}removeInjectedDocumentConnector(e){let t=this.injectedPreviewMap[e];t&&(t.disconnect(),delete this.injectedPreviewMap[e])}removeInjectedConnectorId(e){this.injectedConnectorIds=this.injectedConnectorIds.filter((t=>t!==e))}getInjectedConnectorIds(){return this.injectedConnectorIds}isVariantAlreadyInjected(e){return!!this.getInjectedConnectorIds().find((t=>t===e))}addWidgetClickHandler(e,t,i){i.useCase===Qe.INFORMER&&e.on("WIDGET_CONTENT_CLICKED",(()=>{t.send("FormClick_[Name]")}))}isDocumentModelValid(e,t){return Object.keys(e).length?{valid:!0}:{valid:!1,errorMessage:"No appearance or documentModel found"}}}class _t{constructor(e,t,i){this.formVariantId=e,this.formType=t,this.form=i,this.eventsStatusMap={}}gaLoaded(){return window.ga&&ga.create}getPayload(e){var t;return{hitType:"event",eventCategory:this.formType,eventAction:e,eventLabel:(null===(t=this.form)||void 0===t?void 0:t.name)||this.formVariantId}}getEventSendStatus(e){return this.eventsStatusMap[e]&&this.eventsStatusMap[e].sent}setEventSendStatus(e){this.eventsStatusMap[e]={sent:!(1<arguments.length&&void 0!==arguments[1])||arguments[1]}}send(e){this.gaLoaded()&&!this.getEventSendStatus(e)&&(ga("send",this.getPayload(e)),this.setEventSendStatus(e))}destroy(){}}class ft{constructor(e,t,i){this.formVariantId=e,this.formType=t,this.form=i,this.eventsStatusMap={},this.tagIds=[]}gaLoaded(){return window.dataLayer&&window.dataLayer.length}updateTagIds(){this.tagIds=(window.dataLayer||[]).filter((e=>e&&e.length&&1<e.length)).filter((e=>e[0]&&"config"===e[0])).filter((e=>e[1]&&String(e[1]).startsWith("G-"))).map((e=>e[1]))}getPayload(e){var t;return{eventCategory:this.formType,eventAction:e,eventLabel:(null===(t=this.form)||void 0===t?void 0:t.name)||this.formVariantId}}getEventSendStatus(e){return this.eventsStatusMap[e]&&this.eventsStatusMap[e].sent}setEventSendStatus(e){this.eventsStatusMap[e]={sent:!(1<arguments.length&&void 0!==arguments[1])||arguments[1]}}isGtag(){return this.tagIds.length&&window.gtag&&"function"==typeof gtag}send(e){if(this.updateTagIds(),this.gaLoaded()&&!this.getEventSendStatus(e)){let t=this.getPayload(e);if(this.isGtag())this.tagIds.forEach((e=>{t.send_to=e;try{window.gtag("event",_e.getProductName(),t)}catch(e){Ee.error("Gtag send tagIds",e)}}));else try{t.event=_e.getProductName(),window.dataLayer.push(t)}catch(e){Ee.error("Gtag pushing to GTMs dataLayer",e)}this.setEventSendStatus(e)}}destroy(){}}class yt{static create(e,t,i,n){if("GOOGLE_ANALYTICS"===e.name)return[new _t(t,i,n),new ft(t,i,n)];throw Error("Unknown TrackerName: "+e.name)}}class Tt{constructor(e){let{formId:t,variantId:i,addReferrer:n,triggeredBy:o}=e;this._payload={formId:t,variantId:i,type:"click",triggeredBy:o},n&&(this._payload.referrer=window.location.href)}get(){return btoa(JSON.stringify(this._payload))}}class It{constructor(e){this.params=e}handle(){this.onFormClicked()}onFormClicked(){let e=new Tt({...this.params,addReferrer:"DEBUG"!==lt.getFormVariant("f".concat(this.params.formId,"v").concat(this.params.variantId)).publishStatus}).get();Je.execute(new $e("/forms/v1/event").get(),"POST",e,{"Content-Type":"text/plain","cl-customer-id":ot.getUserIdentifier()}).catch((e=>Ee.error(e,"onFormsReceived error on FormClickedEventHandler: ")))}}class Ot{constructor(e){this.trackers=[],this.formVariant=lt.getFormVariant(e),this.form=lt.getForm(this.formVariant.formId),this.isInDebugMode=ht.isInDebugMode(this.formVariant.formId)}activate(){this.formVariant.tracking&&this.formVariant.tracking.trackers&&this.formVariant.tracking.trackers.forEach((e=>{e=yt.create(e,this.formVariant.id,this.formVariant.type,this.form),this.trackers.push(...e)}))}transformEventName(e){return e.replace("[Name]",this.formVariant.id)}send(e){if(!this.isInDebugMode){var t=this.transformEventName(e);this.trackers.forEach((e=>{e.send(t)}))}}trackClick(){new It(qe.createFormParams(this.formVariant.id)).handle()}destroy(){this.trackers.forEach((e=>e.destroy()))}}let At={BUILT_IN:"BUILT_IN",DETACHED:"DETACHED",FLOATING_BOX:"FLOATING_BOX",FLOATING_BAR:"FLOATING_BAR",LAUNCHER:"LAUNCHER",CONTENT_LOCKER:"CONTENT_LOCKER"};class Ct{static get(e,t){return t.style.getPropertyValue("--".concat(e))}static apply(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0;c(e,(i=>{let n="--".concat(i);i=e[i],t.style.getPropertyValue(n)||t.style.setProperty(n,i)}))}static override(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0;c(e,(i=>{let n="--".concat(i);t.style.setProperty(n,e[i])}))}}class St{constructor(e){this.state=e||{}}getState(){return this.state}setState(e){this.state=Object.assign(Object.assign({},this.state),e)}destroy(){}}var bt=function(e){switch(typeof e){case"string":e=e&&e.length;break;case"boolean":break;case"number":e=!isNaN(e);break;default:e=!!e}return{isValid:e,errorKey:"REQUIRED"}};class Nt{constructor(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length?arguments[2]:void 0,n=3<arguments.length?arguments[3]:void 0;this.control=e,this.customValidatorsMap=i,this.asyncCustomValidators=n,this.required=t.required,this.validator=t.validator}async isValid(e){return!(await this.getErrorKeys(e)).length}getErrorKeys(e){if(!this.required&&!e)return Promise.resolve([]);let t=this.getSyncErrorKeys(e),i=[];return this.validator&&this.asyncCustomValidators&&this.validator in this.asyncCustomValidators&&i.push(this.asyncCustomValidators[this.validator]),i.length?Promise.all(i.map((i=>i(e,t)))).then((e=>(e.forEach((e=>{null!==e.value&&void 0!==e.value&&this.control.setValue(e.value,{silent:!0,skipValidation:!0,skipElementUpdate:!0})})),e=e.filter((e=>!e.isValid)).map((e=>e.errorKey)),[...t,...e]))):Promise.resolve(t)}getSyncErrorKeys(e){if(!this.required&&!e)return[];var t=[];return this.required&&(this.customValidatorsMap&&this.customValidatorsMap.REQUIRED?t.push(this.customValidatorsMap.REQUIRED):t.push(bt)),this.validator&&this.customValidatorsMap&&"REQUIRED"!==this.validator&&this.validator in this.customValidatorsMap&&t.push(this.customValidatorsMap[this.validator]),t.length?((t=t.map((t=>t(e)))).forEach((e=>{null!==e.value&&void 0!==e.value&&this.control.setValue(e.value,{silent:!0,skipValidation:!0,skipElementUpdate:!0})})),t.filter((e=>!e.isValid)).map((e=>e.errorKey))):[]}}let Rt={valueChanged:"valueChanged",validationStatusChanged:"validationStatusChanged",touchedStatusChanged:"touchedStatusChanged"};class Lt extends pt{constructor(e,t,i,n,o){if(super(),this.componentId=e.componentId,this.name=e.name,this.value=(this.defaultValue=e.defaultValue)?e.defaultValue:void 0,this.validator=new Nt(this,e.validation,i,n),this.errorKeys=this.validator.getSyncErrorKeys(this.getValue()),this.valid=!this.errorKeys.length,this.pending=this.disabled=!1,this.debounceValue=e.hasOwnProperty("debounceValue")?e.debounceValue:300,this.tracking=o,this.valueChanged=this.touched=!1,t=(this.elementRef=t)?this.elementRef.getAttribute("type"):null,this.elementRef&&e.defaultValue&&("checkbox"===t?this.elementRef.checked=e.defaultValue:this.elementRef.value=e.defaultValue),this.debouncedValidate=this.debounceValue?h((e=>this.validate(e)),this.debounceValue):this.validate.bind(this),this.elementRef){let i="checkbox"===t;this.elementRef.addEventListener(e.triggerEvent?e.triggerEvent:"input",(e=>{this.inputElementValueChanged(i?e.target.checked:e.target.value)})),this.elementRef.addEventListener("blur",(()=>{this.markAsTouched()}))}}inputElementValueChanged(e){this.tracking.send("FormStartFilling_[Name]"),this.setValue(e)}setDisabled(){this.disabled=!0,this.elementRef&&this.elementRef.setAttribute("disabled","disabled")}setEnabled(){this.disabled=!1,this.elementRef&&this.elementRef.removeAttribute("disabled")}setPending(e){this.pending=e}getName(){return this.name}getValue(){return this.value}getComponentId(){return this.componentId}setValue(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{silent:!1,skipValidation:!1,skipElementUpdate:!1};t.skipElementUpdate||(this.valueChanged=this.value!==e),this.value=e,this.elementRef&&!t.skipElementUpdate&&(this.elementRef.value=e),t.skipValidation?!t.silent&&this.valueChanged&&this.emit(Rt.valueChanged,e):(this.pending=!0,this.emit(Rt.validationStatusChanged,"pending"),this.debouncedValidate(t)),t.silent||t.skipValidation||this.elementRef||this.markAsTouched()}isValid(){return this.valid}isPending(){return this.pending}async validate(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{silent:!1};this.pending=!0;let t=await this.validator.getErrorKeys(this.getValue());return this.valid=!t.length,this.errorKeys=t,this.pending=!1,e.silent||(this.emit(Rt.validationStatusChanged,this.valid?"valid":"invalid"),this.valueChanged&&(this.emit(Rt.valueChanged,this.getValue()),this.valueChanged=!1)),this.valid}markAsTouched(){this.touched=!0,this.emit(Rt.touchedStatusChanged)}isTouched(){return this.touched}getErrorKeys(){return this.errorKeys}destroy(){super.destroy()}}let Mt=Object.assign(Object.assign({},Rt),{validationChecked:"validationChecked",controlRegistered:"controlRegistered"});class Dt extends pt{constructor(e){super(),this.controls={},this.tracking=e,this.preventSubmit=this.submitQueuedAfterPending=!1}registerControl(e,t,i,n){let o=new Lt(e,t,i,n,this.tracking);return this.controls[e.name]=o,o.on("*",((e,t)=>{if(t===Rt.valueChanged)this.emit(Mt.valueChanged,o);else this.emit(t,e),t===Rt.validationStatusChanged&&this.emit(Mt.validationChecked,this.isValid())})),this.emit(Mt.controlRegistered,o),this.controls[e.name]}getControl(e){return this.controls[e]}hasControl(e){return!!this.getControl(e)}setControlValue(e,t){this.controls[e].setValue(t)}setPreventSubmit(e){this.preventSubmit=e}destroy(){super.destroy()}isValid(){return Object.values(this.controls).every((e=>e.isValid()))}isPending(){return!!Object.values(this.controls).filter((e=>e.isPending())).length}getControlsMap(){return Object.values(this.controls).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.getName()]:t.getValue()})),{})}getControlsAsArray(){return Object.values(this.controls)}setDisabledAll(){this.getControlsAsArray().forEach((e=>e.setDisabled()))}setEnabledAll(){this.getControlsAsArray().forEach((e=>e.setEnabled()))}markAsTouched(){Object.values(this.controls).forEach((e=>e.markAsTouched()))}isTouched(){return Object.values(this.controls).every((e=>e.touched()))}}let wt={VIEW:"VIEW",MODULE:"MODULE",CONTAINER:"CONTAINER",SLIDER:"SLIDER",TEXT:"TEXT",INPUT:"INPUT",BUTTON:"BUTTON",IMAGE:"IMAGE",CONSENT:"CONSENT",FLOATING_IMAGE:"FLOATING_IMAGE",COLUMN:"COLUMN"};class Pt{static extract(e){let t=e.views.map((e=>{const t=e.children.map((e=>e.type===wt.MODULE?Object.assign(Object.assign({},e),Pt.moduleToContainerParams):e));return Object.assign(Object.assign({},e),{children:t})}));return Object.assign(Object.assign({},e),{views:t})}static sort(e,t){return e.index>t.index?1:-1}static reIndex(e,t){return Object.assign(Object.assign({},e),{index:t+e.index})}}Pt.moduleToContainerParams={name:"SysContainerComponent",version:"1.0.0"};class xt extends pt{constructor(e){super(),this.json=e,this.flatJson=Pt.extract(this.json)}setComponentRef(e,t){mt.getNodeById(this.getViews(),e).componentRef=t}getModel(){return this.flatJson}getView(e){return this.flatJson.views[e]}getViews(){return this.flatJson.views}getShared(){return this.flatJson.shared}iterateViewModelAndExecute(e,t){e=this.getView(e),mt.iterateDepthFirst(e,t)}destroy(){}destroyView(e){this.iterateViewModelAndExecute(e,(e=>{e.componentRef&&(e.componentRef.remove(),e.componentRef=null)}))}}class Vt{constructor(e){this.config=Object.assign(Object.assign({},{subscribeContactUrl:""}),e||{})}getConfig(e){return e?this.config[e]:this.config}}class kt extends pt{constructor(e,t){super(),this.documentModel=e,this.containerElement=t,this.mobileBreakpointWidth=this.documentModel.getShared().mobileBreakpointWidth,this._isMobile=this._calculateMobileFlag(),this.documentModel.on("ENVIRONMENT_UPDATE",(e=>{this._isMobile=e.isMobileEnv,this.emit(kt.changeEventName,this._isMobile)}))}isMobile(){return this._isMobile}destroy(){super.destroy()}_calculateMobileFlag(){return this._getElementsWidthPx(this.containerElement)<=this.mobileBreakpointWidth}_getElementsWidthPx(e){return parseInt(getComputedStyle(e).width)}}kt.changeEventName="CHANGE";let Ft=()=>{const e=window.screen.orientation||window.screen.mozOrientation||window.screen.msOrientation;return e?e.type.includes("portrait")?"PORTRAIT":"LANDSCAPE":void 0===window.orientation||0===window.orientation||180===window.orientation?"PORTRAIT":90===window.orientation||-90===window.orientation?"LANDSCAPE":void 0},Ut=()=>/iPad/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints;class Bt extends pt{constructor(e,t){var i;super(),this.documentModel=e,this._orientation=null!==(i=t.config.defaultOrientation)&&void 0!==i?i:Ft(),this.documentModel.on("ENVIRONMENT_UPDATE",(e=>{e.orientation&&(this._orientation=e.orientation,this.emit(Bt.changeEventName,this._orientation))})),this.handleOrientationChangeBound=this.handleOrientationChange.bind(this),this.addOrientationChangeListener()}isPortrait(){return"PORTRAIT"===this._orientation}handleOrientationChange(e){var t,i;this._orientation=null!==(i=null===(t=null==e?void 0:e.detail)||void 0===t?void 0:t.orientation)&&void 0!==i?i:Ft(),this.emit(Bt.changeEventName,this._orientation)}addOrientationChangeListener(){/iPhone/i.test(navigator.userAgent)||Ut()||!window.screen.orientation?"orientation"in window&&window.addEventListener("orientationchange",this.handleOrientationChangeBound):window.screen.orientation.addEventListener("change",this.handleOrientationChangeBound)}removeOrientationChangeListener(){/iPhone/i.test(navigator.userAgent)||Ut()||!window.screen.orientation?"orientation"in window&&window.removeEventListener("orientationchange",this.handleOrientationChangeBound):window.screen.orientation.removeEventListener("change",this.handleOrientationChangeBound)}destroy(){super.destroy(),this.removeOrientationChangeListener()}}Bt.changeEventName="CHANGE";class Ht extends pt{constructor(e){super(),this.handleMobileBreakpoint(e.getShared().mobileBreakpointWidth),e.on("ENVIRONMENT_UPDATE",(e=>{({isMobileEnv:e}=e),this._isMobile=e,this.emit(Ht.changeEventName,this._isMobile)}))}handleMobileBreakpoint(e){this.mobileBreakpointWidth=e,e=Number.isInteger(this.mobileBreakpointWidth)?"".concat(this.mobileBreakpointWidth,"px"):this.mobileBreakpointWidth,this.mediaQueryList=window.matchMedia("(max-width: ".concat(e,")")),this.mediaQueryList.addListener(this.listener.bind(this)),this._isMobile=this.mediaQueryList.matches,this.emit(Ht.changeEventName,this._isMobile)}isMobile(){return this._isMobile}listener(e){this._isMobile=e.matches,this.emit(Ht.changeEventName,this._isMobile)}destroy(){super.destroy(),this.mediaQueryList.removeListener(this.listener.bind(this))}}Ht.changeEventName="CHANGE";class Gt{constructor(e,t,i){this.documentModel=e,this.viewRenderer=t,this.entryModuleType=i}handleModelUpdate(e,t){switch(e){case"COMPONENT_PROPS_UPDATE":let{id:n,data:o}=t;if(!(t=mt.getNodeById(this.documentModel.getViews(),n)))break;if(!(t=t.path.reduce(((e,t,i)=>0===i?this.documentModel.getViews()[t]:e.children[t]),this.documentModel.getViews())))break;t.props=Object.assign({},o),this.documentModel.emit("".concat("COMPONENT_PROPS_UPDATE","_").concat(n),o);break;case"SHARED_UPDATE":e=this.documentModel.getShared(),Object.assign(e,t),this.documentModel.emit("SHARED_UPDATE_ALL");break;case"MOBILE_BREAKPOINT_UPDATE":this.documentModel.getShared().mobileBreakpointWidth=t.mobileBreakpointWidth;break;case"ENVIRONMENT_UPDATE":this.documentModel.emit("ENVIRONMENT_UPDATE",t);break;case"TEXT_CLASS_ADDED":this.documentModel.getShared().textClasses[t.id]=t;break;case"TEXT_CLASS_UPDATED":this.documentModel.getShared().textClasses[t.id]=t,this.documentModel.emit("SHARED_UPDATE_ALL");break;case"TEXT_CLASS_REMOVED":delete this.documentModel.getShared().textClasses[t];break;case"HEADER_FONT_FAMILY_UPDATE":this.documentModel.getShared().headerFontFamily=t,this.documentModel.emit("SHARED_UPDATE_ALL");break;case"TEXT_FONT_FAMILY_UPDATE":this.documentModel.getShared().textFontFamily=t,this.documentModel.emit("SHARED_UPDATE_ALL");break;case"COLOR_SCHEMA_UPDATE":this.documentModel.getShared().cssVars=t,this.documentModel.emit("COLOR_SCHEMA_UPDATE",t);break;case"LINK_PARAMS_UPDATE":this.documentModel.getShared().linkParams=t,this.documentModel.emit("SHARED_UPDATE_ALL");break;case"COMPONENT_REMOVE":this.removeComponent(t.path);break;case"COMPONENT_INSERT":let{insertPosition:r,targetPath:a,model:s}=t;t=mt.getNodeByPath(this.documentModel.getViews(),a),mt.insertNode(s,a,this.documentModel.getViews(),r),this.viewRenderer.renderComponent(t,s,this.entryModuleType,r);break;case"COMPONENT_MOVE":let{fromPath:l,insertPosition:d,targetPath:c}=t;t=c[0];var i=this.documentModel.getViews()[t];(e=mt.getNodeByPath(this.documentModel.getViews(),c))&&(t=this.removeComponent(l),i=mt.getNodeById([i],e.id).path,mt.insertNode(t,i,this.documentModel.getViews(),d),this.viewRenderer.renderComponent(e,t,this.entryModuleType,d))}}removeComponent(e){let t=mt.getNodeByPath(this.documentModel.getViews(),e);if(t)return t.componentRef.remove(),mt.removeNode(this.documentModel.getViews(),e)}}class Wt{static applyHostStyles(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;let n=3<arguments.length?arguments[3]:void 0;var o,r,a;(i=null===(r=null===(o=null==i?void 0:i.props)||void 0===o?void 0:o.handlers)||void 0===r?void 0:r.find((e=>"CLICK"===e.type)))&&null!==(a=i.actions)&&void 0!==a&&a.length&&(t.style.cursor="pointer"),e!==wt.VIEW&&e!==wt.CONTAINER&&e!==wt.COLUMN||(t.style.display=n===At.CONTENT_LOCKER&&e===wt.VIEW?"flex":"inline-flex",t.style.position="relative"),t.style.boxSizing="border-box"}constructor(){this.styles="/* common styles */ *, *:before, *:after { box-sizing: border-box; font-family: inherit; }"}setStyles(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";this.styles="".concat(this.styles," ").concat(e)}getStyles(){return this.styles}}class jt{static camelCaseToDashCase(e){return e.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))}static camelCaseToUpperSnakeCase(e){return e.replace(/[A-Z]/g,(e=>"_"+e)).toUpperCase()}}class zt{static getDefaultParamValueByAnimationType(e,t){return this["CL_DEFAULT_LOOP_ANIMATION_".concat(e,"_").concat(jt.camelCaseToUpperSnakeCase(t))]}static getAllAnimationStyles(e){let t=Object.values(this._animations).map((e=>e.styles)).join("\n");return e&&(t=t.replace(new RegExp(".".concat(this.animationClassPrefix),"g"),"".concat(e," .").concat(this.animationClassPrefix))),t}static constructAnimationStylesByTypes(e){return Object.keys(this._animations).filter((t=>e.includes(t))).map((e=>this._animations[e].styles)).join("")}}var Kt=zt;zt.animationClassPrefix="cl-loop-animation-",zt.CL_DEFAULT_LOOP_ANIMATION_PULSE_BORDER_RADIUS="50px",zt.CL_DEFAULT_LOOP_ANIMATION_PULSE_COLOR="rgba(0,0,0,0.7)",zt.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT=3,zt._animations={PULSE:{styles:"\n        .".concat(Kt.animationClassPrefix,"PULSE {\n          animation: pulse-animation 2s;\n          animation-iteration-count: var(--cl-PULSE-animationIterationCount, ").concat(Kt.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n          border-radius: var(--cl-PULSE-borderRadius);\n        }\n\n        @keyframes pulse-animation {\n          0% {\n            box-shadow: 0 0 0 0 var(--cl-PULSE-color);\n          }\n\n          70% {\n            box-shadow: 0 0 0 20px rgba(0, 0, 0, 0);\n          }\n\n          100% {\n            box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);\n          }\n        }")},VIBRATE:{styles:"\n        .".concat(Kt.animationClassPrefix,"VIBRATE {\n          animation: vibrate-animation 10.3s linear both;\n          animation-iteration-count: var(--cl-VIBRATE-animationIterationCount, ").concat(Kt.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n        }\n\n        @keyframes vibrate-animation {\n          0% {\n            transform: translate(0);\n          }\n          2% {\n            transform: translate(-2px, 2px);\n          }\n          4% {\n            transform: translate(-2px, -2px);\n          }\n          6% {\n            transform: translate(2px, 2px);\n          }\n          8% {\n            transform: translate(2px, -2px);\n          }\n          10% {\n            transform: translate(0);\n          }\n          12% {\n            transform: translate(-2px, 2px);\n          }\n          14% {\n            transform: translate(-2px, -2px);\n          }\n          16% {\n            transform: translate(2px, 2px);\n          }\n          18% {\n            transform: translate(2px, -2px);\n          }\n          20% {\n            transform: translate(0);\n          }\n          100% {\n            transform: translate(0);\n          }\n        }")},WOBBLE:{styles:"\n        .".concat(Kt.animationClassPrefix,"WOBBLE {\n          animation: wobble-animation 10.8s both;\n          animation-iteration-count: var(--cl-WOBBLE-animationIterationCount, ").concat(Kt.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n        }\n\n        @keyframes wobble-animation {\n          0%,\n          100% {\n            transform: translateX(0%);\n            transform-origin: 50% 50%;\n          }\n          1.5% {\n            transform: translateX(-30px) rotate(-6deg);\n          }\n          3% {\n            transform: translateX(15px) rotate(6deg);\n          }\n          4.5% {\n            transform: translateX(-15px) rotate(-3.6deg);\n          }\n          6% {\n            transform: translateX(9px) rotate(2.4deg);\n          }\n          7.5% {\n            transform: translateX(-6px) rotate(-1.2deg);\n          }\n          10% {\n            transform: translateX(0%);\n            transform-origin: 50% 50%;\n          }\n        }")},SHAKE:{styles:"\n        .".concat(Kt.animationClassPrefix,"SHAKE {\n          animation: shake-animation 10.8s cubic-bezier(0.455, 0.030, 0.515, 0.955) both;\n          animation-iteration-count: var(--cl-SHAKE-animationIterationCount, ").concat(Kt.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n        }\n\n        @keyframes shake-animation {\n          0%,\n          100% {\n            transform: translateX(0);\n          }\n          1%,\n          3%,\n          5%,\n          7% {\n            transform: translateX(-10px);\n          }\n          2%,\n          4%,\n          6% {\n            transform: translateX(10px);\n          }\n          8% {\n            transform: translateX(8px);\n          }\n          9% {\n            transform: translateX(-8px);\n          }\n          10% {\n            transform: translateX(0);\n          }\n        }")},JELLO:{styles:"\n        .".concat(Kt.animationClassPrefix,"JELLO {\n          animation: jello-animation 10.9s both;\n          animation-iteration-count: var(--cl-JELLO-animationIterationCount, ").concat(Kt.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n        }\n\n        @keyframes jello-animation {\n          0% {\n            transform: scale3d(1, 1, 1);\n          }\n          3% {\n            transform: scale3d(1.25, 0.75, 1);\n          }\n          4% {\n            transform: scale3d(0.75, 1.25, 1);\n          }\n          5% {\n            transform: scale3d(1.15, 0.85, 1);\n          }\n          6.5% {\n            transform: scale3d(0.95, 1.05, 1);\n          }\n          7.5% {\n            transform: scale3d(1.05, 0.95, 1);\n          }\n          10% {\n            transform: scale3d(1, 1, 1);\n          }\n          100% {\n            transform: scale3d(1, 1, 1);\n          }\n        }")},BOUNCE:{styles:"\n        .".concat(Kt.animationClassPrefix,"BOUNCE {\n          animation: bounce-animation 10.9s both;\n          animation-iteration-count: var(--cl-BOUNCE-animationIterationCount, ").concat(Kt.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n        }\n\n        @keyframes bounce-animation {\n          0% {\n            transform: translateY(-45px);\n            animation-timing-function: ease-in;\n            opacity: 1;\n          }\n          2.4% {\n            opacity: 1;\n          }\n          4% {\n            transform: translateY(-24px);\n            animation-timing-function: ease-in;\n          }\n          6.5% {\n            transform: translateY(-12px);\n            animation-timing-function: ease-in;\n          }\n          8.2% {\n            transform: translateY(-6px);\n            animation-timing-function: ease-in;\n          }\n          9.3% {\n            transform: translateY(-4px);\n            animation-timing-function: ease-in;\n          }\n          2.5%,\n          5.5%,\n          7.5%,\n          8.7% {\n            transform: translateY(0px);\n            animation-timing-function: ease-out;\n          }\n          10% {\n            transform: translateY(0px);\n            animation-timing-function: ease-out;\n            opacity: 1;\n          }\n          100% {\n            transform: translateY(0px);\n            animation-timing-function: ease-out;\n            opacity: 1;\n          }\n        }")},BLINK:{styles:"\n        .".concat(Kt.animationClassPrefix,"BLINK {\n          animation: blink-animation 10.6s both;\n          animation-iteration-count: var(--cl-BLINK-animationIterationCount, ").concat(Kt.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n        }\n\n        @keyframes blink-animation {\n          0%,\n          5%,\n          10%,\n          100% {\n            opacity: 1;\n          }\n          2.5%,\n          7.5% {\n            opacity: 0;\n          }\n        }")},FLICKER:{styles:"\n        .".concat(Kt.animationClassPrefix,"FLICKER {\n          animation: flicker-animation 12.5s linear both;\n          animation-iteration-count: var(--cl-FLICKER-animationIterationCount, ").concat(Kt.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n        }\n\n        @keyframes flicker-animation {\n          0%,\n          100% {\n            opacity: 1;\n          }\n          3.298% {\n            opacity: 1;\n          }\n          3.3% {\n            opacity: 0;\n          }\n          3.4% {\n            opacity: 0;\n          }\n          3.402% {\n            opacity: 1;\n          }\n          3.498% {\n            opacity: 1;\n          }\n          3.5% {\n            opacity: 0;\n          }\n          3.59% {\n            opacity: 0;\n          }\n          3.592% {\n            opacity: 1;\n          }\n          3.898% {\n            opacity: 1;\n          }\n          3.9% {\n            opacity: 0;\n          }\n          3.98% {\n            opacity: 0;\n          }\n          3.982% {\n            opacity: 1;\n          }\n          8.398% {\n            opacity: 1;\n          }\n          8.4% {\n            opacity: 0;\n          }\n          8.49% {\n            opacity: 0;\n          }\n          8.492% {\n            opacity: 1;\n          }\n          84.92% {\n            opacity: 1;\n          }\n        }")},PING:{styles:"\n        .".concat(Kt.animationClassPrefix,"PING {\n          animation: ping-animation 10.8s ease-in-out both;\n          animation-iteration-count: var(--cl-PING-animationIterationCount, ").concat(Kt.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n        }\n\n        @keyframes ping-animation {\n          0%,\n          16% {\n            transform: scale(1);\n            opacity: 1;\n          }\n          8% {\n            transform: scale(2.2);\n            opacity: 0;\n          }\n        }")}};class Xt{static extractAdaptiveStylesClasses(e){let t="";return e.props.adaptiveStyles?(e.props.adaptiveStyles.desktop.forEach((e=>t+=" ".concat(e.classes))),e.props.adaptiveStyles.mobile.forEach((e=>t+=" ".concat(e.classes))),t.split(" ")):[]}static extractLoopAnimationsFromAdaptiveStylesClasses(e){return this.extractAdaptiveStylesClasses(e).filter((e=>e.startsWith(zt.animationClassPrefix))).map((e=>e.replace(zt.animationClassPrefix,"")))}}var Yt={transparent:"#0000"},Qt=function(e,t,i,n){return null!=n&&""!==n||(n=1),e=parseFloat(e),t=parseFloat(t),i=parseFloat(i),n=parseFloat(n),255>=e&&0<=e&&255>=t&&0<=t&&255>=i&&0<=i&&1>=n&&0<=n?[Math.round(e),Math.round(t),Math.round(i),n]:null},qt=/(?:rgb)a?\(\s*([.\d%]+)\s*,\s*([.\d%]+)\s*,\s*([.\d%]+)\s*(?:,\s*([.\d]+)\s*)?\)/i,Zt=function(e,t){if(null==e)return null;e=(e+"").replace(/\s+/,"");var i=Yt[e];return i?Zt(i,t):(i=e.match(qt))&&(e=i.slice(1))&&(e=Qt.apply(null,e))?t?e:(1===e[3]&&e.splice(3,1),"rgb"+(4===e.length?"a":"")+"("+e+")"):null};class Jt{ratio(e,t,i){return e=this.getRgbTriplet(e,i),t=this.getRgbTriplet(t,i),this.wcagRgb(e,t)}isNotTransparent(e,t){t=t||{};let i=(e=Zt(e)).match(/\((.*)\)/)[1].split(",");if(4!=i.length||"0"!=i[3]||t.ignoreAlpha)return e;throw new TypeError("get-contrast cannot contrast transparent colors")}getRgbTriplet(e,t){if("string"!=typeof e)throw new TypeError("get-contrast expects colors as strings");return e=e.toLowerCase(),(e=this.isNotTransparent(e,t)).match(/\((.*)\)/)[1].split(",").slice(0,3)}wcagRgb(e,t){return this.luminance(this.relativeLuminance(e),this.relativeLuminance(t))}luminance(e,t){return(Math.max(e,t)+.05)/(Math.min(e,t)+.05)}relativeLuminance(e){let t=e[0]/255,i=e[1]/255;e=e[2]/255;let n=1/12.92;return.2126*(.03928>=t?t*n:Math.pow((t+.055)/1.055,2.4))+.7152*(.03928>=i?i*n:Math.pow((i+.055)/1.055,2.4))+.0722*(.03928>=e?e*n:Math.pow((e+.055)/1.055,2.4))}}var $t=Array.prototype.concat,ei=Array.prototype.slice,ti=function(e){for(var t=[],i=0,n=e.length;i<n;i++){var o=e[i],r=!(!(r=o)||"string"==typeof r)&&(r instanceof Array||Array.isArray(r)||0<=r.length&&(r.splice instanceof Function||Object.getOwnPropertyDescriptor(r,r.length-1)&&"String"!==r.constructor.name));r?t=$t.call(t,ei.call(o)):t.push(o)}return t};ti.wrap=function(e){return function(){return e(ti(arguments))}};var ii,ni={},oi=Object.hasOwnProperty,ri=Object.create(null);for(ii in ni)oi.call(ni,ii)&&(ri[ni[ii]]=ii);var ai={to:{},get:function(e){if("hsl"===e.substring(0,3).toLowerCase()){e=ai.get.hsl(e);var t="hsl"}else e=ai.get.rgb(e),t="rgb";return e?{model:t,value:e}:null}};ai.get.rgb=function(e){if(!e)return null;var t,i=/^#([a-f0-9]{3,4})$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,o=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(i=t[2],t=t[1],e=0;3>e;e++)n=2*e,o[e]=parseInt(t.slice(n,n+2),16);i&&(o[3]=parseInt(i,16)/255)}else if(t=e.match(i)){for(i=(t=t[1])[3],e=0;3>e;e++)o[e]=parseInt(t[e]+t[e],16);i&&(o[3]=parseInt(i+i,16)/255)}else if(t=e.match(n)){for(e=0;3>e;e++)o[e]=parseInt(t[e+1],0);t[4]&&(o[3]=t[5]?.01*parseFloat(t[4]):parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(t=e.match(/^(\w+)$/))?"transparent"===t[1]?[0,0,0,0]:oi.call(ni,t[1])?((o=ni[t[1]])[3]=1,o):null:null;for(e=0;3>e;e++)o[e]=Math.round(2.55*parseFloat(t[e+1]));t[4]&&(o[3]=t[5]?.01*parseFloat(t[4]):parseFloat(t[4]))}for(e=0;3>e;e++)o[e]=u(o[e],0,255);return o[3]=u(o[3],0,1),o},ai.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var i=parseFloat(t[4]);return[e=(parseFloat(t[1])%360+360)%360,u(parseFloat(t[2]),0,100),t=u(parseFloat(t[3]),0,100),i=u(isNaN(i)?1:i,0,1)]}return null},ai.to.rgb=function(){var e=ti(arguments);return 4>e.length||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},ai.to.hsl=function(){var e=ti(arguments);return 4>e.length||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};let si={};for(let e of Object.keys(si));let li={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"}};for(let e of Object.keys(li)){if(!("channels"in li[e]))throw Error("missing channels property: "+e);if(!("labels"in li[e]))throw Error("missing channel labels property: "+e);if(li[e].labels.length!==li[e].channels)throw Error("channel and label counts mismatch: "+e);let{channels:t,labels:i}=li[e];delete li[e].channels,delete li[e].labels,Object.defineProperty(li[e],"channels",{value:t}),Object.defineProperty(li[e],"labels",{value:i})}li.rgb.hsl=function(e){var t=e[0]/255;let i=e[1]/255,n=e[2]/255;e=Math.min(t,i,n);let o,r=Math.max(t,i,n),a=r-e;return r===e?o=0:t===r?o=(i-n)/a:i===r?o=2+(n-t)/a:n===r&&(o=4+(t-i)/a),o=Math.min(60*o,360),0>o&&(o+=360),t=(e+r)/2,[o,100*(r===e?0:.5>=t?a/(r+e):a/(2-r-e)),100*t]},li.hsl.rgb=function(e){let t=e[0]/360;var i=e[1]/100;if(e=e[2]/100,0===i){var n=255*e;return[n,n,n]}e=2*e-(i=.5>e?e*(1+i):e+i-e*i);let o=[0,0,0];for(let r=0;3>r;r++)0>(n=t+1/3*-(r-1))&&n++,1<n&&n--,n=1>6*n?e+6*(i-e)*n:1>2*n?i:2>3*n?e+(i-e)*(2/3-n)*6:e,o[r]=255*n;return o};let di={};Object.keys(li).forEach((e=>{di[e]={},Object.defineProperty(di[e],"channels",{value:li[e].channels}),Object.defineProperty(di[e],"labels",{value:li[e].labels});let t=function(e){let t={};var i=Object.keys(li);for(let e=i.length,n=0;n<e;n++)t[i[n]]={distance:-1,parent:null};for(i=[e],t[e].distance=0;i.length;){e=i.pop();var n=Object.keys(li[e]);for(let a=n.length,s=0;s<a;s++){var o=n[s],r=t[o];-1===r.distance&&(r.distance=t[e].distance+1,r.parent=e,i.unshift(o))}}i={};for(let s=(e=Object.keys(t)).length,l=0;l<s;l++){var a=e[l];if(null===t[a].parent)continue;n=a,r=[(o=t)[a].parent,a];let s=li[o[a].parent][a];for(a=o[a].parent;o[a].parent;)r.unshift(o[a].parent),s=m(li[o[a].parent][a],s),a=o[a].parent;s.conversion=r,i[n]=s}return i}(e);Object.keys(t).forEach((i=>{let n=t[i];di[e][i]=function(e){let t=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];if(null==(t=i[0]))return t;if(1<t.length&&(i=t),"object"==typeof(i=e(i)))for(let e=i.length,t=0;t<e;t++)i[t]=Math.round(i[t]);return i};return"conversion"in e&&(t.conversion=e.conversion),t}(n),di[e][i].raw=function(e){let t=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return null==(t=i[0])?t:(1<t.length&&(i=t),e(i))};return"conversion"in e&&(t.conversion=e.conversion),t}(n)}))}));let ci=["keyword","gray","hex"],hi={};for(let e of Object.keys(di))hi[[...di[e].labels].sort().join("")]=e;let ui={};p.prototype={toString(){return this.string()},string(e){let t=this.model in ai.to?this:this.rgb();return t=t.round("number"==typeof e?e:1),e=1===t.valpha?t.color:[...t.color,this.valpha],ai.to[t.model](e)},round(e){return e=Math.max(e||0,0),new p([...this.color.map(g(e)),this.valpha],this.model)},alpha(e){return void 0!==e?new p([...this.color,Math.max(0,Math.min(1,e))],this.model):this.valpha},lighten(e){let t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken(e){let t=this.hsl();return t.color[2]-=t.color[2]*e,t}};for(let e of Object.keys(di)){if(ci.includes(e))continue;let{channels:t}=di[e];p.prototype[e]=function(){if(this.model===e)return new p(this);for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return 0<i.length?new p(i,e):(t=di[this.model][e].raw(this.color),t=Array.isArray(t)?t:[t],new p([...t,this.valpha],e))},p[e]=function(){for(var i=arguments.length,n=Array(i),o=0;o<i;o++)n[o]=arguments[o];return"number"==typeof(i=n[0])&&(i=E(n,t)),new p(i,e)}}class mi{constructor(){this.whiteColor="rgb(255, 255, 255)",this.blackColor="rgb(0, 0, 0)"}changeAlpha(e,t){return p(e).alpha(t).string()}getAlpha(e){return p(e).alpha()}lighten(e,t){try{return p(e).lighten(t).rgb().string()}catch(t){return e}}darken(e,t){try{return p(e).darken(t).rgb().string()}catch(t){return e}}getContrastRatio(e,t){try{return(new Jt).ratio(e,t)}catch(e){return 0}}}class pi{static get size(){return{width:this.width,height:this.height}}static get width(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)}static get height(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)}static get scrollbarWidth(){return window.innerWidth-document.documentElement.clientWidth}}class gi{constructor(e,t){this.setStylesToElement=this.colorUtils=null,this.colorUtils=e,this.setStylesToElement=t}getMenuOverlayContentClassName(){return je.SYSTEM_CLASS_PREFIX+"overlay-menu-content"}createBackdrop(e){let t=document.createElement("div");return t.style.position="fixed",t.style.zIndex=String(Number.MAX_SAFE_INTEGER-1),t.style.top="0",t.style.left="0",t.style.width=e?"0px":"100%",t.style.height=e?"0px":"100%",t}createMenuOverlay(e){var t=this;let{triggerElement:i,overlayStyles:n,createOverlayContent:o,overlayWidth:r,overlayHeight:a,offset:s,onDestroy:l,positionByDefault:d,isHorizontallyCentered:c,isBackdropDisabledOnUI:h}=e,u=this.createBackdrop(h),m=document.createElement("div");m.style.position="fixed",m.style.display="block",m.style.zIndex=String(Number.MAX_SAFE_INTEGER),r&&(m.style.width="".concat(r,"px")),a&&(m.style.height="".concat(a,"px")),e=m.attachShadow({mode:"open"});let p=document.createElement("style");p.innerHTML=n,e.append(p);let g=document.createElement("div");g.classList.add(this.getMenuOverlayContentClassName()),document.body.append(u),document.body.append(m),e.append(g),o(u,g),function(){const e=t.getOverlayMenuPlacementData(i,g,null!=s?s:5,d,c);t._setPositionAttr(g,e.position),t.setStylesToElement(m,e.coordinates)}(),m.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault()}));let E=e=>{u.remove(),m.remove(),l&&l(),window.removeEventListener("keyup",e,!0)},v=e=>{"Escape"===e.key&&(e.preventDefault(),e.stopImmediatePropagation(),E(v))};return u.addEventListener("click",(()=>E(v))),window.addEventListener("keyup",v,!0),{backdrop:u,overlay:m}}getOverlayMenuPlacementData(e,t,i,n,o){return i=this._calcOverlayMenuPosition(e,t,i,n),this._updateOverlayContentMargins(i,t),{coordinates:this._getOverlayMenuPosition(i,e.getBoundingClientRect(),t.getBoundingClientRect(),o),position:i.position}}_calcOverlayMenuPosition(e,t,i,n){let o=this._getOverlayMenuHorizontalOffset(e,t,i);return e=this._getOverlayMenuVerticalOffset(e,t,i),t="undefined",(i={bottom:e.availableSpaceBelowTriggerElem>=e.contentHeight,top:e.availableSpaceAboveTriggerElem>=e.contentHeight,right:o.availableSpaceToTheRightSideOfTheTrigger>=o.contentWidth,left:o.availableSpaceToTheLeftSideOfTheTrigger>=o.contentWidth}).top?t="top":i.bottom?t="bottom":i.right?t="right":i.left&&(t="left"),i[n]&&(t=n),"undefined"===t&&((n=Math.max(e.availableSpaceBelowTriggerElem,e.availableSpaceAboveTriggerElem,o.availableSpaceToTheRightSideOfTheTrigger,o.availableSpaceToTheLeftSideOfTheTrigger))===e.availableSpaceBelowTriggerElem?t="bottom":n===e.availableSpaceAboveTriggerElem?t="top":n===o.availableSpaceToTheRightSideOfTheTrigger?t="right":n===o.availableSpaceToTheLeftSideOfTheTrigger&&(t="left")),Object.assign(Object.assign(Object.assign({},e),o),{position:t})}_getOverlayMenuHorizontalOffset(e,t,i){var n=pi.width;return({right:e}=e.getBoundingClientRect()),n=n-i-e-pi.scrollbarWidth,{horizontalOffset:i,contentWidth:t=this._getOverlayMenuDimensions(t).width,availableSpaceToTheLeftSideOfTheTrigger:e-i,availableSpaceToTheRightSideOfTheTrigger:n}}_getOverlayMenuDimensions(e){let{width:t,height:i}=e.getBoundingClientRect(),{marginBottom:n,marginTop:o,marginLeft:r,marginRight:a}=window.getComputedStyle(e);return{width:t+parseInt(r,10)+parseInt(a,10),height:i+parseInt(o,10)+parseInt(n,10)}}_getOverlayMenuVerticalOffset(e,t,i){let n=pi.height,{top:o,bottom:r}=e.getBoundingClientRect();return{verticalOffset:i,contentHeight:e=this._getOverlayMenuDimensions(t).height,availableSpaceAboveTriggerElem:o-i,availableSpaceBelowTriggerElem:n-r-i}}_getOverlayMenuPosition(e,t,i,n){switch(e.position){case"top":return{left:"".concat(this._getLeftPositionTBForOverlayMenu(t,i,n),"px"),top:"".concat(e.availableSpaceAboveTriggerElem-e.contentHeight-e.verticalOffset,"px")};case"bottom":return{left:"".concat(this._getLeftPositionTBForOverlayMenu(t,i,n),"px"),bottom:"".concat(e.availableSpaceBelowTriggerElem-e.contentHeight-e.verticalOffset,"px")};case"left":return{left:"".concat(e.availableSpaceToTheLeftSideOfTheTrigger-t.width-e.contentWidth-e.horizontalOffset,"px"),top:"".concat(this._getTopPositionLRForOverlayMenu(t,e),"px")};case"right":return{right:"".concat(e.availableSpaceToTheRightSideOfTheTrigger-e.contentWidth-e.horizontalOffset,"px"),top:"".concat(this._getTopPositionLRForOverlayMenu(t,e),"px")}}}_getLeftPositionTBForOverlayMenu(e,t,i){return 0>(e=i?e.x+e.width/2-t.width/2:e.x)&&(e=0),e+t.width>pi.width&&(e-=e+t.width-pi.width),e}_getTopPositionLRForOverlayMenu(e,t){return e=t.availableSpaceAboveTriggerElem,t.contentHeight>t.availableSpaceBelowTriggerElem&&(e-=t.contentHeight-t.availableSpaceBelowTriggerElem),e}_setPositionAttr(e,t){e.setAttribute("cl-overlay-position",t)}getOverlayBackgroundColor(e,t){return e.startsWith("transparent")||e.startsWith("none")||!e.startsWith("rgb")||1!==this.colorUtils.getAlpha(e.slice(0,e.match(/\)/).index+1))?(e=this.colorUtils.getContrastRatio(t,this.colorUtils.whiteColor))>(t=this.colorUtils.getContrastRatio(t,this.colorUtils.blackColor))?this.colorUtils.whiteColor:this.colorUtils.blackColor:e}getOverlayBorderRadius(e,t){return Math.min(Math.floor(parseInt(e)/2),parseInt(t["border-top-left-radius"]),parseInt(t["border-top-right-radius"]),parseInt(t["border-bottom-left-radius"]),parseInt(t["border-bottom-right-radius"]))}getMenuItemHoverColor(e){var t=this.colorUtils.getContrastRatio(e,this.colorUtils.whiteColor);let i,n=this.colorUtils.getContrastRatio(e,this.colorUtils.blackColor);if(t>n)for(i=this.colorUtils.whiteColor;5<t;)i=this.colorUtils.darken(i,.1),t=this.colorUtils.getContrastRatio(e,i);else for(i="rgb(10, 10, 10)",t=n;5<t;)i=this.colorUtils.lighten(i,.1),t=this.colorUtils.getContrastRatio(e,i);return this.colorUtils.changeAlpha(i,.2)}_updateOverlayContentMargins(e,t){let{marginBottom:i,marginTop:n}=window.getComputedStyle(t);"top"===e.position?(this.setStylesToElement(t,{"margin-top":"".concat(parseInt(n,10)+parseInt(i,10),"px")}),this.setStylesToElement(t,{"margin-bottom":"0px"})):"bottom"===e.position?(this.setStylesToElement(t,{"margin-bottom":"".concat(parseInt(i,10)+parseInt(n,10),"px")}),this.setStylesToElement(t,{"margin-top":"0px"})):(e="".concat((parseInt(i,10)+parseInt(n,10))/2,"px"),this.setStylesToElement(t,{"margin-top":e,"margin-bottom":e}))}}let Ei="\n  .cl-tooltip-text {\n    z-index: ".concat(Number.MAX_SAFE_INTEGER,";\n    width: max-content;\n    height: fit-content;\n    visibility: hidden;\n    background-color: white;\n    color: #000;\n    border: 1px solid rgb(194, 194, 194);\n    border-radius: 5px;\n    padding: 5px 10px;\n    position: fixed;\n    max-width: 300px;\n    max-height: 100vh;\n    box-shadow: 0 1px 5px rgba(0,0,0,.28);\n    font-size: 14px;\n  }\n\n  .cl-tooltip-text[cl-tooltip-position='top']:before {\n    content: \"\";\n    position: absolute;\n    top: 100%;\n    left: calc(50% - 13px);\n    border-width: ").concat("12px",";\n    border-style: solid;\n    border-color: rgb(194, 194, 194) transparent transparent transparent;\n  }\n  \n  .cl-tooltip-text[cl-tooltip-position='top']:after {\n    content: \"\";\n    position: absolute;\n    top: 100%;\n    left: calc(50% - 5px);\n    margin-left: -8px;\n    margin-top: -2px;\n    border-width: ").concat("12px",";\n    border-style: solid;\n    border-color: white transparent transparent transparent;\n  }\n\n  .cl-tooltip-text[cl-tooltip-position='bottom']:before {\n    content: \"\";\n    position: absolute;\n    top: -24px;\n    left: calc(50% - 9px);\n    border-width: ").concat("12px",";\n    border-style: solid;\n    border-color: transparent transparent rgb(194, 194, 194) transparent;\n  }\n  \n  .cl-tooltip-text[cl-tooltip-position='bottom']:after {\n    content: \"\";\n    position: absolute;\n    top: -22px;\n    left: calc(50% - 4px);\n    margin-left: -5px;\n    margin-bottom: -2px;\n    border-width: ").concat("12px",";\n    border-style: solid;\n    border-color: transparent transparent white transparent;\n  }\n");class vi{constructor(){this.tooltipTextElement=null,this.tooltipStylesId="cl-tooltip-text-styles"}createTooltipText(e){return this.tooltipTextElement=document.getElementById("cl-overlay-tooltip-text")||document.createElement("div"),this.tooltipTextElement.classList.add("cl-tooltip-text"),this.tooltipTextElement.innerHTML!==e&&(this.tooltipTextElement.innerHTML=e,this.tooltipTextElement.style=null),this.tooltipTextElement.id||(this.tooltipTextElement.id="cl-overlay-tooltip-text",document.body.append(this.tooltipTextElement)),this.tooltipTextElement}destroyTooltipText(){this.tooltipTextElement&&(this.tooltipTextElement.remove(),this.tooltipTextElement=null)}addTooltipStyles(){if(!document.head.querySelector("#".concat(this.tooltipStylesId))){var e=document.createElement("style");e.setAttribute("id",this.tooltipStylesId),e.innerHTML=Ei,document.head.appendChild(e)}}removeTooltipStyles(){let e=document.head.querySelector("#".concat(this.tooltipStylesId));e&&e.remove()}}class _i{constructor(){this.color=new mi,this.overlay=new gi(this.color,this.setStylesToElement.bind(this)),this.tooltipTextUtils=new vi,this.tooltipElLastMouseLeaveHandler=this.tooltipElLastMouseEnterHandler=null}setStylesToElement(e,t){Object.keys(t).forEach((i=>{e.style[i]=t[i]}))}getStylesFromElement(e,t){let i=window.getComputedStyle(e);return t.reduce(((e,t)=>(e[t]=i.getPropertyValue(t),e)),{})}setTooltipPosition(e){let{triggerElement:t,tooltipElement:i,offset:n=10}=e;e=this.overlay.getOverlayMenuPlacementData(t,i,n,"top",!0),i.setAttribute("cl-tooltip-position",e.position),this.setStylesToElement(i,e.coordinates)}applyLabelParams(e,t,i,n){n=i.querySelector(n),t=e.adaptiveStyles[t].find((e=>"label"===e.element)).params,(i=i.querySelector(".label")).innerHTML=e.content.label,"TOP"===t.position?(n.style.flexDirection="column",n.style.alignItems="unset",this.setStylesToElement(i,{marginRight:0,marginBottom:"".concat(t.margin,"px")})):(n.style.flexDirection="row",n.style.alignItems="center",this.setStylesToElement(i,{marginRight:"".concat(t.margin,"px"),marginBottom:0})),i.style.display=t.enabled?"":"none"}getPlaceholderColor(e,t,i){return(e=e.adaptiveStyles[t].find((e=>"input"===e.element))).placeholderStyleAttributes&&e.placeholderStyleAttributes.color?e.placeholderStyleAttributes.color:(e=(e.classes||"").split(" ").filter((e=>e.startsWith(je.SYSTEM_CLASS_PREFIX)))).length&&(i=i.textClasses[e[0]])&&i.placeholderStyleAttributes&&i.placeholderStyleAttributes.color?i.placeholderStyleAttributes.color:"rgb(0, 0, 0)"}getClosestParentOutsideShadowRoot(e,t,i){var n;if(t){var o=t.closest(e);return t!==o||i||(o=null),o||this.getClosestParentOutsideShadowRoot(e,null===(n=null==t?void 0:t.getRootNode())||void 0===n?void 0:n.host,!0)}}setInputHostSize(e,t,i,n,o){var r;let a=e.adaptiveStyles[t].find((e=>"input"===e.element)).styleAttributes;e=null===(r=e.adaptiveStyles[t].find((e=>"label"===e.element)))||void 0===r?void 0:r.params,o=o&&e&&e.enabled&&"TOP"===e.position?o.getBoundingClientRect().height+e.margin:0,a.width&&(a.width.includes("100%")?(n.style.width="100%",i.style.width=a.width):i.style.width="auto"),a.height&&(a.height.includes("100%")?(n.style.height="100%",i.style.height=a.height):i.style.height="".concat(parseFloat(a.height)+o,"px"))}setFocusOutline(e,t){let i;t=t||e;let n=["transparent","initial"];if(e)return e.style.borderColor&&!n.includes(e.style.borderColor)&&(parseFloat(e.style.borderWidth)||parseFloat(e.style.borderBottomWidth))&&(i=this._setElementOutlineData(t,e,"borderColor")),!i&&e.style.getPropertyValue("--borderBottomColor")&&!n.includes(e.style.getPropertyValue("--borderBottomColor"))&&parseFloat(e.style.getPropertyValue("--borderBottomWidth"))&&(i=this._setElementOutlineData(t,e,"--borderBottomColor")),i||!e.style.backgroundColor||n.includes(e.style.backgroundColor)||(i=this._setElementOutlineData(t,e,"backgroundColor")),i||!e.style.color||n.includes(e.style.color)||(i=this._setElementOutlineData(t,e,"color")),i||(t.classList.remove("focus-outline-defined"),null)}handleControlStatusChange(e){e.control.on(Rt.validationStatusChanged,(t=>{this._handleValidationStatus(e,t)})),e.control.on(Rt.touchedStatusChanged,(()=>{this._handleValidationStatus(e,e.control.pending?"pending":e.control.valid?"valid":"invalid")}))}_handleValidationStatus(e,t){let{control:i,inputElement:n,tooltipElement:o,configService:r,i18n:a,validCallback:s,invalidCallback:l,errorMessageMapper:d,pendingCallback:c}=e;switch(t){case"valid":this.setValidStyles(n,o),s&&s();break;case"invalid":i.touched&&(e=i.getErrorKeys())&&(e=e[0],t=this.getTranslation(r,a,e),d&&(t=d(e,t)),this.setInvalidStyle(n,o,t),l&&l());break;case"pending":i.touched&&(this.setPendingStyle(n,o),c&&c())}}getTranslation(e,t,i){return e=_(t,v(e)).translations,(t=Object.keys(e).find((e=>e.includes(i))))?e[t]:i}setValidStyles(e,t){e.classList.contains("invalid")&&e.classList.remove("invalid"),t.style.visibility="hidden"}setInvalidStyle(e,t,i){let n;e.classList.contains("invalid")||e.classList.add("invalid"),t.style.visibility="visible",e=()=>{this.tooltipTextUtils.addTooltipStyles(),n=this.tooltipTextUtils.createTooltipText(i),n.style.visibility="visible",this.setTooltipPosition({triggerElement:t,tooltipElement:n})};let o=()=>{n&&(n.style.visibility="hidden",this.tooltipTextUtils.destroyTooltipText(),this.tooltipTextUtils.removeTooltipStyles())};this.tooltipElLastMouseEnterHandler&&t.removeEventListener("mouseenter",this.tooltipElLastMouseEnterHandler),this.tooltipElLastMouseLeaveHandler&&t.removeEventListener("mouseleave",this.tooltipElLastMouseLeaveHandler),t.addEventListener("mouseenter",e),t.addEventListener("mouseleave",o),this.tooltipElLastMouseEnterHandler=e,this.tooltipElLastMouseLeaveHandler=o}setPendingStyle(e,t){t.style.visibility="hidden",e.classList.contains("invalid")&&e.classList.remove("invalid")}_setElementOutlineData(e,t,i){return(t=this._parseColorValue(t,i))?(t=this.color.changeAlpha(t,.5),e.classList.add("focus-outline-defined"),e.style.setProperty("--clFocusOutline","3px solid ".concat(t)),t):null}_parseColorValue(e,t){if((e=getComputedStyle(e)[t]||e.style.getPropertyValue(t))&&e.includes("rgb")&&(!(2<e.split("rgb").length)||e.includes("#")))return e}}var fi={name:"SysContainerComponent",componentType:"CONTAINER",version:"1.0.0",contextMenuModel:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT",params:{hideForEntryType:"VIEW"}}],floatingPanelModel:[],floatingControlsModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"PARENT_ALIGNMENT",elementProp:"styleAttributes",element:"host"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"PARENT_ALIGNMENT",elementProp:"styleAttributes",element:"host"}]}],propertyPaneModel:{content:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"WIDGET_LAYOUT_SELECT",displayCondition:"return sdk.appConfig.modelType !== 'RESPONSIVE' && sdk.component.type === 'VIEW' && ['DETACHED', 'FLOATING_BOX', 'CONTENT_LOCKER'].includes(sdk.layoutType) && sdk.widgetType !== 'AGE_VERIFY'"},{type:"CONTROL",name:"ALIGNMENT",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["fixed","fill","hug"]}},displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"BACKGROUND",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"BACKDROP_FILTER",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? (sdk.appConfig.allowBackdropFilterOnView ?? true) : true"},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"BOX_SHADOW",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"PADDING"}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"MARGIN"},displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType === 'BUILT_IN' : true"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"WIDGET_LAYOUT_SELECT",displayCondition:"return sdk.appConfig.modelType !== 'RESPONSIVE' && sdk.component.type === 'VIEW' && ['DETACHED', 'FLOATING_BOX', 'CONTENT_LOCKER'].includes(sdk.layoutType) && sdk.widgetType !== 'AGE_VERIFY'"},{type:"CONTROL",name:"ALIGNMENT",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["fixed","fill","hug"]}},displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"BACKGROUND",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"BACKDROP_FILTER",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? (sdk.appConfig.allowBackdropFilterOnView ?? true) : true"},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"BOX_SHADOW",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"PADDING"}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"MARGIN"},displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType === 'BUILT_IN' : true"}]}],general:[{type:"CONTROL",name:"ACTIONS",propPath:["handlers"],params:{origin:!0}}]},events:{dispatch:[],listen:[]},i18nPropertyPaneModel:{content:[{type:"CONTROL",name:"ACTIONS",propPath:["handlers"],params:{origin:!1}}]},i18nPropPaths:["handlers,[id],actions,[id],params,link","handlers,[id],actions,[id],params,customData"],defaultProps:{adaptiveStyles:{desktop:[{element:"host",styleAttributes:{position:"relative",width:"100%",minWidth:"min-content",height:"auto",minHeight:null,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"10px",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"10px",paddingRight:"10px",marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",background:"rgba(0, 0, 0, 0.06)",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopWidth:"0px",borderTopColor:"rgb(0, 0, 0)",borderBottomWidth:"0px",borderBottomColor:"rgb(0, 0, 0)",borderLeftWidth:"0px",borderLeftColor:"rgb(0, 0, 0)",borderRightWidth:"0px",borderRightColor:"rgb(0, 0, 0)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",boxShadow:"none"},classes:""}],mobile:[{element:"host",styleAttributes:{position:"relative",width:"100%",minWidth:"min-content",height:"auto",minHeight:null,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"10px",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"10px",paddingRight:"10px",marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",background:"rgba(0, 0, 0, 0.06)",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopWidth:"0px",borderTopColor:"rgb(0, 0, 0)",borderBottomWidth:"0px",borderBottomColor:"rgb(0, 0, 0)",borderLeftWidth:"0px",borderLeftColor:"rgb(0, 0, 0)",borderRightWidth:"0px",borderRightColor:"rgb(0, 0, 0)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",boxShadow:"none"},classes:""}]}},metaDescription:{sortWeight:70,icon:"/claspo-editor/container-component-icon.svg",label:{en:"Container",ru:"Контейнер",uk:"Контейнер",es:"Envase",fr:"Récipient",de:"Container",it:"Contenitore",pt:"Embalagem",ro:"Container",bg:"Контейнер",cs:"Kontejner",el:"Περιέκτης",nl:"Container",pl:"Kontener",sv:"Behållare",tr:"Konteyner",ar:"الحاوية",zh:"容器",da:"Beholder",he:"קונטיינר",fi:"Säiliö",hi:"कंटेनर",hr:"Kontejner",hu:"Tárhely",id:"Kontainer",ja:"コンテナ",ko:"컨테이너",no:"Container",sk:"Krabica",sl:"Rezervoar",sr:"Kontejner"}},waitForResourcesLoad:!0,resourcesPropPaths:[["adaptiveStyles",":ENV","styleAttributes","background"]]},yi=function(e){function t(t){i[t]=e[t]&&function(i){return new Promise((function(n,o){!function(e,t,i,n){Promise.resolve(n).then((function(t){e({value:t,done:i})}),t)}(n,o,(i=e[t](i)).done,i.value)}))}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),i={},t("next"),t("throw"),t("return"),i[Symbol.asyncIterator]=function(){return this},i)};class Ti{static sortActions(e){let t={CLOSE_WIDGET:-1,OPEN_LINK:-2,SHOW_WIDGET:1,SUBSCRIBE_CONTACT:2,REQUEST:3};return[...e].sort(((e,i)=>(void 0!==t[e.type]?t[e.type]:0)>(void 0!==t[i.type]?t[i.type]:0)?-1:(void 0!==t[e.type]?t[e.type]:0)<(void 0!==t[i.type]?t[i.type]:0)?1:0))}constructor(e,t){this.config=e,this.actions=Ti.sortActions(t),this.listener=null,this.targetElements=[],this.eventsQueue=[],this.state=null,this.postponed=!1}activate(e,t,i){this.state=e;let o=(e=i()).getAttribute(n("id"));this.listener=e=>{let t=e.composedPath().filter((e=>e instanceof HTMLElement&&e.getAttribute(n("type")))),i=0;for(;t[i]&&t[i].getAttribute(n("id"))!==o;){let e=t[i].getAttribute(n("type"));if(Ti.IGNORING_VIEW_ENTRY_TYPES.includes(e))return;i++}this.eventsQueue.push({event:e}),this.postponed||this.execute()},this.targetElements=this.config.relativeSelector?Array.from((e.shadowRoot||e).querySelectorAll(this.config.relativeSelector)):[e],this.targetElements.forEach((e=>{e.addEventListener("click",this.listener)}))}async execute(){var e,t;try{for(var i,n=!0,o=yi(this.eventsQueue);!(e=(i=await o.next()).done);){var r=i.value;n=!1;try{let{event:e}=r;for(let t of this.actions)if(!await t.execute(this.state.getState(),e))break}finally{n=!0}}}catch(e){var a={error:e}}finally{try{n||e||!(t=o.return)||await t.call(o)}finally{if(a)throw a.error}}this.eventsQueue=[]}postpone(){this.postponed=!0}release(){this.postponed=!1,this.execute()}destroy(){this.listener&&this.targetElements.length&&(this.targetElements.forEach((e=>{e.removeEventListener("click",this.listener)})),this.targetElements=[])}}Ti.IGNORING_VIEW_ENTRY_TYPES=[wt.BUTTON,wt.CONSENT,wt.INPUT];class Ii{constructor(e,t){this.config=e,this.actions=t,this.componentEmitterListener=null}activate(e,t,i){this.componentEmitterListener=t.on(this.config.eventName,(()=>{this.actions.forEach((t=>t.execute(e.getState(),this.config.params)))}))}destroy(){this.componentEmitterListener&&this.componentEmitterListener.off()}}class Oi{constructor(e,t){this.actionFactory=e,this.actionRegister=t}get(e){let t=e.actions.map((e=>this.actionFactory.get(e)));switch(t.forEach((e=>this.actionRegister.register(e))),e.type){case"CLICK":return new Ti(e,t);case"COMPONENT_EVENT":return new Ii(e,t);default:throw Error("Not supported handler type ".concat(e.type))}}}class Ai{static set(e,t){e[Ai.accumulatorPropertyName]=Object.assign(Object.assign({},e[Ai.accumulatorPropertyName]||{}),t.styleAttributes),Object.keys(e[Ai.accumulatorPropertyName]).forEach((i=>{i.includes("--")?e.style.setProperty(i,t.styleAttributes[i]||""):e.style[i]=t.styleAttributes[i]?t.styleAttributes[i]:""}))}}Ai.accumulatorPropertyName="clStyleAttributes";class Ci{static log(e){window.scriptLog09u8y9&&scriptLog09u8y9("ERROR","RUNTIME_ERROR",Error(e))}}class Si{constructor(e,t,i,n,o,r){this.hostElement=t,this.documentModel=e,this.getSharedCb=i,this.getPropsCb=n,this.getEnvCb=o,this.httpClient=r,this.subscription=null,this.envUrlMaps={desktop:new Map,mobile:new Map}}apply(e){return this.getPropsCb().backgroundDynamicInlineSVGElements[e].forEach((t=>{let i=this.getPropsCb().adaptiveStyles[e].find((e=>e.element===t)),[n,o]=String(i.styleAttributes.background).split("(")[1].split(")");n=n.split('"').join(""),this.envUrlMaps[e].set(t,{originalSVGResourceURL:n,inlineSvgString:null,positionOptions:o.replace(";","")})})),Promise.all([...this.envUrlMaps[e].entries()].map((t=>{let[i,n]=t;return this.httpClient.execute(n.originalSVGResourceURL).then((e=>e.text())).then((t=>{this.envUrlMaps[e].set(i,Object.assign(Object.assign({},n),{inlineSvgString:t}))}))}))).then((()=>{this._applyHostElementBackground(this.envUrlMaps[e].get("host"),this.getSharedCb().cssVars)})).catch((e=>{Ci.log("Failed to load/apply backgroundDynamicInlineSVGElements[".concat(this.getPropsCb().backgroundDynamicInlineSVGElements,"] ").concat(e))}))}on(){return this.subscription=this.documentModel.on("COLOR_SCHEMA_UPDATE",(e=>{this._applyHostElementBackground(this.envUrlMaps[this.getEnvCb()].get("host"),e)})),this}_applyHostElementBackground(e,t){e&&(this.hostElement.style.background=this._buildBackgroundUrl(e,t))}_buildBackgroundUrl(e,t){return t=e.inlineSvgString.trim().replace("var(--cl-schema-accent)",t["cl-schema-accent"]),t=encodeURIComponent(t),"url('data:image/svg+xml,".concat(t,"')").concat(e.positionOptions)}off(){var e;null===(e=this.subscription)||void 0===e||e.off()}}var bi=new class{execute(e,t){let i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;var n=4<arguments.length?arguments[4]:void 0;return n={method:t,headers:Object.assign({"Content-Type":"text/plain"},(3<arguments.length?arguments[3]:void 0)||{}),credentials:"same-origin",body:null,signal:n},i&&(n.body="string"==typeof i?i:JSON.stringify(i)),fetch(e,n)}};class Ni{constructor(e){this._count=0,this.onUpdateCb=e}increment(){this._count++,this.onUpdateCb(this.count())}decrement(){0<this._count&&this._count--,this.onUpdateCb(this.count())}count(){return this._count}}class Ri{constructor(e,t){this.getPending=()=>this.counters.pending,this.onCounterStateUpdate=e=>{0===e&&this.systemEventEmitter.emit("COMPONENT_RESOURCES_LOADED",this.componentId)},this.onResourceLoadFailure=e=>{this.systemEventEmitter.emit("FAILED_TO_LOAD_COMPONENT_RESOURCE","Failed to load: ".concat(e))},this.componentId=e,this.systemEventEmitter=t,this.counters={pending:new Ni(this.onCounterStateUpdate)}}}let Li=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];let n=t.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:[]})),{});return{get:e=>n[e],clear:()=>Li(...t)}},Mi={DESKTOP:"desktop",MOBILE:"mobile"};Mi.MOBILE;class Di extends HTMLElement{constructor(){super(),this.construct=()=>{var e=this.getAttribute(n("id")),t=this.getWidgetContainerNode();if(!t)throw Error("Widget container not found in construct");let i;(t=t.closest("[".concat(n("widget-id"),"]")))&&(i=t.getAttribute(n("widget-id"))),e=new CustomEvent("cl-props-request",{detail:{nodeName:this.nodeName,path:this.getAttribute(n("path")),id:e,widgetId:i},bubbles:!0,composed:!0}),window.dispatchEvent(e),Object.assign(this,e.detail.props),this.observers=Li("props","shared","environment"),this.subscriptions=new class{constructor(){this.subscriptions=[]}push(e){this.subscriptions.push(e)}off(){this.subscriptions.forEach((e=>null==e?void 0:e.off()))}},this.state=new St,this.componentEventEmitter=new pt,this.componentResourceManager=new Ri(this.model.id,this.services.eventEmitter),this.mergeTagsProcessor=this.services.mergeTagsProcessorFactory.create(),this._actionFactory=this.services.actionFactory,this._handlerFactory=new Oi(this._actionFactory,this.services.actionRegister),this.prevProps=this.model.props,this.prevEnvironment=this.getEnvironment(),this.documentModel.on("".concat("COMPONENT_PROPS_UPDATE","_").concat(this.model.id),(e=>{this.model.props=e,this.observers.get("props").forEach((t=>t(this.prevProps,e))),this.prevProps=e})),this.documentModel.on("SHARED_UPDATE_ALL",(()=>{this.applyAutoAdaptiveStyles(this.prevProps.adaptiveStyles),this.observers.get("shared").forEach((e=>e(this.getShared())))})),this.model.props.backgroundDynamicInlineSVGElements&&(this.colorSchemaListener=new Si(this.documentModel,this.getHostElement(),(()=>this.getShared()),(()=>this.model.props),(()=>this.getEnvironment()),bi),this.colorSchemaListener.apply(this.getEnvironment()).then((()=>{this.subscriptions.push(this.colorSchemaListener.on())}))),this.prevProps.adaptiveStyles&&this.subscriptions.push(this.resizeListener.on(Ht.changeEventName,(()=>{this.applyAutoAdaptiveStyles(this.prevProps.adaptiveStyles);let e=this.getEnvironment();this.observers.get("environment").forEach((t=>t(this.prevEnvironment,e))),this.prevEnvironment=e})))},this.attachHandlers=()=>{this.model.props.handlers&&this.model.props.handlers.length&&(this.handlers=this.model.props.handlers.map((e=>this._handlerFactory.get(e))),this.handlers.map((e=>()=>e.activate(this.state,this.componentEventEmitter,this.getHostElement.bind(this)))).forEach((e=>e())))},this.postponeHandlers=()=>{var e;null===(e=this.handlers)||void 0===e||e.forEach((e=>e.postpone()))},this.releaseHandlers=()=>{var e;null===(e=this.handlers)||void 0===e||e.forEach((e=>e.release()))},this.getProps=()=>this.model.props,this.getShared=()=>this.documentModel.getShared(),this.getEnvironment=()=>this.resizeListener.isMobile()?"mobile":"desktop",this.getRootElement=()=>this.shadowRoot?this.shadowRoot:this,this.getHostElement=()=>this,this.observeProps=e=>{this.observers.get("props").push(e),e(null,this.prevProps)},this.observeShared=e=>{this.observers.get("shared").push(e),e(this.getShared())},this.observeEnvironment=e=>{this.observers.get("environment").push(e),e(null,this.getEnvironment())},this.getElements=()=>[this.getHostElement(),...Array.from(this.getRootElement().querySelectorAll("[".concat(n("element"),"]"))).filter((e=>!e.hasAttribute(n("component"))))],this.getElement=(e,t)=>this.getElements().find((i=>t?i.getAttribute(n("element"))===e&&i.id===t:i.getAttribute(n("element"))===e)),this.applyAutoAdaptiveStyles=e=>{if(e){var t=this.getElements();if(t.length){var i=n("type"),o=this.getRootElement().querySelector("style[".concat(i,'="').concat("element-styles",'"]'));o||((o=document.createElement("style")).setAttribute(i,"element-styles"),this.getRootElement().appendChild(o)),o.innerHTML="",t.forEach((t=>{var i=t.getAttribute(n("element")),r=this.getEnvironment();(r=y(e,r,i))&&(this.resizeListener.isMobile()&&(i=y(e,"desktop",i))&&(r=Object.assign(Object.assign({},r),{styleAttributes:Object.assign(Object.assign({},i.styleAttributes),r.styleAttributes)})),this.applyStylesToElement(t,this.applySharedClassesToElementModel(r),o))})),this._addLinkColor(o,this.getShared())}}},this.registerComponentResourceManagement=()=>{this.viewResourceManager.registerComponent(this.model.id,this.componentResourceManager)},this.applyStylesToElement=(e,t,i)=>{var o,r,a=[];if("host"===(t=Di._resolveTogglableStylesForElementModel(t)).element&&(Wt.applyHostStyles(this.model.type,e,null,this.layoutType),"desktop"===this.getEnvironment()&&null!==(o=this.model.props.backgroundDynamicInlineSVGElements)&&void 0!==o&&o.desktop||"mobile"===this.getEnvironment()&&null!==(r=this.model.props.backgroundDynamicInlineSVGElements)&&void 0!==r&&r.mobile)&&(this.colorSchemaListener.apply(this.getEnvironment()),a.push("background")),r=(o=t.styleAttributes.background)&&o.match(/url\("([^"]*)"\)/),this.manifest.waitForResourcesLoad&&r){this.componentResourceManager.getPending().increment();let e=new Image;e.src=r[1],Re(e,"load",(()=>{this.componentResourceManager.getPending().decrement()})),Re(e,"error",(()=>{this.componentResourceManager.onResourceLoadFailure(e.src),"UPDATING"===this.services.config.getConfig("entryModuleType")&&this.componentResourceManager.getPending().decrement()}))}a=Object.assign(Object.assign({},t),{styleAttributes:f(t.styleAttributes,a)}),Ai.set(e,a),this._setClassAttributes(e,t),i&&(t.hoverStyleAttributes&&(a=t.hoverStyleAttributes,"FILL_UP"===t.hoverAnimationType&&(e.style.boxShadow="inset 0px 0px 0px 0px rgb(0, 0, 0, 0)",a=Object.assign(Object.assign({},t.hoverStyleAttributes),{background:o,boxShadow:"inset 0px -".concat(e.getBoundingClientRect().height,"px 0px 0px ").concat(a.background),transition:"0.3s"})),this._addStylesToStyleElement(i,t.element,a,":not(.".concat(n("no-hover"),"):hover"),!0)),t.placeholderStyleAttributes&&this._addStylesToStyleElement(i,t.element,t.placeholderStyleAttributes,"::placeholder"),this._addFontStylesToStyleElement(i,this.getShared()),this.stylesAppliedToElement(e,t,i))},this._fixMarginOverflow=e=>{var t=this.getParentComponent();t=t&&("flex"===t.style.display||"inline-flex"===t.style.display);var i="host"===e.getAttribute(n("element"));if(t&&i&&(t=this.getProps(),i=this.getEnvironment(),({styleAttributes:t}=y(t.adaptiveStyles,i,"host")||{}),t&&(i="100%"===t.width,(t.marginLeft||t.marginRight)&&i))){let n=(i=parseFloat(t.marginLeft)||0)+(t=parseFloat(t.marginRight)||0);n&&setTimeout((()=>{e.style.width="calc(100% - ".concat(n,"px)")}))}},this.applySharedClassesToElementModel=e=>function(e,t){let i=e;return(i.classes||"").split(" ").filter((e=>e.startsWith(je.SYSTEM_CLASS_PREFIX))).forEach((e=>{var n;(e=null===(n=t.textClasses)||void 0===n?void 0:n[e])&&(e.styleAttributes.fontFamily||(e.isHeader&&t.headerFontFamily&&(e=Object.assign(Object.assign({},e),{styleAttributes:Object.assign(Object.assign({},e.styleAttributes),{fontFamily:t.headerFontFamily})})),!e.isHeader&&t.textFontFamily&&(e=Object.assign(Object.assign({},e),{styleAttributes:Object.assign(Object.assign({},e.styleAttributes),{fontFamily:t.textFontFamily})}))),i=Object.assign(Object.assign({},i),{styleAttributes:Object.assign(Object.assign({},i.styleAttributes),e.styleAttributes),placeholderStyleAttributes:Object.assign(Object.assign({},i.placeholderStyleAttributes),e.placeholderStyleAttributes)}))})),i.styleAttributes.fontFamily||(i=Object.assign(Object.assign({},i),{styleAttributes:Object.assign(Object.assign({},i.styleAttributes),{fontFamily:t.textFontFamily})})),i}(e,this.documentModel.getShared()),this.getModel=()=>this.model,this._addStylesToStyleElement=function(e,t,i){let o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",r=4<arguments.length?arguments[4]:void 0,a=Object.keys(i).reduce(((e,t)=>e+" ".concat(jt.camelCaseToDashCase(t),": ").concat(i[t]).concat(r?" !important;":";")),"");e.innerHTML+="[".concat(n("element"),'="').concat(t,'"]').concat(o," { ").concat(a," }")},this._addFontStylesToStyleElement=(e,t)=>{e.innerHTML+="[cl-type] {font-family:".concat(t.textFontFamily||"inherit","}")},this._addLinkColor=(e,t)=>{var i,n,o,r;t.linkColor&&(e.innerHTML+="a {color: ".concat(t.linkColor,"}, a:visited {color: ").concat(t.linkColor,"}")),null!==(i=t.linkParams)&&void 0!==i&&i.color&&(e.innerHTML+="a {color: ".concat(null===(n=t.linkParams)||void 0===n?void 0:n.color,"}, a:visited {color: ").concat(null===(o=t.linkParams)||void 0===o?void 0:o.color,"}")),null!==(r=t.linkParams)&&void 0!==r&&r.removeUnderline&&(e.innerHTML+="a {text-decoration: none}, a:visited {text-decoration: none}")},this._setClassAttributes=(e,t)=>{Array.from(e.classList).filter((e=>e!==je.SYSTEM_CLASS_PREFIX+"hovered"&&e!==je.SYSTEM_CLASS_PREFIX+"focused")).forEach((t=>{t.startsWith(je.SYSTEM_CLASS_PREFIX)&&e.classList.remove(t)})),t=((e.getAttribute("class")||"")+" "+t.classes).trim(),e.setAttribute("class",t)},this.getParentComponent=()=>O(this.parentNode,n("element"),"host"),this.getWidgetContainerNode=()=>{let e=null==this?void 0:this.getAttribute(n("path"));return e&&1===e.split(",").length?this.parentNode:O(this.parentNode,n("path"),void 0,(e=>e&&1===e.split(",").length))},this.getWidgetLanguages=()=>v(this.services.config),this.getTranslationsMap=e=>_(e,this.getWidgetLanguages()),this.stylesAppliedToElement=(e,t,i)=>{},this.updateContext=()=>{var e;let t=this.getModel();this.services.context.updateRecord(t.id,{label:this.getContextRecordLabel(t.props),viewIndex:null===(e=t.path)||void 0===e?void 0:e[0]})},this.addContextRecord=()=>{var e;let t=this.getModel();this.services.context.addRecord(t.id,{recordKey:t.id,id:t.props.control.name,label:this.getContextRecordLabel(t.props),value:t.props.control.defaultValue||"",viewIndex:null===(e=t.path)||void 0===e?void 0:e[0],sourceId:"FORM",initialData:{fallbackValue:"",exampleValue:this.getContextRecordExampleValue(t.props)}})},this.getContextRecordLabel=e=>{var t,i;let n=e.control.name;return["email","first_name","last_name"].includes(n)?n.toUpperCase():e.content.label&&null!==(i=null===(t=e.adaptiveStyles.desktop.find((e=>"label"===e.element)))||void 0===t?void 0:t.params)&&void 0!==i&&i.enabled?(e=(new DOMParser).parseFromString(e.content.label,"text/html"),this.capitalizeFirstLetter(e.body.textContent||"")):e.content.placeholder?this.capitalizeFirstLetter(e.content.placeholder):e.control.integrationName?this.capitalizeFirstLetter(e.control.integrationName).replace(/_/g," "):void 0},this.capitalizeFirstLetter=e=>e.charAt(0).toUpperCase()+e.slice(1),this.getContextRecordExampleValue=e=>{switch(e.control.name){case"email":return"myemail@example.com";case"first_name":return"Maria";case"last_name":return"Taylor";default:return this.getContextRecordLabel(e)}},this.completeSubmitAction=e=>{e=e||{viewIndexOnSuccess:1,viewIndexOnSubscribed:1};let t=this.services.actionRegister.getRegisteredActions().find((e=>"SUBMIT"===e.category));t?null==t||t.execute(void 0,void 0,!0,e):this.services.actionFactory.get({type:"REQUEST"}).execute(void 0,void 0,!0,e)},this.attachShadow({mode:"open"})}connectedCallback(){this.construct(),this.registerComponentResourceManagement(),Promise.resolve().then((()=>{this.attachHandlers()}))}disconnectedCallback(){var e;this.observers.clear(),this.subscriptions.off(),this.state.destroy(),this.componentEventEmitter.destroy(),null===(e=this.mergeTagsProcessor)||void 0===e||e.destroy()}static _resolveTogglableStylesForElementModel(e){let t=Object.assign({},e);return Object.keys(t).forEach((e=>{e.toLowerCase().includes("styleattributes")&&(t[e]=Di._resolveTogglableStyles(t[e]))})),t}static _resolveTogglableStyles(e){let t=Object.assign({},e);return(e=(e,i,n)=>{i in t&&(e.forEach((e=>{e in t&&(t[e]=t[i]?t[e]:n)})),delete t[i])})(["marginTop","marginBottom","marginLeft","marginRight"],"_marginEnabled","0px"),e(["paddingTop","paddingBottom","paddingLeft","paddingRight"],"_paddingEnabled","0px"),t}}class wi extends Di{constructor(){super(...arguments),this.manifest={name:"SysContainerComponent"},this.processStyles=()=>{this.innerHTML+='\n      <style>\n      [cl-component="'.concat(this.componentName,'"] {\n        position: relative;\n        min-width: 50px;\n        min-height: 50px;\n      }\n      </style>')}}get componentName(){return this.manifest.name}connectedCallback(){super.connectedCallback(),this.processStyles(),this.observeProps(((e,t)=>{this.applyAutoAdaptiveStyles(t.adaptiveStyles)}))}disconnectedCallback(){super.disconnectedCallback()}}class Pi extends wi{constructor(){super(...arguments),this.manifest=fi,this.connectResizeObserver=()=>{this.resizeObserver=new ResizeObserver((e=>{for(let t of e)t.contentRect&&this.updateResponsiveRules(this.getResponsiveStyleElement())})),this.resizeObserver.observe(this.getWidgetContainerNode())},this.updateResponsiveRules=e=>{if(this.getProps().isResponsive){var t=this.getWidgetContainerNode(),{width:i,height:n}=t.getBoundingClientRect();e.innerHTML='[cl-component="'.concat(this.componentName,1.6<n/i?'"] {flex-direction: column !important;}':'"] {flex-direction: row !important;}')}else e.innerHTML=""},this.getResponsiveStyleElement=()=>[...this.children].find((e=>"responsive-styles"===e.getAttribute("name"))),this.appendResponsiveStyles=()=>{this.innerHTML+='<style name="responsive-styles">\n      [cl-component="'.concat(this.componentName,'"] {}\n    </style>')}}connectedCallback(){super.connectedCallback(),this.appendResponsiveStyles(),this.observeProps(((e,t)=>{t.isResponsive&&this.updateResponsiveRules(this.getResponsiveStyleElement())})),this.getProps().isResponsive&&this.connectResizeObserver()}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this.resizeObserver)||void 0===e||e.disconnect()}}Pi.define={name:"sys-container",model:fi.name,manifest:fi};var xi={name:"SysImageComponent",componentType:"IMAGE",version:"1.0.0",contextMenuModel:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"BRING_BACK_FORWARD",element:"host",elementProp:"styleAttributes",elementSubProp:"zIndex"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT"}],floatingPanelModel:[],floatingControlsModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"}]}],propertyPaneModel:{content:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["fixed","fill","hug"]}}},{type:"CONTROL",name:"RADIO_BUTTONS",elementProp:"styleAttributes",elementSubProp:"objectFit",element:"image",params:{label:"DOCUMENT_IMAGE",options:[{label:"DOCUMENT_IMAGE_RESIZE_COVER",value:"cover"},{label:"DOCUMENT_IMAGE_RESIZE_CONTAIN",value:"contain"},{label:"DOCUMENT_IMAGE_RESIZE_NONE",value:"none"}]}},{type:"CONTROL",name:"IMAGE_SOURCES",element:"image",propPath:["control","imageSource"]},{type:"CONTROL",name:"FLOATING_COMPONENT_POSITION",element:"host",elementProp:"styleAttributes",displayCondition:"return sdk.component.floating ? !sdk.component.getProps().control.positioning : false;",params:{label:"DOCUMENT_POSITION"}},{type:"CONTROL",name:"DISPLAY",elementProp:"styleAttributes",elementSubProp:"display",element:"host",params:{label:"DOCUMENT_DISPLAY_ON_DESKTOP"}},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"image"},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",displayCondition:"return !sdk.component.floating;",params:{indentationType:"PADDING"}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",displayCondition:"return !sdk.component.floating;",params:{indentationType:"MARGIN"}}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["fixed","fill","hug"]}}},{type:"CONTROL",name:"RADIO_BUTTONS",elementProp:"styleAttributes",elementSubProp:"objectFit",element:"image",params:{label:"DOCUMENT_IMAGE",options:[{label:"DOCUMENT_IMAGE_RESIZE_COVER",value:"cover"},{label:"DOCUMENT_IMAGE_RESIZE_CONTAIN",value:"contain"},{label:"DOCUMENT_IMAGE_RESIZE_NONE",value:"none"}]}},{type:"CONTROL",name:"IMAGE_SOURCES",element:"image",propPath:["control","imageSource"]},{type:"CONTROL",name:"FLOATING_COMPONENT_POSITION",element:"host",elementProp:"styleAttributes",displayCondition:"return sdk.component.floating ? !sdk.component.getProps().control.positioning : false;",params:{label:"DOCUMENT_POSITION"}},{type:"CONTROL",name:"DISPLAY",elementProp:"styleAttributes",elementSubProp:"display",element:"host",params:{label:"DOCUMENT_DISPLAY_ON_MOBILE"},displayCondition:"return sdk.appConfig.modelType !== 'RESPONSIVE'"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"image"},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",displayCondition:"return !sdk.component.floating;",params:{indentationType:"PADDING"}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",displayCondition:"return !sdk.component.floating;",params:{indentationType:"MARGIN"}}]}],general:[{type:"CONTROL",name:"ACTIONS",propPath:["handlers"],params:{origin:!0}}]},i18nPropertyPaneModel:{content:[{type:"CONTROL",name:"ACTIONS",propPath:["handlers"],params:{origin:!1}}]},i18nPropPaths:["handlers,[id],actions,[id],params,link","handlers,[id],actions,[id],params,customData"],events:{dispatch:[],listen:[]},defaultProps:{control:{imageSource:{url:""}},adaptiveStyles:{desktop:[{element:"host",styleAttributes:{width:"150px",minWidth:"150px",height:"auto",minHeight:null,paddingTop:"0px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",display:"block"},classes:""},{element:"image",styleAttributes:{background:"transparent",objectFit:"cover",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopWidth:"0px",borderTopColor:"rgb(0, 0, 0)",borderBottomWidth:"0px",borderBottomColor:"rgb(0, 0, 0)",borderLeftWidth:"0px",borderLeftColor:"rgb(0, 0, 0)",borderRightWidth:"0px",borderRightColor:"rgb(0, 0, 0)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"},classes:""}],mobile:[{element:"host",styleAttributes:{width:"150px",minWidth:"150px",height:"auto",minHeight:null,paddingTop:"0px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",display:"block"},classes:""},{element:"image",styleAttributes:{background:"transparent",objectFit:"cover",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopWidth:"0px",borderTopColor:"rgb(0, 0, 0)",borderBottomWidth:"0px",borderBottomColor:"rgb(0, 0, 0)",borderLeftWidth:"0px",borderLeftColor:"rgb(0, 0, 0)",borderRightWidth:"0px",borderRightColor:"rgb(0, 0, 0)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"},classes:""}]}},metaDescription:{sortWeight:66,icon:"/claspo-editor/image-component-icon.svg",label:{en:"Image",ru:"Изображение",uk:"Зображення",es:"Imagen",fr:"Menu déroulant",de:"Bild",it:"Immagine",pt:"Imagem",ro:"Imagine",bg:"Изображение",cs:"Obrázek",el:"Εικόνα",nl:"Afbeelding",pl:"Obraz",sv:"Bild",tr:"Resim",ar:"الصورة",zh:"图像",da:"Billede",he:"תמונה",fi:"Kuva",hi:"इमेज ",hr:"Slika",hu:"Kép",id:"Gambar",ja:"画像",ko:"이미지",no:"Bilde",sk:"Obrázok",sl:"Slika",sr:"Slika"}},waitForResourcesLoad:!0,resourcesPropPaths:[["control","imageSource","url"]]};class Vi extends Di{constructor(){super();var e=this;this.manifest=xi,this.applyStylesRespectingRelativePositioning=()=>{let e=this.processPositioningStyles(this.getProps());this.originalApplyAutoAdaptiveStyles(e),this.fixFloatingImageSize(e)},this.recalculateStylesAfterImageLoad=()=>{this.resourcesLoadedListener=this.services.eventEmitter.on("VIEW_COMPONENT_RESOURCES_LOADED",(()=>{requestAnimationFrame((()=>{this.applyAdaptiveStyles(this.getProps())}))}))},this._getHostNewDimensionsWithStyles=function(){let t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=e.getHostElement();"height width minHeight minWidth maxHeight maxWidth".split(" ").forEach((e=>{t[e]?i.style[e]=t[e]:i.style[e]&&(i.style[e]="")}));let{offsetWidth:n,offsetHeight:o}=i;return{width:n,height:o}},this.processPositioningStyles=e=>{var t,i,n;let o=e.adaptiveStyles;if("fixed"===((null===(t=e.control)||void 0===t?void 0:t.positioningMode)||"fixed"))return o;if(t=this.getEnvironment(),e=(null===(n=null===(i=e.control)||void 0===i?void 0:i.positioning)||void 0===n?void 0:n[t])||{},!("x"in(n=(null==e?void 0:e.diff)||{}))||!("y"in n))return o;i=this.getEnvironment(),({styleAttributes:t}=y(o,i,"host"));let{width:r,height:a}=this._getHostNewDimensionsWithStyles(t);t=f(t,["left","right","top","bottom"]);let s=n.x-r/2;return"left"===e.horizontalPosition?(t.left="".concat(s,"px"),t.right="auto"):"right"===e.horizontalPosition?(t.right="".concat(-r-s,"px"),t.left="auto"):(t.left="calc(50% + ".concat(s,"px)"),t.right="auto"),n=n.y-a/2,"top"===e.verticalPosition?(t.top="".concat(n,"px"),t.bottom="auto"):"bottom"===e.verticalPosition?(t.bottom="".concat(-a-n,"px"),t.top="auto"):(t.top="calc(50% + ".concat(n,"px)"),t.bottom="auto"),function(e,t,i){let n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return Object.assign(Object.assign({},e),{[t]:e[t].map((e=>e.element===i?Object.assign(Object.assign({},e),{styleAttributes:Object.assign({},n)}):e))})}(o,i,"host",t)},this.deleteElementIfPresent=(e,t)=>{(e=e.querySelector(t))&&e.remove()},this.upsertSvg=(e,t)=>{let i=e.querySelector("svg");return i&&i.getAttribute("inline-svg-url")===t?Promise.resolve():(i&&this.deleteElementIfPresent(this.getRootElement(),".svgOverflowContainer"),fetch(t).then((e=>e.text())).then((i=>{var n=document.createElement("template");let o=document.createElement("div");return o.style.overflow="hidden",o.style.width="100%",o.style.height="inherit",o.classList.add("svgOverflowContainer"),n.append(o),n.firstChild.innerHTML=i.trim(),(n=(i=n.firstChild).querySelector("svg")).setAttribute("cl-element","image"),n.setAttribute("inline-svg-url",t),this.componentResourceManager.getPending().decrement(),e.append(i),e})).catch((t=>{this.upsertImage(e,null)})))},this.upsertImage=(e,t)=>{let i=e.querySelector("img");if(i)return i.src=t,Re(i,"load",(()=>{this.componentResourceManager.getPending().decrement()})),Re(i,"error",(()=>{this.componentResourceManager.onResourceLoadFailure(i.src)})),Promise.resolve();let n=new Image;return n.setAttribute("cl-element","image"),n.src=t,Re(n,"load",(()=>{this.componentResourceManager.getPending().decrement()})),Re(n,"error",(()=>{this.componentResourceManager.onResourceLoadFailure(n.src)})),e.append(n),Promise.resolve()},this.applyAdaptiveStyles=e=>{var t;this.applyAutoAdaptiveStyles(e.adaptiveStyles);var i=this.getEnvironment();e=(i=e.adaptiveStyles[i]).find((e=>"host"===e.element));let n=i.find((e=>"image"===e.element)),o={cover:"xMidYMid slice",contain:"xMidYMid meet",none:""},r=(i=this.getElement("image"))&&"svg"===i.nodeName,a=(null===(t=null==n?void 0:n.styleAttributes)||void 0===t?void 0:t.objectFit)&&o.hasOwnProperty(n.styleAttributes.objectFit);r&&a&&(i.setAttribute("preserveAspectRatio",o[n.styleAttributes.objectFit]),"none"===n.styleAttributes.objectFit?(i.setAttribute("width",i.viewBox.baseVal.width+"px"),i.setAttribute("height",i.viewBox.baseVal.height+"px")):(t=i.viewBox.baseVal.width/i.viewBox.baseVal.height,"auto"!==e.styleAttributes.width&&"auto"!==e.styleAttributes.height?(i.setAttribute("height","100%"),i.setAttribute("width","100%")):"auto"===e.styleAttributes.width&&"auto"===e.styleAttributes.height?(i.setAttribute("width",i.viewBox.baseVal.width+"px"),i.setAttribute("height",i.viewBox.baseVal.height+"px")):("auto"===e.styleAttributes.width&&(i.setAttribute("height","100%"),i.setAttribute("width","".concat(Math.round(parseInt(e.styleAttributes.height,10)*t),"px"))),"auto"===e.styleAttributes.height&&(i.setAttribute("width","100%"),i.setAttribute("height","".concat(Math.round(parseInt(e.styleAttributes.width,10)/t),"px"))))))},this.fixFloatingImageSize=e=>{let t=this.getElement("image");t&&(this.getModel().floating&&"auto"===y(e,this.getEnvironment(),"host").styleAttributes.width?t.style.width="":t.style.width="100%")},this.originalApplyAutoAdaptiveStyles=this.applyAutoAdaptiveStyles,this.applyAutoAdaptiveStyles=this.applyStylesRespectingRelativePositioning,this.getRootElement().innerHTML="\n        ".concat("\n        <style>\n            img {\n              display: block;\n              max-height: inherit;\n              height: inherit;\n              min-height: inherit;\n            }\n        </style>\n    ",'\n        <img cl-element="image" draggable="false" alt="">\n    ')}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this.resourcesLoadedListener)||void 0===e||e.off()}connectedCallback(){super.connectedCallback(),this.componentResourceManager.getPending().increment(),this.recalculateStylesAfterImageLoad(),this.observeProps(((e,t)=>{var i;this.applyAutoAdaptiveStyles(t.adaptiveStyles);var n=this.getElement("image");null!==(i=t.control)&&void 0!==i&&i.imageSource.url&&n&&"src"in n&&(n.src=t.control.imageSource.url),i=t.control.imageSource.url,n=e&&e.control.imageSource.url;let o=String(t.control.imageSource.url).endsWith(".svg")?t.control.imageSource.url:null;e=e&&String(e.control.imageSource.url).endsWith(".svg")?e.control.imageSource.url:null,o?o===e?this.applyAdaptiveStyles(t):(this.deleteElementIfPresent(this.getRootElement(),"img"),this.upsertSvg(this.getRootElement(),o).then((()=>{this.applyAdaptiveStyles(t)}))):i?i===n?this.applyAdaptiveStyles(t):(this.deleteElementIfPresent(this.getRootElement(),".svgOverflowContainer"),this.upsertImage(this.getRootElement(),i).then((()=>{this.applyAdaptiveStyles(t)}))):(this.deleteElementIfPresent(this.getRootElement(),".svgOverflowContainer"),this.upsertImage(this.getRootElement(),"".concat(this.services.config.getConfig("staticResourcesUrl"),"img/image-placeholder.svg")).then((()=>{this.applyAdaptiveStyles(t)})))}))}}Vi.define={name:"sys-image",model:xi.name,manifest:xi};var ki={name:"SysTextComponent",componentType:"TEXT",version:"1.0.0",events:{dispatch:[],listen:[]},contextMenuModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"BRING_BACK_FORWARD",element:"host",elementProp:"styleAttributes",elementSubProp:"zIndex"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"BRING_BACK_FORWARD",element:"host",elementProp:"styleAttributes",elementSubProp:"zIndex"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT"}]}],floatingPanelModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"text"}]}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"text"}]}]}],floatingControlsModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host",params:{hideHeight:!0}},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host",params:{hideHeight:!0}},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"}]}],propertyPaneModel:{content:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["hug"]}}},{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"text",isLineSpaceAvailable:!0,isTextTransformAvailable:!0}]},{type:"CONTROL",name:"INSERT_BLOCK",params:[{element:"text",label:"DOCUMENT_TEXT",isLinkAvailable:!0,origin:!0}]},{type:"CONTROL",name:"BACKGROUND",element:"host",elementProp:"styleAttributes",params:{onlyColorSelection:!0}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"text",params:{indentationType:"PADDING"}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"MARGIN"}}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["hug"]}}},{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"text",isLineSpaceAvailable:!0,isTextTransformAvailable:!0}]},{type:"CONTROL",name:"INSERT_BLOCK",params:[{element:"text",label:"DOCUMENT_TEXT",isLinkAvailable:!0,origin:!0}]},{type:"CONTROL",name:"BACKGROUND",element:"host",elementProp:"styleAttributes",params:{onlyColorSelection:!0}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"text",params:{indentationType:"PADDING"}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"MARGIN"}}]}]},autoContrast:[{slave:{element:"text",elementProp:"styleAttributes",elementSubProp:"color"},master:{element:"host",elementProp:"styleAttributes",elementSubProp:"background"},enabledPropPath:["content","textContrastEnabled"]}],i18nPropPaths:["content,text","content,textrollers","content,mergeTags"],i18nPropertyPaneModel:{content:[{type:"CONTROL",name:"INSERT_BLOCK",params:[{element:"text",label:"DOCUMENT_TEXT",isLinkAvailable:!0,origin:!1}]}]},defaultProps:{adaptiveStyles:{desktop:[{element:"host",styleAttributes:{width:"100%",minWidth:null,height:"auto",minHeight:null,marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px"}},{element:"text",styleAttributes:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",color:"rgb(50, 66, 67)",textAlign:"start",lineHeight:"120%",fontWeight:"400",fontSize:"16px",textShadow:"none"},classes:""}],mobile:[{element:"host",styleAttributes:{width:"100%",minWidth:null,height:"auto",minHeight:null,marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px"}},{element:"text",styleAttributes:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",color:"rgb(50, 66, 67)",textAlign:"start",lineHeight:"120%",fontWeight:"400",fontSize:"16px",textShadow:"none"},classes:""}]},content:{text:"Text",textContrastEnabled:!0}},metaDescription:{sortWeight:75,icon:"/claspo-editor/text-component-icon.svg",label:{en:"Text",ru:"Текст",uk:"Текст",es:"Texto",de:"Text",fr:"Texte",it:"Testo",pt:"Texto",ro:"Text",bg:"Текст",cs:"Text",el:"Κείμενο",nl:"Tekst",pl:"Tekst",sv:"Text",tr:"Metin",ar:"النَّص",zh:"文本字段",da:"Tekst",he:"טקסט",fi:"Teksti",hi:"टेक्स्ट",hr:"Tekst",hu:"Szöveg",id:"Teks",ja:"テキスト",ko:"텍스트",no:"Tekst",sk:"Text",sl:"Besedilo",sr:"Tekst"}}};let Fi={maxWidth:"100%",width:"fit-content",display:"inline-flex",fontFamily:"inherit"},Ui={padding:"0 5px",display:"inline-block",maxWidth:"calc(100% - 0px)",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},Bi={display:"inline-flex",justifyContent:"center",minHeight:"fit-content"};class Hi extends Di{constructor(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:ki;super();var t=this;this.processTextRoller=function(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=t.getElement("text");if(i){var n="STATIC"===t.services.config.getConfig("entryModuleType");i.childNodes.forEach((t=>{if(t.nodeType!==Node.TEXT_NODE&&"TEXT_ROLLER"===t.getAttribute("cl-type")){var i=t.getAttribute("cl-id");if(i=e[i])if(n)A(t,i);else{var o=i;(i=document.createElement("span")).classList.add("outer");let e=document.createElement("span");e.classList.add("inner"),e.innerHTML=o.options.at(0)||"Option 1",e.setAttribute("contenteditable","false"),i.appendChild(e);let n=Object.assign(Object.assign({},Ui),o.styleAttributes),r=window.getComputedStyle(t.parentElement);C(e,n),o=b(o.options),C(i,Object.assign(Object.assign({},Bi),{borderRadius:e.style["border-radius"]||Bi.borderRadius,justifyContent:r["text-align"]||Bi.justifyContent}),o,n,parseFloat(r.width)),t.innerHTML="",C(t,Object.assign({},Fi)),t.appendChild(i)}}}))}},this.stylesAppliedToElement=(e,t)=>{"text"===t.element&&t.styleAttributes.textAlign&&"flex"===getComputedStyle(e).display&&(e.style.justifyContent="center"===t.styleAttributes.textAlign?"center":"flex-".concat(t.styleAttributes.textAlign))},this.manifest=e,this.getRootElement().innerHTML='\n      <style>\n        .text {\n          outline: none;\n          min-height: 20px;\n          width: 100%;\n          overflow-wrap: break-word;\n        }\n      </style>\n      \n      <style>\n        [cl-type="TEXT_ROLLER"] {\n          position: relative;\n        }\n\n        .text {\n          align-items: center;\n        }\n        \n        .container--staticTextRoller {\n          display: inline-flex;\n          max-width: 100%;\n          width: fit-content;\n        }\n      \n        .container {\n          display: inline-flex;\n          align-items: center;\n          overflow: hidden;\n          position: relative;\n          height: 100%;\n        }\n\n        .opts {\n          position: absolute;\n          height: 100%;\n          width: 100%;\n          top: 0;\n          left: 0;\n          z-index: 1;\n          padding: 0;\n          margin: 0;\n          display: flex;\n          gap: 1px;\n          flex-direction: column-reverse;\n          transform: translateY(-100%);\n        }\n      \n        .opt {\n          width: 100%;\n          height: 100%;\n          text-align: center;\n          display: inline-flex;\n          justify-content: center;\n        }\n  \n        .opt span {\n         white-space: nowrap;\n         align-items: center;\n         text-overflow: ellipsis;\n         overflow: hidden;\n         width: fit-content;\n         max-width: 100%;\n         padding: 0 2px;\n        }\n      </style>\n\n      <div class="text" cl-element="text" cl-inline-edit="content, text"></div>\n    '}connectedCallback(){super.connectedCallback(),this.observeProps(((e,t)=>{var i,n,o;this.applyAutoAdaptiveStyles(t.adaptiveStyles),null!==(i=t.content)&&void 0!==i&&i.text&&this.getElement("text")&&(this.getElement("text").innerHTML=null===(n=t.content)||void 0===n?void 0:n.text,this.mergeTagsProcessor.process(this.getElement("text"),t.content.mergeTags,this.getModel().id)),this.processTextRoller(null===(o=t.content)||void 0===o?void 0:o.textrollers)})),this.observeShared((()=>{var e;let t=this.getProps();this.processTextRoller(null===(e=t.content)||void 0===e?void 0:e.textrollers)}))}}Hi.define={name:"sys-text",model:ki.name,manifest:ki};var Gi={name:"SysInputComponent",componentType:"INPUT",version:"1.0.0",mappingTypes:["TEXT","INTEGER","FLOAT"],contextMenuModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"BRING_BACK_FORWARD",element:"host",elementProp:"styleAttributes",elementSubProp:"zIndex"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"BRING_BACK_FORWARD",element:"host",elementProp:"styleAttributes",elementSubProp:"zIndex"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT"}]}],floatingPanelModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"input",showPlaceholderControl:!0},{element:"label",displayCondition:"return !!sdk.component.getProps().adaptiveStyles.desktop.find(element => element.element === 'label').params.enabled"}]}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"input",showPlaceholderControl:!0},{element:"label",displayCondition:"return !!sdk.component.getProps().adaptiveStyles.mobile.find(element => element.element === 'label').params.enabled"}]}]}],floatingControlsModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"input"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"input"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"}]}],propertyPaneModel:{content:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",element:"input",elementProp:"styleAttributes",params:{width:{options:["fixed","fill"]},height:{options:["fixed","fill"]}}},{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"input",showPlaceholderControl:!0,isLineSpaceAvailable:!0,isTextTransformAvailable:!0},{element:"label",displayCondition:"return !!sdk.component.getProps().adaptiveStyles.desktop.find(element => element.element === 'label').params.enabled",isLineSpaceAvailable:!0,isTextTransformAvailable:!0}]},{type:"CONTROL",name:"BACKGROUND",element:"input",elementProp:"styleAttributes"},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"input"},{type:"CONTROL",name:"BOX_SHADOW",elementProp:"styleAttributes",element:"input"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"input"},{type:"CONTROL",name:"INPUT_LABEL",elementProp:"params",element:"label"},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"input",params:{indentationType:"PADDING",horizontalOnly:!0}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"MARGIN"}}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",element:"input",elementProp:"styleAttributes",params:{width:{options:["fixed","fill"]},height:{options:["fixed","fill"]}}},{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"input",showPlaceholderControl:!0,isLineSpaceAvailable:!0,isTextTransformAvailable:!0},{element:"label",displayCondition:"return !!sdk.component.getProps().adaptiveStyles.desktop.find(element => element.element === 'label').params.enabled",isLineSpaceAvailable:!0,isTextTransformAvailable:!0}]},{type:"CONTROL",name:"BACKGROUND",element:"input",elementProp:"styleAttributes"},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"input"},{type:"CONTROL",name:"BOX_SHADOW",elementProp:"styleAttributes",element:"input"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"input"},{type:"CONTROL",name:"INPUT_LABEL",elementProp:"params",element:"label"},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"input",params:{indentationType:"PADDING",horizontalOnly:!0}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"MARGIN"}}]}],general:[{type:"CONTROL",name:"TEXT_INPUT",propPath:["content","placeholder"],params:{label:"DOCUMENT_INPUT_PLACEHOLDER"}},{type:"CONTROL",name:"INTEGRATION_FIELD_MAPPING",displayCondition:"const controlName = sdk.component.getProps().control.name; return !['email', 'phone', 'first_name', 'last_name'].includes(controlName);",params:{integrationNamePropPath:["control","integrationName"],groupNamePropPath:["control","groupName"],fieldNamePropPath:["control","fieldName"],fieldTypePropPath:["control","fieldType"],validationPropPath:["control","validation"],placeholderPropPath:["content","placeholder"],labelPropPath:["content","label"],optionsPropPath:["control","options"]}},{type:"CONTROL",name:"INPUT_VALIDATION",params:{validationPropPath:["control","validation"],fieldTypePropPath:["control","fieldType"],required:!0,options:[{label:"not selected",value:null},{label:"email",value:"EMAIL"},{label:"name",value:"SYS_NAME"}],validationErrors:{EMAIL:[{key:"EMAIL_IS_INVALID",value:"Email is invalid"},{key:"MAX_LENGTH_50",value:"Maximum length is 50"}],SYS_NAME:[{key:"NAME_CONTAINS_NUMBERS",value:"Name contains numbers"},{key:"NAME_CONTAINS_FORBIDDEN_CHARACTERS",value:"Name contains forbidden characters"},{key:"MAX_LENGTH_40",value:"Maximum length is 40"}]}}}]},autoContrast:[{slave:{element:"input",elementProp:"styleAttributes",elementSubProp:"color"},master:{element:"input",elementProp:"styleAttributes",elementSubProp:"background"},enabledPropPath:["content","textContrastEnabled"]},{slave:{element:"input",elementProp:"placeholderStyleAttributes",elementSubProp:"color",dimmed:!0},master:{element:"input",elementProp:"styleAttributes",elementSubProp:"background"},enabledPropPath:["content","placeholderTextContrastEnabled"]}],i18nPropertyPaneModel:{content:[{type:"CONTROL",name:"TEXT_INPUT",propPath:["content","placeholder"],params:{label:"DOCUMENT_INPUT_PLACEHOLDER"}}]},focusableElements:["input","label"],events:{dispatch:[],listen:[]},i18nPropPaths:["content,label","content,suggestionLabel","content,placeholder"],i18n:{en:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Up to 3 words comprising up to 3 characters","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Up to 3 words comprising more than 3 characters","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Invalid characters used: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"3 digits maximum","control,validation,validationErrors,MAX_LENGTH_40":"Maximum length is 40","control,validation,validationErrors,MAX_LENGTH_50":"Maximum length is 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Add alphabetical characters","control,validation,validationErrors,EMAIL_IS_INVALID":"Email is invalid","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Emails with this domain are not acceptable. Please use a business email address","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"No more than 4 numbers are allowed","control,validation,validationErrors,REQUIRED":"Required field","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maximum length is 1000","content,label":"Title","content,suggestionLabel":"Did you mean"},ru:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"До 3 слов до 3 символов каждое","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"До 3 слов более 3 символов каждое","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Недопустимые символы: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"До 3 цифр","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Name consisting only of numbers and special characters is not allowed","control,validation,validationErrors,MAX_LENGTH_40":"Максимальная длина 40 символов","control,validation,validationErrors,MAX_LENGTH_50":"Максимальная длина 50 символов","control,validation,validationErrors,EMAIL_IS_INVALID":"Неверно заполнен Email","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Email с таким доменом не может быть использован. Пожалуйста, используйте корпоративный email","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>До 40 алфавитных символов.</p><p>Также допускаются:</p><ul><li>апострофы «'»</li><li>дефисы «-»</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Допускается не более 4 цифры","control,validation,validationErrors,REQUIRED":"Обязательное поле","control,validation,validationErrors,INTEGER_FORMAT":"Значение должно быть целым числом","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Минимальное значение -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Максимальное значение 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Значение должно быть числом с разделителем точкой","control,validation,validationErrors,MAX_LENGTH_1000":"Максимальная длина 1000 символов","content,label":"Заголовок","content,suggestionLabel":"Вы имели в виду"},uk:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"До 3-х слів до 3-х символів кожне","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"До 3-х слів більш ніж 3 символи кожне","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Заборонені символи: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"До 3 цифр","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Додайте алфавітні символи","control,validation,validationErrors,EMAIL_IS_INVALID":"Неправильно заповнено Email","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Email-адреса з таким доменом не може бути використана. Будь ласка, використовуйте корпоративну email-адресу","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>До 40 алфавітних символів.</p><p>Також дозволяються:</p><ul><li>апострофи «'»</li><li>дефіси «-»</li></ul>","control,validation,validationErrors,MAX_LENGTH_40":"Максимальна довжина 40","control,validation,validationErrors,MAX_LENGTH_50":"Максимальна довжина 50","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Допускається не більше 4 цифри","control,validation,validationErrors,REQUIRED":"Обов'язкове поле","control,validation,validationErrors,INTEGER_FORMAT":"Значення має бути цілим числом","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Мінімальне значення -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Максимальне значення 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Значення має бути цілим числом с роздільником крапкою","control,validation,validationErrors,MAX_LENGTH_1000":"Максимальна довжина 1000","content,label":"Заголовок","content,suggestionLabel":"Ви мали на увазi"},es:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Hasta 3 palabras que comprenden hasta 3 caracteres","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Hasta 3 palabras de más de 3 caracteres","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Caracteres no válidos utilizados: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"3 dígitos máximo","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Añadir caracteres alfabéticos","control,validation,validationErrors,EMAIL_IS_INVALID":"Este email no es válido","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"No se aceptan correos electrónicos con este dominio. Utilice una dirección de correo electrónico comercial","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Máximo 40 caracteres alfabéticos.</p><p>Están premitidos:</p><ul><li>apóstrofes (')</li><li>guiones (-)</li></ul>","control,validation,validationErrors,MAX_LENGTH_40":"Longitud máxima es de 40","control,validation,validationErrors,MAX_LENGTH_50":"Logitud máxima es de 50","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"No están permitidos más de 4 números","control,validation,validationErrors,REQUIRED":"Campo obligatorio","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Longitud máxima es de 1000","content,label":"Título","content,suggestionLabel":"Quiso decir"},de:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Bis zu 3 Wörter mit bis zu 3 Zeichen","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Bis zu 3 Wörter mit mehr als 3 Zeichen","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Ungültige Zeichen verwendet: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Maximal 3 Ziffern","control,validation,validationErrors,MAX_LENGTH_40":"Maximale Länge beträgt 40","control,validation,validationErrors,MAX_LENGTH_50":"Maximale Länge beträgt 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Alphabetische Zeichen hinzufügen","control,validation,validationErrors,EMAIL_IS_INVALID":"E-Mail-Adresse ist ungültig","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-Mails mit dieser Domain werden nicht akzeptiert. Bitte verwenden Sie eine geschäftliche E-Mail-Adresse","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Maximal 40 alphabetische Zeichen ohne Leerzeichen, auch Apostrophe und Bindestriche sind erlaubt.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Es sind nicht mehr als 4 Nummern erlaubt","control,validation,validationErrors,REQUIRED":"Pflichtfeld","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maximale Länge beträgt 1000","content,label":"Titel","content,suggestionLabel":"Meinten Sie"},fr:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Jusqu'à 3 mots comprenant jusqu'à 3 caractères","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Jusqu'à 3 mots comprenant plus de 3 caractères","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Caractères non valides utilisés: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"3 chiffres maximum","control,validation,validationErrors,MAX_LENGTH_40":"La longueur maximale est de 40","control,validation,validationErrors,MAX_LENGTH_50":"La longueur maximale est de 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Ajouter des caractères alphabétiques","control,validation,validationErrors,EMAIL_IS_INVALID":"Le courriel est invalide","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Les e-mails avec ce nom de domaine ne sont pas acceptables. Veuillez utiliser une adresse e-mail professionnelle","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Max 40 caractères alphabétiques sans espaces. Également autorisés : apostrophes, tirets.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Pas plus de 4 numéros sont autorisés","control,validation,validationErrors,REQUIRED":"Champs requis","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"La longueur maximale est de 1000","content,label":"Titre","content,suggestionLabel":"Vouliez-vous dire"},it:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Fino a 3 parole composte da un massimo di 3 caratteri","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Fino a 3 parole composte da più di 3 caratteri","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Caratteri non validi utilizzati: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"3 cifre massimo","control,validation,validationErrors,MAX_LENGTH_40":"La lunghezza massima è 40","control,validation,validationErrors,MAX_LENGTH_50":"La lunghezza massima è 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Aggiunga caratteri alfabetici","control,validation,validationErrors,EMAIL_IS_INVALID":"L'email non è valida","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Le email con questo dominio non sono accettate. Utilizzare un indirizzo email aziendale","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Massimo 40 caratteri alfabetici senza spazi. Consentiti anche apostrofi e trattini","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Non sono ammessi più di 4 numeri","control,validation,validationErrors,REQUIRED":"Campo obbligatorio","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"La lunghezza massima è 1000","content,label":"Titolo","content,suggestionLabel":"Intendevi"},pt:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Até 3 palavras com até 3 caracteres","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Até 3 palavras com mais de 3 caracteres","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Caracteres inválidos usados: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Máximo de 3 dígitos","control,validation,validationErrors,MAX_LENGTH_40":"Comprimento máximo de 40","control,validation,validationErrors,MAX_LENGTH_50":"Comprimento máximo de 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Adicionar caracteres alfabéticos","control,validation,validationErrors,EMAIL_IS_INVALID":"Email inválido","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Os emails com este domínio não são aceites. Utilize um endereço de email profissional","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Máximo de 40 caracteres alfabéticos sem espaços. Também permitido: apóstrofes, hífens","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Não são permitidos mais de 4 espaços","control,validation,validationErrors,REQUIRED":"Campo obrigatório","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Comprimento máximo de 1000","content,label":"Título","content,suggestionLabel":"Quiz dizer"},ro:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Până la 3 cuvinte care să conțină cel mult 3 caractere","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Până la 3 cuvinte care să conțină mai mult de 3 caractere","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Caractere nevalide folosite: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Cel mult 3 cifre","control,validation,validationErrors,MAX_LENGTH_40":"Lungimea maximă este de 40","control,validation,validationErrors,MAX_LENGTH_50":"Lungimea maximă este de 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Adăugați caractere alfabetice","control,validation,validationErrors,EMAIL_IS_INVALID":"Emailul nu este valid","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-mailurile cu acest domeniu nu sunt acceptabile. Vă rugăm să folosiți o adresă de e-mail de afaceri","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Cel mult 40 de caractere alfabetice fără spații. Sunt permise și apostrofuri, cratime.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Nu sunt permise mai mult de 4 cifre","control,validation,validationErrors,REQUIRED":"Câmp obligatoriu","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Lungimea maximă este de 1000","content,label":"Titlu","content,suggestionLabel":"Ai vrut să spui"},bg:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"До 3 думи, съдържащи до 3 символа","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"До 3 думи, състоящи се от повече от 3 символа","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Използвани са невалидни: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"3 цифри максимум","control,validation,validationErrors,MAX_LENGTH_40":"Максималната дължина е 40","control,validation,validationErrors,MAX_LENGTH_50":"Максималната дължина е 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Добави азбучни символи","control,validation,validationErrors,EMAIL_IS_INVALID":"Имейлът е невалиден","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Имейли с този домейн са неприемливи. Моля, използвайте бизнес имейл адрес.","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Максимум 40 азбучни знака без интервали. Допустими са още: апострофи, тирета.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Не са допустими повече от 4 цифри","control,validation,validationErrors,REQUIRED":"Изисквано поле","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Максималната дължина е 1000","content,label":"Заглавие","content,suggestionLabel":"Имахте предвид"},cs:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Až 3 slova obsahující až 3 znaky","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Až 3 slova obsahující více než 3 znaky","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Použité neplatné znaky: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Maximum 3 číslice","control,validation,validationErrors,MAX_LENGTH_40":"Maximální délka je 40","control,validation,validationErrors,MAX_LENGTH_50":"Maximální délka je 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Přidejte znaky abecedy","control,validation,validationErrors,EMAIL_IS_INVALID":"E-mail je neplatný","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-maily s touto doménou nejsou přípustné. Použijte prosím firemní e-mailovou adresu","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Nanejvýš 40 znaků abecedy bez mezer. Také jsou povoleny: apostrofy, pomlčky.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Nejsou povolena více než 4 čísla","control,validation,validationErrors,REQUIRED":"Vyžadované pole","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maximální délka je 1000","content,label":"Titul","content,suggestionLabel":"Mysleli jste"},el:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Μέχρι 3 λέξεις που περιέχουν μέχρι 3 χαρακτήρες","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Μέχρι 3 λέξεις που περιέχουν περισσότερους από 3 χαρακτήρες","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Χρησιμοποιήθηκαν άκυροι χαρακτήρες: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"3 ψηφία μάξιμουμ","control,validation,validationErrors,MAX_LENGTH_40":"Το μέγιστο μήκος είναι 40","control,validation,validationErrors,MAX_LENGTH_50":"Το μέγιστο μήκος είναι 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Πρόσθεσε αλφαβητικούς χαρακτήρες","control,validation,validationErrors,EMAIL_IS_INVALID":"Η ηλεκτρονική διεύθυνση είναι α΄κυρη","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Τα email με αυτόν τον τομέα δεν είναι αποδεκτά. Παρακαλούμε χρησιμοποιήστε μια επαγγελματική διεύθυνση ηλεκτρονικού ταχυδρομείου","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Μάξιμουμ 40 αλφαβητικοί χαρακτήρες χωρίς κενά. Επίσης επιτρέπονται: απόστροφοι, παύλες","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Δεν επιτρέπονται πάνω από 4 αριθμοί","control,validation,validationErrors,REQUIRED":"Απαιτητό πεδίο","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Το μέγιστο μήκος είναι 1000","content,label":"Τίτλος","content,suggestionLabel":"Εννοούσες"},nl:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Maximaal 3 woorden bestaande uit maximaal 3 tekens","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Maximaal 3 woorden bestaande uit meer dan 3 tekens","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Ongeldige tekens gebruikt: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Maximaal 3 cijfers","control,validation,validationErrors,MAX_LENGTH_40":"Maximale lengte is 40","control,validation,validationErrors,MAX_LENGTH_50":"Maximale lengte is 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Voeg alfabetische tekens toe","control,validation,validationErrors,EMAIL_IS_INVALID":"E-mail is ongeldig","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-mails met dit domein worden niet geaccepteerd. Gebruik een zakelijk e-mailadres","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Max. 40 alfabetische tekens zonder spaties. Ook toegestaan: apostrofs, koppeltekens.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Niet meer dan 4 cijfers toegestaan","control,validation,validationErrors,REQUIRED":"Verplicht veld","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maximale lengte is 1000","content,label":"Titel","content,suggestionLabel":"Bedoelde u"},pl:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Do 3 słów złożonych z nie więcej niż 3 znaków","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Do 3 słów złożonych z ponad 3 znaków","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Użyto nieprawidłowych znaków: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Maksymalnie 3 cyfry","control,validation,validationErrors,MAX_LENGTH_40":"Maksymalna długość to 40","control,validation,validationErrors,MAX_LENGTH_50":"Maksymalna długość to 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Wszystkie znaki alfabetu","control,validation,validationErrors,EMAIL_IS_INVALID":"E-mail jest nieprawidłowy","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Adresy e-mail z tej domeny nie są akceptowane. Użyj firmowego adresu e-mail","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Maks. 40 znaków alfabetu be spacji. Dozwolone także: apostrofy, łączniki.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Dozwolone są maksymalnie 4 cyfry","control,validation,validationErrors,REQUIRED":"Wymagane pole","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maksymalna długość to 1000","content,label":"Tytuł","content,suggestionLabel":"Czy miałeś(-aś) na myśli"},sv:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Upp till 3 ord med upp till 3 tecken","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Upp till 3 ord med mer än 3 tecken","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Ogiltiga tecken används: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Max 3 siffror","control,validation,validationErrors,MAX_LENGTH_40":"Maximal längd är 40","control,validation,validationErrors,MAX_LENGTH_50":"Maximal längd är 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Lägg till alfabetiska tecken","control,validation,validationErrors,EMAIL_IS_INVALID":"Ogiltig e-post","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-postadresser från denna domän är inte godkända. Var vänlig använd en företagsadress","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Max 40 alfabetiska tecken utan mellanslag.Också tillåtet: apostrofer, bindestreck.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Max 4 siffror är tillåtna","control,validation,validationErrors,REQUIRED":"Obligatoriskt fält","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maximal längd är 1000","content,label":"Tytuł","content,suggestionLabel":"Menade du"},tr:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"3 karaktere kadar en fazla 3 kelime","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"3'ten fazla karakter içeren en fazla 3 kelime","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Geçersiz karakterler kullanıldı: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Maksimum 3 hane","control,validation,validationErrors,MAX_LENGTH_40":"Maksimum uzunluk 40","control,validation,validationErrors,MAX_LENGTH_50":"Maksimum uzunluk 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Alfabetik karakterler ekle","control,validation,validationErrors,EMAIL_IS_INVALID":"E-posta geçersiz","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Bu alan adına sahip e-postalar kabul edilmez. Lütfen bir iş e-posta adresi kullanın","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Boşluksuz en fazla 40 alfabetik karakter. Ayrıca şunlara izin verilir: kesme işaretleri, tireler.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"4'ten fazla sayıya izin verilmez","control,validation,validationErrors,REQUIRED":"Gerekli alan","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maksimum uzunluk 1000","content,label":"Başlık","content,suggestionLabel":"Mi demek istediniz"},ar:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"ما يصل إلى 3 كلمات تتكون من 3 أحرف","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"ما يصل إلى 3 كلمات تتكون من أكثر من 3 أحرف","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":"الأحرف غير الصالحة المستخدَمة {{characters}}","control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"3 أرقام كحد أقصى","control,validation,validationErrors,MAX_LENGTH_40":"الحد الأقصى للطول هو 40","control,validation,validationErrors,MAX_LENGTH_50":"الحد الأقصى للطول هو 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"أضف أحرفًا أبجدية","control,validation,validationErrors,EMAIL_IS_INVALID":"البريد الإلكتروني غير صالح","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"رسائل البريد الإلكتروني من هذا المجال غير مقبولة. الرجاء استخدام عنوان بريد إلكتروني خاص بالعمل","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"40 حرفًا أبجديًا كحد أقصى، يُسمح أيضًا: المسافات والفواصل والفواصل العليا والشرطات.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"لا يسمح بأكثر من 4 أرقام","control,validation,validationErrors,REQUIRED":"الحقل المطلوب","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"الحد الأقصى للطول هو 1000","content,label":"عنوان","content,suggestionLabel":"هل تقصد"},zh:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"最多 3 个单词，每个单词最多 3 个字符","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"最多 3 个超过 3 个字符的单词","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'使用了无效的字符: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"最多 3 位数","control,validation,validationErrors,MAX_LENGTH_40":"最大长度为 40","control,validation,validationErrors,MAX_LENGTH_50":"最大长度为 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"添加字母字符","control,validation,validationErrors,EMAIL_IS_INVALID":"电子邮箱无效","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"不接受含有此域名的电子邮箱，请使用企业电子邮箱地址","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"No more than 4 numbers are allowed","control,validation,validationErrors,REQUIRED":"必填字段","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"最大长度为 1000","content,label":"Title","content,suggestionLabel":"您是想说 吗"},da:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Op til 3 ord med op til 3 tegn","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Op til 3 ord med mere end 3 tegn","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Ugyldige tegn brugt: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Højest 3 cifre","control,validation,validationErrors,MAX_LENGTH_40":"Maksimum længde er 40","control,validation,validationErrors,MAX_LENGTH_50":"Maksimum længde er 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Tilføj alfabetiske tegn","control,validation,validationErrors,EMAIL_IS_INVALID":"E-mail er ugyldig","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-mails med dette domæne er ikke acceptable. Brug venligst en virksomheds-e-mailadresse","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Maks. 40 alfabetiske tegn.</p><p>Også tilladt:</p><ul><li>apostrof (')</li><li>bindestreger (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Der er ikke tilladt mere end 4 pladser","control,validation,validationErrors,REQUIRED":"Påkrævet felt","control,validation,validationErrors,INTEGER_FORMAT":"Værdien skal være heltal","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimumsværdien er -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maksimal værdi er 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Værdien skal være tal med punktafgrænser","control,validation,validationErrors,MAX_LENGTH_1000":"Maksimum længde er 1000","content,label":"Titel","content,suggestionLabel":"Mente du"},he:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"עד 3 מילים הכוללות עד 3 תווים","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"עד 3 מילים הכוללות יותר מ-3 תווים","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'שימוש בתווים לא חוקיים "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"מקסימום 3 ספרות","control,validation,validationErrors,MAX_LENGTH_40":"אורך מקסימלי הוא 40","control,validation,validationErrors,MAX_LENGTH_50":"אורך מקסימלי הוא 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"הוסיפו תווים אלפבתיים","control,validation,validationErrors,EMAIL_IS_INVALID":"אימייל לא תקין","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":'אימיילים עם דומיין זה אינם קבילים. אנא השתמשו בכתובת דוא"ל עסקית',"control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"אסור יותר מ-4 רווחים","control,validation,validationErrors,REQUIRED":"שדה נדרש","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"אורך מקסימלי הוא 1000","content,label":"Title","content,suggestionLabel":"האם התכוונתם ל"},fi:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Enintään kolme sanaa, joissa on korkeintaan kolme merkkiä","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Enintään kolme sanaa, joissa on yli kolme merkkiä","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Virheellisiä merkkejä käytettiin "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Korkeintaan kolme lukua","control,validation,validationErrors,MAX_LENGTH_40":"Maksimipituus on 40","control,validation,validationErrors,MAX_LENGTH_50":"Maksimipituus on 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Lisää aakkosellisia merkkejä","control,validation,validationErrors,EMAIL_IS_INVALID":"Sähköposti on virheellinen","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Tämän verkkotunnuksen sähköposteja ei hyväksytä. Käytä yritys- tai työsähköpostia","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Enintään 4 numeroa sallitaan","control,validation,validationErrors,REQUIRED":"Vaadittu kenttä","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maksimipituus on 1000","content,label":"Title","content,suggestionLabel":"Tarkoititko tätä:"},hi:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"अधिकतम 3 अक्षर वाले 3 शब्द","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"3 से अधिक अक्षरों वाले 3 शब्द तक","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'अमान्य वर्णों का उपयोग किया गया "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"अधिकतम 3 संख्या","control,validation,validationErrors,MAX_LENGTH_40":"अधिकतम लंबाई 40 है","control,validation,validationErrors,MAX_LENGTH_50":"अधिकतम लंबाई 50 है","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"वर्णमाला के वर्ण जोड़ें","control,validation,validationErrors,EMAIL_IS_INVALID":"ईमेल अमान्य है","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"इस डोमेन वाले ईमेल स्वीकार्य नहीं हैं. कृपया बिज़नेस ईमेल एड्रेस इस्तेमाल करें","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"अधिकतम 4 नंबर की अनुमति है","control,validation,validationErrors,REQUIRED":"आवश्यक फील्ड","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"अधिकतम लंबाई 1000 है","content,label":"Title","content,suggestionLabel":"क्या आपका मतलब"},hr:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Najviše 3 riječi koje sadrže do 3 znaka","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Najviše 3 riječi koje sadrže više od 3 znaka","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Korišteni su nevažeći znakovi "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Najviše 3 znamenke","control,validation,validationErrors,MAX_LENGTH_40":"Maksimalna duljina je 40","control,validation,validationErrors,MAX_LENGTH_50":"Maksimalna duljina je 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Dodajte abecedne znakove","control,validation,validationErrors,EMAIL_IS_INVALID":"E-mail nije ispravan","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-mail adrese s ovom domenom nisu prihvatljive. Molimo koristite poslovnu e-mail adresu","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Dopuštena su najviše 4 broja","control,validation,validationErrors,REQUIRED":"Obavezno polje","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maksimalna duljina je 1000","content,label":"Title","content,suggestionLabel":"Jeste li mislili"},hu:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Legfeljebb 3 szó, amely legfeljebb 3 karakterből áll","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Legfeljebb 3 szó, amely több mint 3 karakterből áll","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Érvénytelen karakterek használata "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Legfeljebb három számjegy","control,validation,validationErrors,MAX_LENGTH_40":"A maximális hossz 40","control,validation,validationErrors,MAX_LENGTH_50":"A maximális hossz 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Betűk hozzáadása","control,validation,validationErrors,EMAIL_IS_INVALID":"Az e-mail érvénytelen","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Az ezzel a domainnel küldött e-mailek nem fogadhatók el. Kérjük, használjon üzleti e-mail címet","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Legfeljebb 4 szám megengedett","control,validation,validationErrors,REQUIRED":"Kötelező mező","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"A maximális hossz 1000","content,label":"Title","content,suggestionLabel":"Úgy értetted, hogy"},id:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Hingga 3 kata yang terdiri dari hingga 3 karakter","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Hingga 3 kata yang terdiri lebih dari 3 karakter","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Karakter tidak valid yang digunakan "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Maksimal 3 digit","control,validation,validationErrors,MAX_LENGTH_40":"Panjang maksimum adalah 40","control,validation,validationErrors,MAX_LENGTH_50":"Panjang maksimum adalah 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Tambahkan karakter alfabet","control,validation,validationErrors,EMAIL_IS_INVALID":"Email tidak valid","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Email dengan domain ini tidak dapat diterima. Silakan gunakan alamat email bisnis","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Tidak lebih dari 4 angka yang diizinkan","control,validation,validationErrors,REQUIRED":"Bidang yang wajib diisi","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Panjang maksimum adalah 1000","content,label":"Title","content,suggestionLabel":"Apakah yang Anda maksud adalah"},ja:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"最大3文字の単語を最大3つまで","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"3文字を超える単語を最大3つまで","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'無効な文字が使用されています "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"最大3桁","control,validation,validationErrors,MAX_LENGTH_40":"最長40文字です","control,validation,validationErrors,MAX_LENGTH_50":"最長50文字です","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"アルファベット文字を追加","control,validation,validationErrors,EMAIL_IS_INVALID":"メールアドレスが無効です","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"このドメインのメールは受け付けられません。ビジネス用のメールアドレスをお使いください。","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"数字は4つまでしか使用できません","control,validation,validationErrors,REQUIRED":"必須フィールド","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"最長1000文字です","content,label":"Title","content,suggestionLabel":"ということですか"},ko:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"최대 3자로 구성된 단어 최대 3개까지","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"3자 이상으로 구성된 단어 최대 3개까지","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'"{{characters}}"(이)가 사용된 잘못된 문자',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"최대 3자리","control,validation,validationErrors,MAX_LENGTH_40":"최대 길이 40","control,validation,validationErrors,MAX_LENGTH_50":"최대 길이 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"알파벳 문자 추가","control,validation,validationErrors,EMAIL_IS_INVALID":"유효하지 않은 이메일","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"이 도메인이 사용된 이메일은 허용되지 않습니다. 업무용 이메일 주소를 사용하십시오.","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"숫자는 4개 이상 사용할 수 없습니다","control,validation,validationErrors,REQUIRED":"필수 칸","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"최대 길이 1000","content,label":"Title","content,suggestionLabel":"(을)를 의미하신 건가요"},no:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Opptil tre ord bestående av opptil tre tegn","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Opptil tre ord med mer enn tre tegn","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Ugyldige tegn brukt "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Maks. tre sifre","control,validation,validationErrors,MAX_LENGTH_40":"Maksimal lengde er 40","control,validation,validationErrors,MAX_LENGTH_50":"Maksimal lengde er 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Legg til alfabetiske tegn","control,validation,validationErrors,EMAIL_IS_INVALID":"E-posten er ugyldig","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-post med dette domenet er ikke akseptabelt. Bruk en bedrifts-e-postadresse","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Ikke mer enn fire tall er tillatt","control,validation,validationErrors,REQUIRED":"Obligatorisk felt","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maksimal lengde er 1000","content,label":"Title","content,suggestionLabel":"Mente du"},sk:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Maximálne 3 slová obsahujúce až 3 znaky","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Maximálne 3 slová obsahujúce viac ako 3 znaky","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Použité neplatné znaky "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Maximálne 3 číslice","control,validation,validationErrors,MAX_LENGTH_40":"Maximálna dĺžka je 40","control,validation,validationErrors,MAX_LENGTH_50":"Maximálna dĺžka je 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Pridajte abecedné znaky","control,validation,validationErrors,EMAIL_IS_INVALID":"E-mail je neplatný","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-maily s touto doménou nie sú prijateľné. Použite firemnú e-mailovú adresu","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Nie sú povolené viac ako 4 číslice","control,validation,validationErrors,REQUIRED":"Povinné pole","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maximálna dĺžka je 1000","content,label":"Title","content,suggestionLabel":"Mali ste na mysli slovo"},sl:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Do 3 besede, ki vsebujejo do 3 znake","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Do 3 besede, ki vsebujejo več kot 3 znake","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Uporabljeni neveljavni znaki "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Največ 3 števke","control,validation,validationErrors,MAX_LENGTH_40":"Največja dolžina je 40","control,validation,validationErrors,MAX_LENGTH_50":"Največja dolžina je 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Dodajte abecedne znake","control,validation,validationErrors,EMAIL_IS_INVALID":"E-poštni naslov je neveljaven","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-poštna sporočila s to domeno niso sprejemljiva. Uporabite poslovni e-poštni naslov.","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Dovoljene so največ 4 številke","control,validation,validationErrors,REQUIRED":"Obvezno polje","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Največja dolžina je 1000","content,label":"Title","content,suggestionLabel":"Ste mislili"},sr:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Do 3 reči koje sadrže do 3 znaka","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Do 3 reči koje sadrže više od 3 znaka","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Korišćeni su nevažeći znakovi "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"3 cifre maksimalno","control,validation,validationErrors,MAX_LENGTH_40":"Maksimalna dužina je 40","control,validation,validationErrors,MAX_LENGTH_50":"Maksimalna dužina je 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Dodajte abecedne znakove","control,validation,validationErrors,EMAIL_IS_INVALID":"E-pošta je nevažeća","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Adrese e-pošte sa ovim domenom nisu prihvatljive. Koristite poslovnu adresu e-pošte","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Nije dozvoljeno više od 4 broja","control,validation,validationErrors,REQUIRED":"Obavezno polje","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maksimalna dužina je 1000","content,label":"Title","content,suggestionLabel":"Da li ste mislili"}},defaultProps:{content:{placeholder:"Placeholder",label:"Title",suggestionLabel:"Did you mean",textContrastEnabled:!0,placeholderTextContrastEnabled:!0},control:{name:"email",integrationName:"email",defaultValue:"",validation:{required:!0,validator:"EMAIL",validationErrors:{EMAIL_IS_INVALID:"Email is invalid",REQUIRED:"This field can't be empty"}}},adaptiveStyles:{desktop:[{element:"host",styleAttributes:{marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px"},classes:""},{element:"input",styleAttributes:{width:"100%",minWidth:null,height:"35px",minHeight:"35px",background:"rgb(255, 255, 255)",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopWidth:"1px",borderTopColor:"rgba(0, 0, 0, 0.1)",borderBottomWidth:"1px",borderBottomColor:"rgba(0, 0, 0, 0.1)",borderLeftWidth:"1px",borderLeftColor:"rgba(0, 0, 0, 0.1)",borderRightWidth:"1px",borderRightColor:"rgba(0, 0, 0, 0.1)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",boxShadow:"none",color:"rgb(0, 0, 0)",textAlign:"start",lineHeight:"120%",fontWeight:"400",fontSize:"16px",textShadow:"none",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"10px",paddingRight:"10px"},placeholderStyleAttributes:{color:"rgb(81, 81, 81)"},classes:""},{element:"label",styleAttributes:{color:"rgb(0, 0, 0)",textAlign:"start",lineHeight:"120%",fontWeight:"400",fontSize:"16px",textShadow:"none"},params:{enabled:!1,position:"TOP",margin:5},classes:""}],mobile:[{element:"host",styleAttributes:{marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px"},classes:""},{element:"input",styleAttributes:{width:"100%",minWidth:null,height:"35px",minHeight:"35px",background:"rgb(255, 255, 255)",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopWidth:"1px",borderTopColor:"rgba(0, 0, 0, 0.1)",borderBottomWidth:"1px",borderBottomColor:"rgba(0, 0, 0, 0.1)",borderLeftWidth:"1px",borderLeftColor:"rgba(0, 0, 0, 0.1)",borderRightWidth:"1px",borderRightColor:"rgba(0, 0, 0, 0.1)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",boxShadow:"none",color:"rgb(0, 0, 0)",textAlign:"start",lineHeight:"120%",fontWeight:"400",fontSize:"16px",textShadow:"none",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"10px",paddingRight:"10px"},placeholderStyleAttributes:{color:"rgb(81, 81, 81)"},classes:""},{element:"label",styleAttributes:{color:"rgb(0, 0, 0)",textAlign:"start",lineHeight:"120%",fontWeight:"400",fontSize:"16px",textShadow:"none"},params:{enabled:!1,position:"TOP",margin:5},classes:""}]}},metaDescription:{sortWeight:40,icon:"/claspo-editor/email-input-component-icon.svg",label:{en:"Text input",ru:"Текстовое поле",uk:"Текстове поле",es:"Entrada de texto",fr:"Saisie de texte",de:"Text-Input",it:"Input testo",pt:"Introdução de texto",ro:"Text input",bg:"Text input",cs:"Text input",el:"Text input",nl:"Text input",pl:"Text input",sv:"Text input",tr:"Text input",ar:"Text input",zh:"文本输入",da:"Tekst input",he:"הזנת טקסט",fi:"Tekstinsyöttö",hi:"टेक्स्ट इनपुट",hr:"Unos teksta",hu:"Szövegbevitel",id:"Masukan teks",ja:"テキスト入力",ko:"텍스트 입력",no:"Tekstinntasting",sk:"Zadávanie textu",sl:"Vnos besedila",sr:"Unos teksta"}}};class Wi{constructor(){this.emailSuggestionOverlayBackdrop=this.lastEmailSuggestionCheckedValue=null}suggestEmail(e,t,i,n,o,r,a,s){!t.value||this.lastEmailSuggestionCheckedValue===t.value&&!i||e.control.validation&&e.control.validation.restrictFreeDomains||(this.lastEmailSuggestionCheckedValue=t.value,r.elementRef.classList.contains("invalid")||Wi.mostPopularProviders.includes(t.value.toLowerCase().split("@")[1])||(i=e=>{this.createSuggestionOverlay(n,e,t,r,s),Wi.preventSubmit(o)},(e=Wi.suggestEmailSync(t.value))?i(e):(r.setPending(!0),this.checkSuggestionOnBackend(i,t,r,a))))}emailValueChanged(){this.lastEmailSuggestionCheckedValue=null}hideEmailSuggestion(){this.emailSuggestionOverlayBackdrop&&this.emailSuggestionOverlayBackdrop.click()}createSuggestionOverlay(e,t,i,n,o){this.hideEmailSuggestion(),setTimeout((()=>{this.emailSuggestionOverlayBackdrop=e.overlay.createMenuOverlay({triggerElement:i,overlayStyles:N(e.overlay.getMenuOverlayContentClassName()),createOverlayContent:(e,i)=>{Wi.createOverlayContent(t,e,i,n,o)},overlayWidth:220,overlayHeight:90,positionByDefault:"top",isHorizontallyCentered:!0,isBackdropDisabledOnUI:!0,onDestroy:()=>{this.emailSuggestionOverlayBackdrop=null},offset:10}).backdrop}),50)}checkSuggestionOnBackend(e,t,i,n){return fetch("".concat(n,"forms/v1/suggestion/email?value=").concat(t.value),{method:"GET",credentials:"same-origin",headers:{"Content-Type":"text/plain",Accept:"application/json, text/plain, */*"}}).then((e=>{if(!e.ok)throw Error();return e.text()})).then((t=>{t&&e(t),i.setPending(!1)})).catch((e=>{i.setPending(!1)}))}static createOverlayContent(e,t,i,n,o){var r=o();(o=document.createElement("div")).classList.add("suggestion-text-container");let a=document.createElement("div");a.classList.add("did-you-mean-text"),a.innerHTML=r["content,suggestionLabel"],(r=document.createElement("div")).classList.add("suggestion-text"),r.innerHTML="".concat(e,"?");let s=document.createElement("div");s.classList.add("accept-button");let l=document.createElement("div");l.classList.add("deny-button"),o.appendChild(a),o.appendChild(r),s.addEventListener("click",(()=>{let i=n.value.split("@")[0];n.setValue("".concat(i,"@").concat(e)),t.click()})),l.addEventListener("click",(()=>{t.click()})),i.appendChild(o),i.appendChild(s),i.appendChild(l)}static preventSubmit(e){e.setPreventSubmit(!0),setTimeout((()=>e.setPreventSubmit(!1)),200)}static suggestEmailSync(e){if(e=e.toLowerCase().split("@")[1]||"",-1<Wi.mostPopularProviders.indexOf(e))return null;var t=Wi.getSuggestionAfterDotChecks(e);if(t)return t;if(2!==(e=e.split(".")).length)return null;var i=e[1];let n=e[0];var o=Wi.mostPopularProviders.map((e=>e.replace(".".concat(Wi.providersListTopLevelDomain),"")));e=Wi.getLevenshteinDistance(Wi.providersListTopLevelDomain,i);var r=o.map((e=>Wi.getLevenshteinDistance(e,n)));return t=Math.min(...r),2<e||2<t?null:(o=Wi.getAllMinimalDistanceDomains(t,r,o),i=Wi.isTwoCharsWrongOrder([Wi.providersListTopLevelDomain],i),r=Wi.isTwoCharsWrongOrder(o,n),1>=e&&1>=t?"".concat(o[0],".").concat(Wi.providersListTopLevelDomain):1<e&&1>=t?i?"".concat(o[0],".").concat(Wi.providersListTopLevelDomain):null:1>=e&&1<t?r?"".concat(r,".").concat(Wi.providersListTopLevelDomain):null:2===e&&2===t&&i&&r?"".concat(r,".").concat(Wi.providersListTopLevelDomain):null)}static getSuggestionAfterDotChecks(e){return Wi.mostPopularProviders.find((t=>Wi.isDotLocatedInWrongPlace(t,e)))}static isDotLocatedInWrongPlace(e,t){if(t)return t.replace(".","")===e.replace(".","")}static getLevenshteinDistance(e,t){if(!e.length)return t.length;if(!t.length)return e.length;let i=[];for(let n=0;n<=t.length;n++){i[n]=[n];for(let o=1;o<=e.length;o++)i[n][o]=0===n?o:Math.min(i[n-1][o]+1,i[n][o-1]+1,i[n-1][o-1]+(e[o-1]===t[n-1]?0:1))}return i[t.length][e.length]}static getAllMinimalDistanceDomains(e,t,i){let n=t.reduce(((t,i,n)=>(i===e&&t.push(n),t)),[]);return i.filter(((e,t)=>n.includes(t)))}static isTwoCharsWrongOrder(e,t){return e.find((e=>{let i=Wi.findIndexOfFirstDiffInTwoStrings(t,e);return t.charAt(i)===e.charAt(i+1)&&e.charAt(i)===t.charAt(i+1)}))}static findIndexOfFirstDiffInTwoStrings(e,t){return[...e].findIndex(((e,i)=>e!==t[i]))}}Wi.providersListTopLevelDomain="com",Wi.mostPopularProviders="gmail.com yahoo.com outlook.com hotmail.com aol.com protonmail.com icloud.com mail.com tutanota.com gmx.com live.com yandex.com zoho.com".split(" ");class ji{static emailValidationCb(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";try{if(!/^[_A-Za-z0-9-\p{L}]+(\.[_A-Za-z0-9-\p{L}]+)*(\+.*)?@([A-Za-z0-9-\p{L}]+(\.[A-Za-z0-9\p{L}]+)+)+$/u.test(e))return{isValid:!1,errorKey:ji.validationErrorKeys.EMAIL_IS_INVALID}}catch(t){if(!/^[_A-Za-z0-9-]+(\.[_A-Za-z0-9-]+)*(\+.*)?@([A-Za-z0-9-]+(\.[A-Za-z0-9]+)+)+$/.test(e))return{isValid:!1,errorKey:ji.validationErrorKeys.EMAIL_IS_INVALID}}return{isValid:50>=e.length,errorKey:ji.validationErrorKeys.MAX_LENGTH_50}}static nameValidationCb(){let e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").trim(),t=(e||"").split(" ");return 3<t.filter((e=>3<e.length)).length?{isValid:!1,errorKey:ji.validationErrorKeys.MORE_THAN_THREE_LONG_WORDS}:3<t.filter((e=>3>=e.length)).length?{isValid:!1,errorKey:ji.validationErrorKeys.MORE_THAN_THREE_SHORT_WORDS}:ji.lastNameValidator(e)||{value:e,isValid:!0}}static lastNameValidator(e){if(40<(e=e.trim()).length)return{isValid:!1,errorKey:ji.validationErrorKeys.MAX_LENGTH_40};var t=ji.sanitizeExceptDoubleQuotes(e);return t&&t.length?{isValid:!1,errorKey:ji.validationErrorKeys.CONTAINS_FORBIDDEN_CHARACTERS,forbiddenChar:t[0][0]}:(t=ji.forbiddenCharactersValidator(e,"[\\d\\.\\s\\p{Alphabetic}".concat(" .'’ʼ`´ʹʻʽʾʿˈˊˮʹ΄՚᾽᾿‘‛′‵Ꞌꞌ＇-","]"))).length?{isValid:!1,errorKey:ji.validationErrorKeys.CONTAINS_FORBIDDEN_CHARACTERS,forbiddenChar:[...new Set(t)].join("")}:ji.nameContainsDotValidator(e)?{isValid:!1,errorKey:ji.validationErrorKeys.CONTAINS_FORBIDDEN_CHARACTERS,forbiddenChar:""}:ji.nameContainsMoreThanThreeDigitsValidator(e)?{isValid:!1,errorKey:ji.validationErrorKeys.NAME_CONTAINS_MORE_THAN_3_DIGITS}:ji.nameConsistingOfAlphabeticCharactersValidator(e)?{isValid:!1,errorKey:ji.validationErrorKeys.NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED}:(e=ji.symbolPositionValidator(e))&&e.length?{isValid:!1,errorKey:ji.validationErrorKeys.CONTAINS_FORBIDDEN_CHARACTERS,forbiddenChar:e[0][0]}:null}static lastNameValidationCb(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return ji.lastNameValidator(e)||{value:e.trim().replace(/\s+/g," "),isValid:!0}}static esTextValidationCb(){return{isValid:1e3>=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").trim().length,errorKey:ji.validationErrorKeys.MAX_LENGTH_1000}}static esIntegerValidationCb(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return e?/^(\-)?(\d)+$/.test(e)?-2147483647>e?{isValid:!1,errorKey:ji.validationErrorKeys.MIN_VALUE_MINUS_2147483648}:{isValid:2147483647>=e,errorKey:ji.validationErrorKeys.MAX_VALUE_2147483648}:{isValid:!1,errorKey:ji.validationErrorKeys.INTEGER_FORMAT}:{isValid:!0}}static esFloatValidationCb(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(!e)return{isValid:!0};let t=/,/.test(e),i=/^(\-)?(\d)+(\.(\d)+)?$/.test(e);return t||!i?{isValid:!1,errorKey:ji.validationErrorKeys.FLOAT_FORMAT}:-9007199254740991>e?{isValid:!1,errorKey:ji.validationErrorKeys.MIN_VALUE_MINUS_2147483648}:{isValid:9007199254740991>=e,errorKey:ji.validationErrorKeys.MAX_VALUE_2147483648}}static asyncEmailValidationCb(e,t,i,n){return t&&Array.isArray(t)&&t.filter((e=>"EMAIL_DOMAIN_INVALID"!==e)).length||!(e&&i.control&&"email"===i.control.name&&i.control.validation&&i.control.validation.restrictFreeDomains)?{isValid:!0,value:e}:(t=e.toLowerCase().split("@")[1],Wi.mostPopularProviders.includes(t)?{isValid:!1,errorKey:"EMAIL_DOMAIN_INVALID"}:fetch("".concat(n,"forms/v1/validation/email/business?value=").concat(e),{method:"GET",credentials:"same-origin",headers:{"Content-Type":"text/plain",Accept:"application/json, text/plain, */*"}}).then((e=>e.json())).then((e=>({isValid:e.valid,value:e.value,errorKey:"EMAIL_DOMAIN_INVALID"}))).catch((()=>({isValid:!1,errorKey:"EMAIL_DOMAIN_INVALID"}))))}static sanitizeExceptDoubleQuotes(e){let t=new RegExp(/[%^*|~{};<>]/,"g");return t.test(e)?e.match(t):null}static forbiddenCharactersValidator(e,t){try{return!new RegExp(t,"gu").test(e)}catch(i){return!new RegExp(t.replace("\\p{Alphabetic}",""),"gu").test(e)}}static nameContainsDotValidator(e){return/(\p{Alphabetic}{4,}\.)/gmu.test(e)}static nameContainsMoreThanThreeDigitsValidator(e){return 3<e.replace(/\D+/g,"").length}static nameConsistingOfAlphabeticCharactersValidator(e){try{return!/[\p{Alphabetic}]/gu.test(e)}catch(t){return/^[`!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~\d]*$/g.test(e)}}static symbolPositionValidator(e){let t=new RegExp("[".concat(" .'’ʼ`´ʹʻʽʾʿˈˊˮʹ΄՚᾽᾿‘‛′‵Ꞌꞌ＇-","][").concat(" .'’ʼ`´ʹʻʽʾʿˈˊˮʹ΄՚᾽᾿‘‛′‵Ꞌꞌ＇-","]|(^[").concat(" .'’ʼ`´ʹʻʽʾʿˈˊˮʹ΄՚᾽᾿‘‛′‵Ꞌꞌ＇-","])|([").concat(" '’ʼ`´ʹʻʽʾʿˈˊˮʹ΄՚᾽᾿‘‛′‵Ꞌꞌ＇-","]$)"),"g");return t.test(e)?e.match(t).filter((e=>". "!==e)).map((e=>e.trim())):null}}ji.validationErrorKeys={NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED:"NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED",NAME_CONTAINS_MORE_THAN_3_DIGITS:"NAME_CONTAINS_MORE_THAN_3_DIGITS",MORE_THAN_THREE_LONG_WORDS:"MORE_THAN_THREE_LONG_WORDS",MORE_THAN_THREE_SHORT_WORDS:"MORE_THAN_THREE_SHORT_WORDS",CONTAINS_FORBIDDEN_CHARACTERS:"CONTAINS_FORBIDDEN_CHARACTERS",EMAIL_IS_INVALID:"EMAIL_IS_INVALID",NAME_CONTAINS_FORBIDDEN_CHARACTERS:"NAME_CONTAINS_FORBIDDEN_CHARACTERS",MAX_LENGTH_50:"MAX_LENGTH_50",MAX_LENGTH_40:"MAX_LENGTH_40",NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED:"NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED",INTEGER_FORMAT:"INTEGER_FORMAT",MIN_VALUE_MINUS_2147483648:"MIN_VALUE_MINUS_2147483648",MAX_VALUE_2147483648:"MAX_VALUE_2147483648",FLOAT_FORMAT:"FLOAT_FORMAT",MAX_LENGTH_1000:"MAX_LENGTH_1000"},ji.validationMap={EMAIL:ji.emailValidationCb,SYS_NAME:ji.nameValidationCb,SYS_LAST_NAME:ji.lastNameValidationCb,ES_TEXT:ji.esTextValidationCb,ES_INTEGER:ji.esIntegerValidationCb,ES_FLOAT:ji.esFloatValidationCb},ji.asyncValidationMap={EMAIL:ji.asyncEmailValidationCb};class zi{constructor(e,t,i,n,o,r,a){this.utils=this.configService=this.formService=this.getRootElement=this.getProps=null,this.emailSuggesting=new Wi,this.forbiddenChar="",this.componentId=e,this.getProps=t,this.getRootElement=i,this.formService=n,this.configService=o,this.utils=r,this.i18n=a}init(){var e=this;let t=this.getProps(),i=this.getRootElement(),n=i.querySelector(".input-tooltip"),o=i.querySelector("input");"first_name"===t.control.name&&(o.setAttribute("name","name"),o.setAttribute("autocomplete","off")),"email"===t.control.name&&(o.setAttribute("name","email"),o.setAttribute("autocomplete","on")),this.formService.hasControl(t.control.name)?o.value=this.formService.getControl(t.control.name).value||"":this.formService.registerControl(Object.assign(Object.assign({},t.control),{componentId:this.componentId}),o,Object.keys(ji.validationMap).reduce(((t,i)=>(t[i]=function(){let t=ji.validationMap[i](...arguments);return void 0!==t.forbiddenChar&&(e.forbiddenChar=t.forbiddenChar),t},t)),{}),Object.assign(Object.assign({},ji.asyncValidationMap),{EMAIL:function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return ji.asyncValidationMap.EMAIL(...i,e.getProps(),e.configService.getConfig("hostUrl"))}}));let r=this.formService.getControl(t.control.name);"email"===t.control.name&&(this.listenForEmailValueChanges(r),this.suggestEmailFixOnFocusOut(o,r)),this.utils.handleControlStatusChange({control:r,inputElement:o,tooltipElement:n,configService:this.configService,i18n:this.i18n,validCallback:()=>{"email"===t.control.name&&i.activeElement!==o&&this.suggestEmailFix(o,r,!0)},errorMessageMapper:(e,t)=>e===ji.validationErrorKeys.CONTAINS_FORBIDDEN_CHARACTERS?t.replace("{{characters}}",this.forbiddenChar):t})}destroy(){this.emailSuggesting.hideEmailSuggestion()}listenForEmailValueChanges(e){e.on("valueChanged",(t=>{this.emailSuggesting.emailValueChanged(),this.emailSuggesting.hideEmailSuggestion(),this.formatEmailValue(t,e)}))}formatEmailValue(e,t){e.trim().toLowerCase()!==e&&t.setValue(e.trim().toLowerCase())}suggestEmailFixOnFocusOut(e,t){e.addEventListener("focusout",(()=>this.suggestEmailFix(e,t)))}suggestEmailFix(e,t,i){this.emailSuggesting.suggestEmail(this.getProps(),e,i,this.utils,this.formService,t,this.configService.getConfig("hostUrl"),this.getCurrentLanguageMap.bind(this))}getCurrentLanguageMap(){return _(this.i18n,v(this.configService)).translations}}class Ki extends Di{constructor(){super(...arguments),this.manifest=Gi,this.inputFormControl=null}connectedCallback(){super.connectedCallback(),this.getRootElement().innerHTML+="\n".concat("\n<style>\n.main-container {\n  height: 100%;\n}\n\n.label-with-input-container {\n  height: 100%;\n  display: flex;\n}\n\n.label {\n  min-height: 10px;\n}\n\n.label.cl-focused {\n  min-height: auto;\n}\n\n.input-with-tooltip {\n  position: relative;\n  display: flex;\n  height: 100%;\n  width: 100%;\n}\n\n.invalid {\n  border: 1px solid #ff0000 !important;\n}\n\n.input-tooltip {\n  visibility: hidden;\n  position: absolute;\n  right: -10px;\n  top: -10px;\n  z-index: 1;\n  border-radius: 100%;\n  width: 20px;\n  height: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  -webkit-touch-callout: none; /* iOS Safari */\n  -webkit-user-select: none;   /* Chrome/Safari/Opera */\n  -khtml-user-select: none;    /* Konqueror */\n  -moz-user-select: none;      /* Firefox */\n  -ms-user-select: none;       /* Internet Explorer/Edge */\n  user-select: none;\n}\n\ninput {\n  width: 100%;\n  padding-top: 0 !important;\n  padding-bottom: 0 !important;\n  margin: 0;\n  -moz-appearance:none;\n  -webkit-appearance:none;\n  -o-appearance:none;\n}\n\ninput.focus-outline-defined:focus {\n  outline: var(--clFocusOutline);\n}\n</style>\n    ",'\n<div class="main-container">\n  <div class="label-with-input-container">\n    <div cl-element="label"\n         cl-inline-edit="content, label"\n         class="label">\n    </div>\n    <div class="input-with-tooltip">\n      <input cl-element="input"\n             type="text"\n             name="fname">\n      <div class="input-tooltip">\n        <svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path d="M1.5 13.0604C1.5 19.4116 6.6481 24.5605 13.0075 24.5605C19.353 24.5605 24.5 19.4107 24.5 13.0604C24.5 6.70865 19.3531 1.55909 13.0075 1.55908C6.64806 1.55908 1.5 6.7077 1.5 13.0604ZM12.9775 17.9668C12.7032 17.9668 12.4807 17.7443 12.4807 17.47C12.4807 17.1956 12.7032 16.9732 12.9775 16.9732C13.2519 16.9732 13.4743 17.1956 13.4743 17.47C13.4743 17.7443 13.2519 17.9668 12.9775 17.9668ZM12.9775 13.4764C12.7032 13.4764 12.4807 13.254 12.4807 12.9796L12.4807 8.48924C12.4807 8.21487 12.7032 7.99245 12.9775 7.99245C13.2519 7.99245 13.4743 8.21487 13.4743 8.48924L13.4743 12.9796C13.4743 13.254 13.2519 13.4764 12.9775 13.4764Z" fill="#FF0000" stroke="white" stroke-width="2"></path>\n        </svg>\n      </div>\n    </div>\n  </div>\n</div>\n\n'),this.inputFormControl=new zi(this.getModel().id,this.getProps.bind(this),this.getRootElement.bind(this),this.services.form,this.services.config,this.utils,this.manifest.i18n),this.inputFormControl.init(),this.observeProps(((e,t)=>{this.applyAutoAdaptiveStyles(t.adaptiveStyles),e=this.getEnvironment();let i=this.getElement("input");this.utils.applyLabelParams(t,e,this.getRootElement(),".label-with-input-container"),i.setAttribute("placeholder",t.content.placeholder),this.utils.setInputHostSize(t,e,this.getHostElement(),i,this.getElement("label")),this.utils.setFocusOutline(i),this.updateContext()})),this.observeEnvironment(((e,t)=>{e=this.getProps(),this.utils.applyLabelParams(e,t,this.getRootElement(),".label-with-input-container"),this.utils.setInputHostSize(e,t,this.getHostElement(),this.getElement("input"),this.getElement("label"))})),this.addContextRecord()}disconnectedCallback(){super.disconnectedCallback(),this.inputFormControl.destroy(),this.services.context.deleteRecord(this.getModel().id)}}Ki.define={name:"sys-input",model:Gi.name,manifest:Gi};var Xi={name:"SysButtonComponent",componentType:"BUTTON",version:"1.0.0",contextMenuModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"BRING_BACK_FORWARD",element:"host",elementProp:"styleAttributes",elementSubProp:"zIndex"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"BRING_BACK_FORWARD",element:"host",elementProp:"styleAttributes",elementSubProp:"zIndex"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT"}]}],floatingPanelModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"button",isLineSpaceAvailable:!0,isTextTransformAvailable:!0}]}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"button"}]}]}],floatingControlsModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"}]}],propertyPaneModel:{content:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["fixed","fill","hug"]}}},{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"button",isLineSpaceAvailable:!0,isTextTransformAvailable:!0}]},{type:"CONTROL",name:"BACKGROUND",elementProp:"styleAttributes",element:"button"},{type:"CONTROL",name:"ICON",elementProp:"styleAttributes",element:"button",params:{visibleDisplayValue:"block"}},{type:"CONTROL",name:"TEXT_VISIBILITY",elementSubProp:"--textDisplay",elementProp:"styleAttributes",element:"button",params:{visibleDisplayValue:"inline"}},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"button"},{type:"CONTROL",name:"BOX_SHADOW",elementProp:"styleAttributes",element:"button"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"button"},{type:"CONTROL",name:"HOVER_ANIMATION",elementProp:"hoverStyleAttributes",element:"button",params:{animationTypeProp:"hoverAnimationType"}},{type:"CONTROL",name:"LOOP_ANIMATION",elementProp:"styleAttributes",element:"button",params:{label:"LOOP_ANIMATION_LABEL",loopAnimation:{type:null}}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"button",params:{indentationType:"PADDING"}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"MARGIN"}}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["fixed","fill","hug"]}}},{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"button",isLineSpaceAvailable:!0,isTextTransformAvailable:!0}]},{type:"CONTROL",name:"BACKGROUND",elementProp:"styleAttributes",element:"button"},{type:"CONTROL",name:"ICON",elementProp:"styleAttributes",element:"button",params:{visibleDisplayValue:"block"}},{type:"CONTROL",name:"TEXT_VISIBILITY",elementSubProp:"--textDisplay",elementProp:"styleAttributes",element:"button",params:{visibleDisplayValue:"inline"}},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"button"},{type:"CONTROL",name:"BOX_SHADOW",elementProp:"styleAttributes",element:"button"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"button"},{type:"CONTROL",name:"HOVER_ANIMATION",elementProp:"hoverStyleAttributes",element:"button",params:{animationTypeProp:"hoverAnimationType"}},{type:"CONTROL",name:"LOOP_ANIMATION",elementProp:"styleAttributes",element:"button",params:{label:"LOOP_ANIMATION_LABEL",loopAnimation:{type:null}}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"button",params:{indentationType:"PADDING"}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"MARGIN"}}]}],general:[{type:"CONTROL",name:"NPS_ACTIONS",propPath:["content"],params:{syncContentComponentName:"SysNetPromoterScoreComponent"},displayCondition:"return sdk.documentUtils.findComponentsByName([sdk.componentView], 'SysNetPromoterScoreComponent')?.length > 0"},{type:"CONTROL",name:"ACTIONS",propPath:["handlers"],params:{origin:!0,showTitleCondition:"return sdk.documentUtils.findComponentsByName([sdk.componentView], 'SysNetPromoterScoreComponent')?.length === 0"}}]},autoContrast:[{slave:{element:"button",elementProp:"styleAttributes",elementSubProp:"color"},master:{element:"button",elementProp:"styleAttributes",elementSubProp:"background"},enabledPropPath:["content","textContrastEnabled"]}],events:{dispatch:[],listen:[]},i18nPropertyPaneModel:{content:[{type:"CONTROL",name:"ACTIONS",propPath:["handlers"],params:{origin:!1}}]},i18nPropPaths:["content,text","handlers,[id],actions,[id],params,link","handlers,[id],actions,[id],params,customData"],i18n:{en:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"At least one field is required: email or phone number"},ru:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Хотя бы одно из полей должно быть заполнено: Email или Номер телефона"},uk:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Хоча б одне з полів має бути заповнене: Email або Номер телефону"},es:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Necesita, como mínimo, un campo obligatorio: email o número de teléfono"},de:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Mindestens ein Feld ist erforderlich: E-Mail-Adresse oder Telefonnummer"},fr:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Au moins un champ est obligatoire : courriel ou numéro de téléphone"},it:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Almeno un campo è obbligatorio: email o numero di telefono"},pt:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"É necessário pelo menos um campo: email ou número de telefone"},ro:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Cel puțin un câmp este obligatoriu: e-mail sau număr de telefon"},bg:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Изисква се поне едно поле: имейл или телефонен номер"},cs:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Je vyžadováno alespoň jedno pole: e-mail nebo telefonní číslo"},el:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Απαιτείται τουλάχιστον ένα πεδίο: ηλεκτρονική διεύθυνση ή τηλέφωνο"},nl:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Er is minimaal één veld vereist: e-mail of telefoonnummer"},pl:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Wymagane jest co najmniej jedno pole: adres e-mail lub numer telefonu"},sv:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Minst ett fält krävs: e-post eller telefonnummer"},tr:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"En az bir alan gereklidir: e-posta veya telefon numarası"},ar:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"مطلوب حقل واحد على الأقل: البريد الإلكتروني أو رقم الهاتف"},zh:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"至少一个字段为必填：电子邮箱或电话号码"},da:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Mindst ét ​​felt er påkrævet: e-mail eller telefonnummer"},he:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"נדרש לפחות שדה אחד: אימייל או מספר טלפון"},fi:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Vähintään yksi kenttä vaaditaan: sähköposti tai puhelinnumero"},hi:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"कम से कम एक फ़ील्ड आवश्यक है: ईमेल या फ़ोन नंबर"},hr:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Potrebno je ispuniti barem jedno polje: e-mail ili telefonski broj"},hu:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Legalább egy mező kitöltése kötelező: e-mail vagy telefonszám."},id:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Setidaknya satu bidang wajib diisi: email atau nomor telepon"},ja:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"少なくとも1つのフィールドが必須です：メールアドレスまたは電話番号"},ko:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"최소 한 칸 필수 입력: 이메일 또는 전화번호"},no:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Minst ett felt er obligatorisk: e-post eller telefonnummer"},sk:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Aspoň jedno pole je povinné: e-mail alebo telefónne číslo"},sl:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Vsaj eno polje je obvezno: e-poštni naslov ali telefonska številka"},sr:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Najmanje jedno polje je obavezno: e-pošta ili broj telefona"}},defaultProps:{adaptiveStyles:{desktop:[{element:"host",styleAttributes:{width:"auto",minWidth:null,height:"35px",minHeight:"35px",marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px"}},{element:"button",styleAttributes:{width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center",flexDirection:"row",background:"rgb(0, 0, 0)",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopWidth:"0px",borderTopColor:"rgb(0, 0, 0)",borderBottomWidth:"0px",borderBottomColor:"rgb(0, 0, 0)",borderLeftWidth:"0px",borderLeftColor:"rgb(0, 0, 0)",borderRightWidth:"0px",borderRightColor:"rgb(0, 0, 0)",borderTopLeftRadius:"200px",borderTopRightRadius:"200px",borderBottomLeftRadius:"200px",borderBottomRightRadius:"200px",boxShadow:"none",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"20px",paddingRight:"20px",color:"rgba(255, 255, 255, 1)",textAlign:"center",lineHeight:"120%",fontWeight:"700",fontSize:"16px",textShadow:"none","--iconDisplay":"none","--iconSize":"20px","--iconOrder":"-1","--iconDistanceToText":"15px","--iconURL":"","--textDisplay":"inline"},hoverStyleAttributes:{background:"rgba(0, 0, 0, 0.2)"},classes:"cl-text-class-button cl-loop-animation-PULSE"}],mobile:[{element:"host",styleAttributes:{width:"auto",minWidth:null,height:"35px",minHeight:"35px",marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px"}},{element:"button",styleAttributes:{width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center",flexDirection:"row",background:"rgb(0, 0, 0)",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopWidth:"0px",borderTopColor:"rgb(0, 0, 0)",borderBottomWidth:"0px",borderBottomColor:"rgb(0, 0, 0)",borderLeftWidth:"0px",borderLeftColor:"rgb(0, 0, 0)",borderRightWidth:"0px",borderRightColor:"rgb(0, 0, 0)",borderTopLeftRadius:"200px",borderTopRightRadius:"200px",borderBottomLeftRadius:"200px",borderBottomRightRadius:"200px",boxShadow:"none",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"20px",paddingRight:"20px",color:"rgba(255, 255, 255, 1)",textAlign:"center",lineHeight:"120%",fontWeight:"700",fontSize:"16px",textShadow:"none","--iconDisplay":"none","--iconSize":"20px","--iconOrder":"-1","--iconDistanceToText":"15px","--iconURL":"","--textDisplay":"inline"},hoverStyleAttributes:{background:"rgba(0, 0, 0, 0.2)"},classes:"cl-text-class-button cl-loop-animation-PULSE"}]},content:{text:"Subscribe",textContrastEnabled:!0}},metaDescription:{sortWeight:60,icon:"/claspo-editor/button-component-icon.svg",label:{en:"Button",ru:"Кнопка",uk:"Кнопка",es:"Botón",fr:"Bouton",de:"Schaltfläche",it:"Pulsante",pt:"Botão",ro:"Buton",bg:"Копче",cs:"Tlačítko",el:"Πλήκτρο",nl:"Knop",pl:"Przycisk",sv:"Knapp",tr:"Buton",ar:"الزِّر",zh:"按钮",da:"Knap",he:"כפתור",fi:"Painike",hi:"बटन",hr:"Gumb",hu:"Gomb",id:"Tombol",ja:"ボタン",ko:"버튼",no:"Knapp",sk:"Tlačidlo",sl:"Gumb",sr:"Dugme"}}};class Yi extends Di{constructor(){super(),this.manifest=Xi,this.hideErrorTooltip=()=>{this.getRootElement().querySelector(".input-tooltip").style.visibility="hidden"},this.updateButtonTextNode=e=>{this.getRootElement().querySelector(".editable-text").innerHTML=e.content.text},this.mapStyleControlValuesToInnerButtonContent=()=>{let e=this.getRootElement().querySelector("button"),t=this.getRootElement().querySelector(".editable-text");e&&t&&(this.mapAlignValueToButtonContent(e),t.style.minWidth="20px",t.style.width="max-content",t.style.minHeight=e.style.fontSize,t.style.textAlign=e.style.textAlign,t.style.lineHeight=e.style.lineHeight,t.style.fontWeight=e.style.fontWeight,t.style.fontSize=e.style.fontSize,t.style.textShadow=e.style.textShadow,t.style.textTransform=e.style.textTransform,t.style.letterSpacing=e.style.letterSpacing,t.style.fontFamily=e.style.fontFamily)},this.mapAlignValueToButtonContent=e=>{"center"===e.style.textAlign&&(e.style.alignItems="center",e.style.justifyContent="center"),"start"===e.style.textAlign&&(e.style.alignItems="column"===e.style.flexDirection?"flex-start":"center",e.style.justifyContent="column"===e.style.flexDirection?"center":"flex-start"),"end"===e.style.textAlign&&(e.style.alignItems="column"===e.style.flexDirection?"flex-end":"center",e.style.justifyContent="column"===e.style.flexDirection?"center":"flex-end")},this.createIconNode=e=>{if(!e.querySelector(".icon")){let t=document.createElement("p");t.classList.add("icon"),e.appendChild(t)}},this.showErrorTooltip=e=>{let t=this.getRootElement().querySelector(".main-container"),i=t.querySelector(".input-tooltip"),n=this.getTranslationsMap(this.manifest.i18n).translations,o=Object.keys(n).find((t=>t.includes(e)));this.utils.setInvalidStyle(t,i,o?n[o]:e)},this.getRootElement().innerHTML="\n<style>".concat("\n.main-container {\n  position: relative;\n  display: flex;\n  width: 100%;\n  height: inherit;\n}\n\nbutton {\n  cursor: pointer;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  outline: none;\n  min-height: 20px;\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n  gap: var(--iconDistanceToText, 15px);\n}\n\n.editable-text {\n  display: var(--textDisplay, 'inline');\n}\n\n.input-tooltip {\n  visibility: hidden;\n  position: absolute;\n  right: -10px;\n  top: -10px;\n  z-index: 1;\n  border-radius: 100%;\n  width: 20px;\n  height: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  -webkit-touch-callout: none; /* iOS Safari */\n  -webkit-user-select: none;   /* Chrome/Safari/Opera */\n  -khtml-user-select: none;    /* Konqueror */\n  -moz-user-select: none;      /* Firefox */\n  -ms-user-select: none;       /* Internet Explorer/Edge */\n  user-select: none;\n}\n\n.icon {\n  display: var(--iconDisplay, none);\n  width: var(--iconSize, 20px);\n  height: var(--iconSize, 20px);\n  order: var(--iconOrder, -1);\n  background: var(--iconURL);\n  margin-top: 0px;\n  margin-bottom: 0px;\n  background-size: cover;\n}\n\nbutton.focus-outline-defined:focus {\n  outline: var(--clFocusOutline);\n}\n",'</style>\n<div class="main-container">\n  <button cl-element="button">\n    <div class="editable-text" cl-inline-edit="content, text"></div>\n  </button>\n\n  <div class="input-tooltip">\n    <svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M1.5 13.0604C1.5 19.4116 6.6481 24.5605 13.0075 24.5605C19.353 24.5605 24.5 19.4107 24.5 13.0604C24.5 6.70865 19.3531 1.55909 13.0075 1.55908C6.64806 1.55908 1.5 6.7077 1.5 13.0604ZM12.9775 17.9668C12.7032 17.9668 12.4807 17.7443 12.4807 17.47C12.4807 17.1956 12.7032 16.9732 12.9775 16.9732C13.2519 16.9732 13.4743 17.1956 13.4743 17.47C13.4743 17.7443 13.2519 17.9668 12.9775 17.9668ZM12.9775 13.4764C12.7032 13.4764 12.4807 13.254 12.4807 12.9796L12.4807 8.48924C12.4807 8.21487 12.7032 7.99245 12.9775 7.99245C13.2519 7.99245 13.4743 8.21487 13.4743 8.48924L13.4743 12.9796C13.4743 13.254 13.2519 13.4764 12.9775 13.4764Z" fill="#FF0000" stroke="white" stroke-width="2"></path>\n    </svg>\n  </div>\n</div>')}connectedCallback(){super.connectedCallback(),this.stylesUpdateObserver=new MutationObserver(this.mapStyleControlValuesToInnerButtonContent.bind(this)),this.stylesUpdateObserver.observe(this.getRootElement().querySelector("button"),{attributes:!0,childList:!1,subtree:!1});let e=this.getElement("button");if(e.addEventListener("click",(e=>{this.services.trackingService.send("FormButtonClick_[Name]")})),this.getProps().handlers){var t=this.getProps().handlers.find((e=>"CLICK"===e.type));if(t&&t.actions){let i=t.actions.find((e=>"SUBSCRIBE_CONTACT"===e.type));t=t.actions.find((e=>"REQUEST"===e.type)),i&&(this.invalidListener=this.services.eventEmitter.on("SET_SUBSCRIBE_CONTACT_BUTTON_AS_INVALID",(()=>{this.showErrorTooltip("EMAIL_OR_PHONE_IS_REQUIRED")})),this.validListener=this.services.eventEmitter.on("SET_SUBSCRIBE_CONTACT_BUTTON_AS_VALID",(()=>{this.hideErrorTooltip()}))),(i||t)&&this.services.eventEmitter.on("CONTACT_DATA_SUBMIT",(()=>{e.disabled=!0}))}}this.observeProps(((e,t)=>{this.applyAutoAdaptiveStyles(t.adaptiveStyles),this.utils.setFocusOutline(this.getElement("button")),this.mapStyleControlValuesToInnerButtonContent(),e=this.getRootElement().querySelector("button"),this.updateButtonTextNode(t),this.createIconNode(e)}))}disconnectedCallback(){super.disconnectedCallback(),this.invalidListener&&this.invalidListener.off(),this.validListener&&this.validListener.off(),this.stylesUpdateObserver.disconnect()}}Yi.define={name:"sys-button",model:Xi.name,manifest:Xi};let Qi={COMPONENT_FOCUSED:"COMPONENT_FOCUSED",REMOVE_FOCUS:"REMOVE_FOCUS",SET_FOCUS:"SET_FOCUS",COMPONENT_MOUSE_MOVE:"COMPONENT_MOUSE_MOVE",COMPONENT_CLICKED:"COMPONENT_CLICKED",COMPONENT_DOUBLE_CLICKED:"COMPONENT_DOUBLE_CLICKED",COMPONENT_DRAGSTART:"COMPONENT_DRAGSTART",COMPONENT_DRAGEND:"COMPONENT_DRAGEND",COMPONENT_DRAGOVER:"COMPONENT_DRAGOVER",DOCUMENT_DROP:"DOCUMENT_DROP",SHOW_INLINE_EDIT:"SHOW_INLINE_EDIT",VIEW_COMPONENT_RESOURCES_LOADED:"VIEW_COMPONENT_RESOURCES_LOADED",FAILED_TO_LOAD_COMPONENT_RESOURCE:"FAILED_TO_LOAD_COMPONENT_RESOURCE"},qi={CONTAINER:"CONTAINER",TEXT:"TEXT",INPUT:"INPUT",BUTTON:"BUTTON",IMAGE:"IMAGE",FLOATING_IMAGE:"FLOATING_IMAGE",VIDEO:"VIDEO",COLUMN:"COLUMN"};var Zi=Object.assign(Object.assign({},fi),{name:"SysColumnComponent",componentType:"COLUMN",preventDraggable:!0,focusParentOnClick:!1,recursiveRemove:!0,version:"1.0.0",defaultProps:Object.assign(Object.assign({},fi.defaultProps),{adaptiveStyles:I([{element:"host",styleAttributes:{display:"inline-flex",position:"relative",width:"auto",minWidth:"min-content",height:"100%",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"10px",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"10px",paddingRight:"10px",marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",borderStyle:"solid",borderTopWidth:"0px",borderTopColor:"rgb(0, 0, 0)",borderBottomWidth:"0px",borderBottomColor:"rgb(0, 0, 0)",borderLeftWidth:"0px",borderLeftColor:"rgb(0, 0, 0)",borderRightWidth:"0px",borderRightColor:"rgb(0, 0, 0)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",boxShadow:"none",flexBasis:"0"},classes:""}]),content:{size:1}}),propertyPaneModel:{content:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"ALIGNMENT",elementProp:"styleAttributes",element:"host",params:{mode:"horizontal"},hideSyncSelect:!0},{type:"CONTROL",name:"BACKGROUND",elementProp:"styleAttributes",element:"host",hideSyncSelect:!0},{type:"CONTROL",name:"BACKDROP_FILTER",elementProp:"styleAttributes",element:"host",hideSyncSelect:!0},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true",hideSyncSelect:!0},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true",hideSyncSelect:!0},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"PADDING"},hideSyncSelect:!0}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"ALIGNMENT",elementProp:"styleAttributes",element:"host",params:{mode:"horizontal"},hideSyncSelect:!0},{type:"CONTROL",name:"DISPLAY",elementProp:"styleAttributes",elementSubProp:"display",element:"host",params:{label:"DOCUMENT_DISPLAY_ON_MOBILE",displayPropertyValue:"inline-flex"},displayCondition:"return (sdk.appConfig.columnsOptions?.allowHideColumnOnMobile ?? true) === true"},{type:"CONTROL",name:"BACKGROUND",elementProp:"styleAttributes",element:"host",hideSyncSelect:!0},{type:"CONTROL",name:"BACKDROP_FILTER",elementProp:"styleAttributes",element:"host",hideSyncSelect:!0},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true",hideSyncSelect:!0},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true",hideSyncSelect:!0},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"PADDING"},hideSyncSelect:!0}]}],general:[{type:"CONTROL",name:"ACTIONS",propPath:["handlers"],params:{origin:!0}}]},floatingControlsModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"COLUMNS_PROPORTIONS",propPath:["content","size"]},{type:"CONTROL",name:"PARENT_ALIGNMENT",elementProp:"styleAttributes",element:"host",params:{mode:"horizontal"}}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"COLUMNS_PROPORTIONS",propPath:["content","size"]},{type:"CONTROL",name:"PARENT_ALIGNMENT",elementProp:"styleAttributes",element:"host",params:{mode:"horizontal"}}]}],contextMenuModel:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT",params:{hideForEntryType:"VIEW"}}],metaDescription:null}),Ji=function(){let{flexGrow:e}=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{path:[],type:Zi.componentType,name:Zi.name,version:Zi.version,focusParentOnClick:!1,recursiveRemove:!0,preventDraggable:!0,props:Object.assign(Object.assign({},Zi.defaultProps),{content:Object.assign(Object.assign({},Zi.defaultProps.content),{size:e||"1"})}),children:[]}},$i={name:"SysColumnsComponent",componentType:"COLUMNS",version:"1.0.0",contextMenuModel:[],floatingPanelModel:[],floatingControlsModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host",params:{minWidth:50,minHeight:50}},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"PARENT_ALIGNMENT",elementProp:"styleAttributes",element:"host",params:{mode:"horizontal"}},{type:"CONTROL",name:"COLUMNS_PROPORTIONS",propPath:["content","size"],params:{parent:!0}}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host",params:{minWidth:50,minHeight:50}},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"PARENT_ALIGNMENT",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"COLUMNS_PROPORTIONS",propPath:["content","size"],params:{parent:!0}}]}],propertyPaneModel:{content:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"WIDGET_LAYOUT_SELECT",displayCondition:"return sdk.appConfig.modelType !== 'RESPONSIVE' && sdk.component.type === 'VIEW' && ['DETACHED', 'FLOATING_BOX', 'CONTENT_LOCKER'].includes(sdk.layoutType) && sdk.widgetType !== 'AGE_VERIFY'"},{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"],minValue:50},height:{options:["fixed","fill","hug"],minValue:50}},displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true",syncSelectDisplayCondition:"return sdk.component.type === 'VIEW'"},{type:"CONTROL",name:"COLUMNS",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"SWITCH",propPath:["isResponsive"],params:{label:"ADAPTIVE_COLUMNS",boldLabel:!0}},{type:"CONTROL",name:"BACKGROUND",elementProp:"styleAttributes",element:"host",syncSelectDisplayCondition:"return sdk.component.type === 'VIEW'"},{type:"CONTROL",name:"BACKDROP_FILTER",elementProp:"styleAttributes",element:"host",syncSelectDisplayCondition:"return sdk.component.type === 'VIEW'"},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true",syncSelectDisplayCondition:"return sdk.component.type === 'VIEW'"},{type:"CONTROL",name:"BOX_SHADOW",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true",syncSelectDisplayCondition:"return sdk.component.type === 'VIEW'"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true",syncSelectDisplayCondition:"return sdk.component.type === 'VIEW'"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"WIDGET_LAYOUT_SELECT",displayCondition:"return sdk.appConfig.modelType !== 'RESPONSIVE' && sdk.component.type === 'VIEW' && ['DETACHED', 'FLOATING_BOX', 'CONTENT_LOCKER'].includes(sdk.layoutType) && sdk.widgetType !== 'AGE_VERIFY'"},{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["fixed","fill","hug"]}},displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true",syncSelectDisplayCondition:"return sdk.component.type === 'VIEW'"},{type:"CONTROL",name:"COLUMNS",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"SWITCH",propPath:["isResponsive"],params:{label:"ADAPTIVE_COLUMNS",boldLabel:!0}},{type:"CONTROL",name:"BACKGROUND",elementProp:"styleAttributes",element:"host",syncSelectDisplayCondition:"return sdk.component.type === 'VIEW'"},{type:"CONTROL",name:"BACKDROP_FILTER",elementProp:"styleAttributes",element:"host",syncSelectDisplayCondition:"return sdk.component.type === 'VIEW'"},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true",syncSelectDisplayCondition:"return sdk.component.type === 'VIEW'"},{type:"CONTROL",name:"BOX_SHADOW",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true",syncSelectDisplayCondition:"return sdk.component.type === 'VIEW'"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true",syncSelectDisplayCondition:"return sdk.component.type === 'VIEW'"}]}],general:[{type:"CONTROL",name:"ACTIONS",propPath:["handlers"],params:{origin:!0}}]},events:{dispatch:[],listen:[]},defaultProps:{adaptiveStyles:I([{element:"host",styleAttributes:{position:"relative",width:"100%",minWidth:"50px",height:"auto",gap:"10px"}}]),isResponsive:!0},presets:[{name:"100%",label:"",sortWeight:20,icon:"/claspo-editor/columns-frame-100.svg",overrides:{defaultChildren:[Ji()]}},{name:"50%-50%",label:"",sortWeight:10,icon:"/claspo-editor/columns-frame-50-50.svg",overrides:{defaultChildren:[Ji(),Ji()]}},{name:"33%-66%",label:"",sortWeight:0,icon:"/claspo-editor/columns-frame-33-66.svg",overrides:{defaultChildren:[Ji({flexGrow:1}),Ji({flexGrow:2})]}}],metaDescription:{sortWeight:70,icon:"/claspo-editor/container-component-icon.svg",label:{en:"Columns",ru:"Колонки",uk:"Колонки",es:"Columns",fr:"Columns",de:"Columns",it:"Columns",pt:"Columns",ro:"Columns",bg:"Columns",cs:"Columns",el:"Columns",nl:"Columns",pl:"Columns",sv:"Columns",tr:"Columns",ar:"Columns",zh:"Columns",da:"Columns",he:"Columns",fi:"Columns",hi:"Columns",hr:"Columns",hu:"Columns",id:"Columns",ja:"Columns",ko:"Columns",no:"Columns",sk:"Columns",sl:"Columns",sr:"Columns"},defaultPreset:"50%-50%"}};class en extends Di{constructor(){super(),this.manifest=$i,this.updateResponsiveStyles=()=>{this.getProps().isResponsive&&"mobile"===this.getEnvironment()&&this.mobileDeviceOrientationListener.isPortrait()?this.getRootElement().querySelector(".columns-container").style.flexDirection="column":this.getRootElement().querySelector(".columns-container").style.flexDirection="row"},this.getRootElement().innerHTML="\n      ".concat("\n  <style>\n    :host {\n      position: relative;\n      min-width: 50px;\n      min-height: 50px; \n      display:flex;\n    }\n\n    .columns-container {\n      height: auto;\n      min-height: 50px; \n      width: 100%;\n      min-width: 50px;\n      display: flex;\n      gap: inherit;\n    }\n  </style>\n  ","\n      <div ").concat(n("render-outlet"),' class="columns-container"></div>\n    ')}connectedCallback(){super.connectedCallback(),this.observeProps(((e,t)=>{this.applyAutoAdaptiveStyles(t.adaptiveStyles),this.updateResponsiveStyles()})),this.observeEnvironment(((e,t)=>{this.updateResponsiveStyles()})),this.subscriptions.push(this.mobileDeviceOrientationListener.on(Bt.changeEventName,(()=>{this.updateResponsiveStyles()})))}}en.define={name:"sys-columns",model:$i.name,manifest:$i};class tn extends wi{constructor(){super(...arguments),this.manifest=Zi,this.updateResponsiveStyles=()=>{var e,t;let i=null===(t=null===(e=this.getParentComponent())||void 0===e?void 0:e.getProps())||void 0===t?void 0:t.isResponsive;e=[...this.shadowRoot.children].filter((e=>e.hasAttribute("cl-element")));let n=this.getHostElement().style;e.length?n.minWidth="min-content":(["paddingTop","paddingBottom","paddingLeft","paddingRight","padding"].map((e=>n[e])).map((e=>e&&parseFloat(e))).some(Boolean)&&(n.minWidth="min-content"),n.minWidth="20px"),"mobile"===this.getEnvironment()&&i&&(e.length?n.minHeight="auto":n.background.includes("url")?n.minHeight="150px":e.length||(n.minHeight="50px"))},this.updateEmptyState=()=>{let e=!(Array.from(this.getRootElement().children).filter((e=>"STYLE"!==e.tagName&&"SCRIPT"!==e.tagName))||[]).length;this.setAttribute(n("empty"),e)},this.watchChildren=()=>{let e=this;this.mutationObserver=new MutationObserver((function(){e.updateEmptyState(),e.updateResponsiveStyles()})),this.mutationObserver.observe(this.getRootElement(),{childList:!0})},this.processSize=e=>{var t;e=null!==(t=null!=e?e:this.style.flexGrow)&&void 0!==t?t:"1",this.style.flexGrow=e},this.processStyles=()=>{this.innerHTML+='\n      <style>\n      [cl-component="'.concat(this.componentName,'"] {\n        position: relative;\n        min-width: 50px;\n        min-height: 50px;\n      }\n      </style>')}}connectedCallback(){var e;super.connectedCallback(),this.updateEmptyState(),this.watchChildren(),this.observeEnvironment((()=>{this.updateResponsiveStyles()})),this.observeProps(((e,t)=>{var i;this.updateResponsiveStyles(),this.processSize(null===(i=t.content)||void 0===i?void 0:i.size)})),null===(e=this.getParentComponent())||void 0===e||e.observeProps((()=>{this.updateResponsiveStyles()}))}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this.mutationObserver)||void 0===e||e.disconnect()}}tn.define={name:"sys-column",model:Zi.name,manifest:Zi};var nn=new class{constructor(){this.classes=[Hi,Pi,en,tn,Vi,Ki,Yi],this.modelNameToTagMap=this.classes.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.define.model]:t.define.name})),{})}register(e,t){this.decorator=e,this.classes.forEach((e=>this.registerComponent(e,t)))}registerComponent(e,t){let i=this.getComponentTagName(e.define.name,t);customElements.get(i)||(e="STATIC"===t?R(e):M(e),customElements.define(i,e),this.modelNameToTagMap[e.define.model]=e.define.name)}getComponent(e,t){let i=(n=e,n.replace(/[A-Z]+(?![a-z])|[A-Z]/g,((e,t)=>(t?"-":"")+e.toLowerCase()))).replace("-component","");var n;if(t=this.getComponentTagName(i,t),!(t=customElements.get(t)))throw Error("Not defined or loaded component: "+e);return t}getComponentTagName(e,t){return t=t.toLowerCase(),"".concat(e,"-").concat(t)}};class on{constructor(e,t,i,n,o,r,a,s,l,d,c,h,u,m,p){this.state=e,this.eventEmitter=t,this.form=i,this.documentModel=n,this.resizeListener=o,this.mobileDeviceOrientationListener=p,this.config=r,this.commonStylesService=a,this.trackingService=s,this.layoutType=l,this.actionFactory=d,this.actionRegister=c,this.prizePoolFactory=h,this.context=u,this.mergeTagsProcessorFactory=m}create(e,t){let i=new(this.getComponentClass(e,t)),o=n("content-container");if(e.type===wt.VIEW&&"SysColumnsComponent"!==e.name){let e=document.createElement("div");e.setAttribute(o,""),e.style.display="inherit",e.style.gap="inherit",e.style.justifyContent="inherit",e.style.alignItems="inherit",e.style.flexDirection="inherit",e.style.width="100%",e.style.height="100%",i.getRootElement().appendChild(e),i.contentContainer=e}return i.setAttribute(n("type"),e.type),i.setAttribute(n("id"),e.id),i.setAttribute(n("component"),e.name),i.setAttribute(n("path"),e.path),i.setAttribute(n("element"),"host"),"UPDATING"===t&&this.commonStylesService.setStyles("* {cursor:pointer !important;} *:focus {outline: none !important;}"),this.processStyles(i.getRootElement(),e,t),Wt.applyHostStyles(e.type,i,e,this.layoutType),i}getComponentClass(e,t){return nn.getComponent(e.name,t)}constructProps(e,t){return{model:e,documentModel:this.documentModel,resizeListener:this.resizeListener,mobileDeviceOrientationListener:this.mobileDeviceOrientationListener,config:this.config,layoutType:this.layoutType,viewResourceManager:t,services:{state:this.state,eventEmitter:this.eventEmitter,form:this.form,config:this.config,trackingService:this.trackingService,actionFactory:this.actionFactory,actionRegister:this.actionRegister,prizePoolFactory:this.prizePoolFactory,context:this.context,mergeTagsProcessorFactory:this.mergeTagsProcessorFactory},utils:new _i}}processStyles(e,t,i){let n=this.commonStylesService.getStyles(),o=document.createElement("style");this.constructAnimationStyles(e,t,i),o.textContent=n,e.appendChild(o)}constructAnimationStyles(e,t,i){"UPDATING"!==i&&(t=zt.constructAnimationStylesByTypes(Xt.extractLoopAnimationsFromAdaptiveStylesClasses(t)))&&((i=document.createElement("style")).textContent=t,e.appendChild(i))}}class rn{constructor(e){this._onComponentResourcesLoaded=e=>{this.componentResourcesMap.delete(e),this.viewHasPendingResources()||this.systemEventEmitter.emit(Qi.VIEW_COMPONENT_RESOURCES_LOADED)},this.systemEventEmitter=e,this.componentResourcesMap=new Map,this.systemEventEmitter.on("COMPONENT_RESOURCES_LOADED",this._onComponentResourcesLoaded)}registerComponent(e,t){this.componentResourcesMap.set(e,t)}viewHasPendingResources(){return 0<[...this.componentResourcesMap.entries()].filter((e=>([,e]=e,0<e.getPending().count()))).length}}class an{constructor(e,t,i,n,o){this.isMobile=null,this.resizeListener=t,this.documentModel=e,this.factory=n,this.eventEmitter=o,this.viewResourceManager=new rn(this.eventEmitter),this.destroy=this.destroy.bind(this)}render(e,t){let i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"STATIC",o=this.factory.create(e,i,this.viewResourceManager);if(this.documentModel.setComponentRef(e.id,o),e.componentRef=o,e.type===wt.VIEW&&"SysColumnsComponent"===e.name){let t=n("content-container"),i=this.getRenderOutlet(e.componentRef.getRootElement());null==i||i.setAttribute(t,"")}return e.children.forEach((t=>{this.renderComponent(e,t,i)})),Promise.resolve().then((()=>{this.viewResourceManager.viewHasPendingResources()||this.eventEmitter.emit(Qi.VIEW_COMPONENT_RESOURCES_LOADED)})),o}destroy(e){var t;null!==(t=e.model)&&void 0!==t&&t.path&&this.documentModel.destroyView(e.model.path[0])}renderComponent(e,t,i){let n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:ut.INSIDE,o=this.factory.create(t,i,this.viewResourceManager);this.documentModel.setComponentRef(t.id,o);var r=e.componentRef.getRootElement();return r=t.type===wt.FLOATING_IMAGE?r:this.selectElementToAppendTo(e.componentRef.contentContainer)||this.selectElementToAppendTo(r),n===ut.INSIDE?o.connect(n,r,o):o.connect(n,e.componentRef,t.componentRef),t.children&&t.children.forEach((e=>this.renderComponent(t,e,i))),t}selectElementToAppendTo(e){return e?this.getRenderOutlet(e)||e:null}getRenderOutlet(e){return e.querySelector("[".concat(n("render-outlet"),"]"))}}let sn=["DOCUMENT_VIEW_TYPE_SUCCESS","DOCUMENT_VIEW_TYPE_SUBSCRIBED","DOCUMENT_VIEW_TYPE_SUCCESSFUL_REQUEST","DOCUMENT_VIEW_TYPE_ERROR","REQUEST_FORM_VIEW_TYPE_SUCCESS"],ln=e=>!(e=mt.getNodeOnClickData(e)).actions.filter((e=>["GO_TO_VIEW","SUBSCRIBE_CONTACT","REQUEST"].includes(e.type))).length&&!e.npsViewIds.length;class dn{constructor(e,t,i,n,o,r,a,s,l){this.id=i.id,this.params=i.params,this.form=t,this.eventEmitter=e,this.httpClient=n,this.configService=o,this.formEventsListener=null,this.tracking=r,this.stateService=a,this.context=s,this.getServices=l,this.category="SUBMIT"}getTrackingMessageBeforeSentData(){return""}getTrackingMessageByStatus(e){return""}execute(e,t,i,n){if(this.formEventsListener&&this.formEventsListener.off(),!this.form.submitQueuedAfterPending||!0===e){if(!this.form.preventSubmit)return new Promise((o=>{if(!this.form.isPending())return this.form.submitQueuedAfterPending=!1,this.submit(!0===e?t:o,i,n);this.form.submitQueuedAfterPending=!0,setTimeout((()=>this.execute(!0,o,i,n)),500)}));this.form.submitQueuedAfterPending=!1}}submit(e,t,i){var n;let o=this.getServices().viewRouter.getCurrentViewIndex(),r=0<this.getServices().documentModel.getViews().slice(o+1).filter((e=>!sn.includes(e.label))).length,a=Object.assign(Object.assign({},this.params),i);if(this.form.markAsTouched(),this.stateService.getState().emitActionOnSubmit&&this.eventEmitter.emit(this.stateService.getState().emitActionOnSubmit.eventName),!this.stateService.getState().interceptSubmitActions||t)if(this.form.isValid()||a.skipValidation){t=this.form.getControlsMap();var s=(i=this.stateService).getState().conditionalRedirectViewId,l=a.conditionalRedirectViewId||s;s&&(a.conditionalRedirectViewId=s,i.setState({conditionalRedirectViewId:null}));var d=!1;if(l){var c=this.getServices().documentModel.getViews().find((e=>e.id===a.conditionalRedirectViewId));if(this.goToView(c.path[0],a),d=c=ln(c),!c)return void e(!0)}else if(r&&(null===(n=null===(c=this.getServices().viewRouter.getLastTransition())||void 0===c?void 0:c.routeState)||void 0===n||!n.conditionalRedirectViewId)&&(c=this.getServices().documentModel.getViews()[o+1],this.goToView(c.path[0],a),d=c=ln(c),!c))return void e(!0);c=this.context.getKVMap(),this.eventEmitter.emit("CONTACT_DATA_SUBMIT"),this.getTrackingMessageBeforeSentData()&&this.tracking.send("FormFinish_[Name]"),this.httpClient.execute(this.configService.getConfig("subscribeContactUrl"),"POST",this.constructRequestPayload(c,t),this.constructRequestHeaders()).then((e=>e.json().then((t=>429===e.status?{state:"TOO_MANY_REQUESTS"}:{contactId:t.contactId,state:t&&t.next&&t.next.type}))),(()=>({state:"ERROR"}))).then((t=>{let i=this.getTrackingMessageByStatus(t.state);switch(t.state){case"SUCCESS":i&&this.tracking.send(i),d||this.goToView(this.getServices().documentModel.getViews().findIndex((e=>"DOCUMENT_VIEW_TYPE_SUCCESS"===e.label||"DOCUMENT_VIEW_TYPE_SUCCESSFUL_REQUEST"===e.label||"REQUEST_FORM_VIEW_TYPE_SUCCESS"===e.label)));break;case"ALREADY_SUBSCRIBED":i&&this.tracking.send(i),d||this.goToView(this.getServices().documentModel.getViews().findIndex((e=>"DOCUMENT_VIEW_TYPE_SUBSCRIBED"===e.label)));break;case"ERROR":i&&this.tracking.send(i),this.goToView(this.getServices().documentModel.getViews().findIndex((e=>"DOCUMENT_VIEW_TYPE_ERROR"===e.label)));break;case"TOO_MANY_REQUESTS":i&&this.tracking.send(i),this.goToView(this.getServices().documentModel.getViews().findIndex((e=>"DOCUMENT_VIEW_TYPE_ERROR"===e.label))),this.eventEmitter.emit("TOO_MANY_REQUESTS")}t.contactId&&"0"!==t.contactId&&this.eventEmitter.emit("CONTACT_ID_WAS_RECEIVED",t.contactId),e("SUCCESS"===t.state||"ALREADY_SUBSCRIBED"===t.state)})).catch((()=>{this.goToView(a.viewIndexOnError),e(!1)}))}else this.eventEmitter.emit("INVALID_CONTACT_DATA_SUBMIT_ATTEMPT"),e(!1)}constructDataToSent(e,t){let i=Object.assign({},e);return Object.keys(t).forEach((e=>{if(e.startsWith("clConsentId")){if(!e.endsWith("_label")){var n={value:t[e]};t["".concat(e,"_label")]&&(n.text=t["".concat(e,"_label")]),i.consents?i.consents[e]=n:i.consents={[e]:n}}}else i[e]=t[e]})),i}constructRequestPayload(e,t){return e={data:this.constructDataToSent(e,t),referrer:window.location.href,triggeredBy:this.configService.getConfig("triggeredBy")},this.configService.getConfig("widgetDebugMode")&&(e.ignoreTracking=!0),e}constructRequestHeaders(){let e={},t=this.configService.getConfig("clCustomerId");return t&&Object.assign(e,{"cl-customer-id":t}),e}goToView(e,t){this.eventEmitter.emit("GO_TO_VIEW",e,t)}}class cn extends dn{constructor(){super(...arguments),this.type="SUBSCRIBE_CONTACT"}formDataValidation(e){return!(!e.email&&!e.phone)||(this.eventEmitter.emit("SET_SUBSCRIBE_CONTACT_BUTTON_AS_INVALID"),this.formEventsListener=this.form.on(Rt.validationStatusChanged,(()=>{this.eventEmitter.emit("SET_SUBSCRIBE_CONTACT_BUTTON_AS_VALID")})),!1)}getTrackingMessageBeforeSentData(){return"FormFinish_[Name]"}getTrackingMessageByStatus(e){return{SUCCESS:"FormSuccessSubscribe_[Name]",ALREADY_SUBSCRIBED:"FormAlreadySubscribe_[Name]",ERROR:"FormErrorSubscribe_[Name]",TOO_MANY_REQUESTS:"RequestFormError_[Name]"}[e]||""}}class hn extends dn{constructor(){super(...arguments),this.type="REQUEST"}getTrackingMessageBeforeSentData(){return"RequestFormFinish_[Name]"}getTrackingMessageByStatus(e){return{SUCCESS:"RequestFormSuccess_[Name]",ERROR:"RequestFormError_[Name]",TOO_MANY_REQUESTS:"RequestFormError_[Name]"}[e]||""}}class un{constructor(e,t){this.type="DISPATCH_EVENT",this.eventEmitter=e,this.config=t}execute(e){return this.eventEmitter.emit(this.config.params.eventName,null),Promise.resolve(!0)}}class mn{constructor(e){this.type="GO_TO_PREVIOUS_VIEW",this.eventEmitter=e}execute(){return this.eventEmitter.emit(this.type),Promise.resolve(!0)}}class pn{constructor(e){this.type="GO_TO_NEXT_VIEW",this.eventEmitter=e}execute(){return this.eventEmitter.emit(this.type),Promise.resolve(!0)}}class gn{constructor(e){this.configService=e}track(e,t){if(!this.configService.getConfig("widgetDebugMode")){var i=this.configService.getConfig("formVariantId");if(i){e=+i.split("v")[1];let n=+i.split("v")[0].replace("f","");i=this.configService.getConfig("hostUrl")+"forms/v1/event";let o=this.configService.getConfig("clCustomerId"),r=this.configService.getConfig("clContactId"),a=this.configService.getConfig("triggeredBy"),s=this.configService.getConfig("interactionId"),l=this.configService.getConfig("revision"),d=this.configService.getConfig("appearanceRevision"),c=this.configService.getConfig("browserLanguage"),h=this.configService.getConfig("browserLanguage"),u=this.configService.getConfig("appearanceLanguage");t=btoa(JSON.stringify({formId:n,variantId:e,clCustomerId:o,contactId:r,iid:s,revision:l,appearanceRevision:d,type:"click",referrer:window.location.href,params:t,triggeredBy:a,lang:c,browserLanguage:h,appearanceLanguage:u}));try{navigator.sendBeacon(i,t)}catch(e){Ci.log(e)}}}}}class En extends gn{constructor(e,t,i){super(i),this.type="GO_TO_VIEW",this.eventEmitter=e,this.config=t}execute(){return this.eventEmitter.emit(this.type,this.config.params.viewId||this.config.params.viewIndex),this.config.params.trackClick&&this.track("GoToViewAction",this.config.params.trackClickParams),Promise.resolve(!0)}}class vn{constructor(e,t){this.type="SHOW_WIDGET",this.params=t.params||{},this.eventEmitter=e}execute(){return this.eventEmitter.emit(this.type,this.params),Promise.resolve(!0)}}class _n extends gn{constructor(e,t,i){super(t),this.type="OPEN_LINK",this.params=e.params,this.configService=t,this.tracking=i}execute(e,t){return t.stopPropagation(),this.tracking.send("FormClick_[Name]"),this.track("OpenLinkAction",this.params.trackClickParams),t=this.params.link,e=this.configService.getConfig("utmTag"),this.params.tagsEnabled&&null!=e&&e.enabled&&(t=_n.getDynamicUtmParamsMap(this.configService),e=_n.getUtmTags(e,t),t=_n.appendQueryParamsToLink(this.params.link,e)),window.open(t,this.params.target),Promise.resolve(!0)}static appendQueryParamsToLink(e,t){let i=new URL(e);return Object.keys(t).forEach((e=>{i.searchParams.has(e)||i.searchParams.append(e,t[e])})),i.href}static getUtmTags(e,t){let i={},n=new Map([["utmSource","utm_source"],["utmMedium","utm_medium"],["utmCampaign","utm_campaign"],["utmContent","utm_content"],["utmTerm","utm_term"]]);return["utmSource","utmMedium","utmCampaign","utmContent","utmTerm"].filter((t=>void 0!==(null==e?void 0:e[t]))).forEach((o=>{let r=n.get(o);o=t.has(e[o])?t.get(e[o]):encodeURIComponent(e[o]),i[r]=o})),null!=e&&e.customTagsEnabled&&Object.keys((null==e?void 0:e.utmCustomTags)||{}).filter((t=>{var i;return void 0!==(null===(i=null==e?void 0:e.utmCustomTags)||void 0===i?void 0:i[t])})).forEach((t=>i[t]=encodeURIComponent(e.utmCustomTags[t]))),i}static getDynamicUtmParamsMap(e){return new Map([["$widgetId",_n.normalizeUtmParam(e.getConfig("widgetId"))],["$widgetName",encodeURIComponent(_n.normalizeUtmParam(e.getConfig("widgetName")))],["$widgetType",_n.normalizeUtmParam(e.getConfig("type"))],["$widgetLang",_n.normalizeUtmParam(e.getConfig("browserLanguage"))],["$contactId",encodeURIComponent(_n.normalizeUtmParam(e.getConfig("clContactId")))]])}static normalizeUtmParam(e){return null==e?"":String(e)}}class fn extends gn{constructor(e,t,i){super(i),this.type="CLOSE_WIDGET",this.params=t.params,this.eventEmitter=e,this.configService=i}execute(){return new Promise((e=>{this.eventEmitter.emit(this.type,(()=>{e(!0)})),this.track("CloseWidgetAction",this.params.trackClickParams)}))}}class yn{constructor(e,t,i,n,o,r,a){this.eventEmitter=e,this.form=t,this.configService=i,this.tracking=n,this.stateService=o,this.context=r,this.getServices=a}get(e){switch(e.type){case"SUBSCRIBE_CONTACT":return new cn(this.eventEmitter,this.form,e,bi,this.configService,this.tracking,this.stateService,this.context,this.getServices);case"REQUEST":return new hn(this.eventEmitter,this.form,e,bi,this.configService,this.tracking,this.stateService,this.context,this.getServices);case"DISPATCH_EVENT":return new un(this.eventEmitter,e);case"GO_TO_VIEW":return new En(this.eventEmitter,e,this.configService);case"GO_TO_PREVIOUS_VIEW":return new mn(this.eventEmitter);case"GO_TO_NEXT_VIEW":return new pn(this.eventEmitter);case"SHOW_WIDGET":return new vn(this.eventEmitter,e);case"OPEN_LINK":return new _n(e,this.configService,this.tracking);case"CLOSE_WIDGET":return new fn(this.eventEmitter,e,this.configService);default:throw Error("Not supported action type ".concat(e.type))}}}class Tn{calculateFromWeights(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e3,i=e.map((e=>Object.assign(Object.assign({},e),{weight:e.weight*t})));var n=D(i.map((e=>parseFloat(e.weight))));n=Math.floor(Math.random()*(n+1-1))+1;let o=this._buildRanges(i),r=this._getRangeByWeight(o,n);return i.find((e=>e.id===r.id))}_getRangeByWeight(e,t){return e.find((e=>t>=e.from&&t<=e.to))}_buildRanges(e){let t=[];for(let i=0;i<e.length;i++){let n=e[i];if(0===i)t.push({from:1,to:parseFloat(n.weight),id:n.id});else{let e=t[t.length-1].to,i=e+parseFloat(n.weight);t.push({from:e+1,to:i,id:n.id})}}return t}}class In{constructor(e,t,i){this.instanceModel=e,this.httpClient=t,this.configService=i,this.configService.getConfig("prizePoolModels")&&(e=this.configService.getConfig("prizePoolModels").find((e=>e.id===this.instanceModel.id)))&&(this.instanceModel=e),this.prizeOption=null,this.storageService=this.configService.getConfig().storage,this.randomDistributor=new Tn}async load(){if("MANUAL"===this.instanceModel.sourceType&&!this.instanceModel.options){let e="".concat(this.configService.getConfig("hostUrl"),"forms/v1/prize/pool/").concat(this.instanceModel.id);this.instanceModel=await this.httpClient.execute(e,"GET").then((e=>e.json()))}}getModel(){return this.instanceModel}async getPrize(){var e,t;if(!this.instanceModel)return null;if("FIXED"===this.instanceModel.model)return this.instanceModel.data;if("MANUAL"===this.instanceModel.sourceType){let i=null===(e=this.storageService)||void 0===e?void 0:e.get(this.instanceModel.id);return e=i&&this.instanceModel.options.find((e=>e.id===i)),i&&e?this.mapPrizeOption(e):(this.prizeOption=this._calculatePrize(),null===(t=this.storageService)||void 0===t||t.set(this.instanceModel.id,this.prizeOption.id),this.mapPrizeOption(this.prizeOption))}}submitPrize(){}mapPrizeOption(e){let t=this._mapLabelSuffix(e.value,e.valueType);return{id:e.id,label:t,value:e.code}}_calculatePrize(){let e=D(this.instanceModel.options.map((e=>parseFloat(e.weight))));return this.randomDistributor.calculateFromWeights(this.instanceModel.options,e)}_mapLabelSuffix(e,t){return"DISCOUNT_PERCENTAGE"===t?"".concat(e,"%"):e}}class On{constructor(e,t){this.httpClient=e,this.configService=t}get(e){return new In(e,this.httpClient,this.configService)}}class An{constructor(e){this.eventEmitter=e,this.registeredActions=[],this.eventEmitter.on("EXECUTE_ACTION_BY_PREDICATE",(e=>{var t;"function"==typeof e.predicate&&(null===(t=this.registeredActions.find(e.predicate))||void 0===t||t.execute(void 0,void 0,!0,e.overrideParams))}))}register(e){this.registeredActions.push(e)}getRegisteredActions(){return this.registeredActions}}class Cn extends pt{constructor(e,t,i){super(),this.addRecord=(e,t)=>{e=this.data.addRecord(e,t),this.subscribeToSource(t),this.emit("RECORD_ADDED",e)},this.updateRecord=(e,t)=>{null!=(e=this.data.getRecord(e))&&e.update(t)&&this.emit("RECORD_UPDATED",e.getValue())},this.getRecord=e=>this.data.getRecord(e),this.sourceRegistry=e,this.data=t,this.isStaticMode=i,this.initSources()}getRegistry(){return this.sourceRegistry}deleteRecord(e){let t=this.data.getRecord(e);t&&!this.isStaticMode&&(this.data.deleteRecord(e),this.emit("RECORD_DELETED",t))}getRecordsMap(){return this.data.getRecordsMap()}getKVMap(){return this.data.getKVMap()}initSources(){this.sourceRegistry.registerInitialSources(),this.sourceRegistry.getSources().forEach((e=>{e=e.getValue(),!this.isStaticMode&&e&&Object.keys(e).length&&Object.entries(e).forEach((e=>{let[t,i]=e;this.addRecord(t,i)}))}))}subscribeToSource(e){(e=this.sourceRegistry.getSource(e.sourceId))&&!e.isSubscribed()&&e.subscribe((e=>{let{value:t,componentId:i}=e;this.updateRecord(i,{value:t})}))}}class Sn{constructor(e,t){this.context=e,this.configService=t}destroy(){}process(e,t,i){this.element=e,this.mergeTags=t,this.componentId=i,this.mergeTags&&0!==Object.keys(this.mergeTags).length&&this.element.childNodes.forEach((e=>{if(e.nodeType!==Node.TEXT_NODE&&"MERGE_TAG"===e.getAttribute("cl-type")){var t=e.getAttribute("cl-id");(t=this.mergeTags[t])&&this.processSingleMergeTag(e,t)}}))}processSingleMergeTag(e,t){throw Error("BaseMergeTagsProcessor: processSingleMergeTag is not implemented")}}class bn extends Sn{processSingleMergeTag(e,t){let i=this.context.getRecord(t.id),n=this.context.getRegistry().getSource(t.sourceId);var o,r=this.context.getKVMap();let a;!i&&r[t.id]&&(a=r[t.id]),n&&(a=(null==(r=n.getValue((null==i?void 0:i.value.id)||t.id))?void 0:r.value)||a,r&&"function"==typeof r.processor&&(o=r.processor(n,t))),r=this.configService.getConfig("previewMode")||this.configService.getConfig("editorPreviewMode")||this.configService.getConfig("demoMode"),o=o||a||(null==i?void 0:i.value.value)||t.fallbackValue||(r?t.exampleValue:""),i||this.context.addRecord(t.id,Object.assign(Object.assign({recordKey:t.id,id:t.id,sourceId:t.sourceId},n?n.getValue(t.id):{}),{value:o})),e.style.fontFamily="inherit",w(e).textContent=o}}class Nn extends pt{constructor(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};super(),this.config=e}subscribe(){}getValue(e){return e?{processor:(e,t)=>Nn.processModel(t,this.config.sessionUrlSearchParams)}:{}}static processModel(e,t){if(!e.arguments)return"";if(e=e.arguments.find((e=>"urlQueryParamName"===e.name)),t||(t=[new URL(window.location.href).search]),!e||!e.value)return"";let i;for(let n=t.length-1;0<=n;n--){let o=new URLSearchParams(t[n]).getAll(e.value).filter(Boolean);if(o.length){i=o;break}}return i?i.join(", "):""}}Nn.sourceId="URL_QUERY_PARAMS";class Rn extends Sn{constructor(e){super(e),this.contextSubscriptions=[this.context.on("RECORD_ADDED",this._handleContextEvents.bind(this)),this.context.on("RECORD_UPDATED",this._handleContextEvents.bind(this)),this.context.on("RECORD_DELETED",this._handleContextEvents.bind(this))]}destroy(){super.destroy(),this.contextSubscriptions&&this.contextSubscriptions.forEach((e=>e.off()))}processSingleMergeTag(e,t){if(e){var i=this.context.getRecord(t.id);e.style.fontFamily="inherit",w(e).textContent=t.exampleValue;var n=!t.exampleValue||t.arguments&&!t.arguments.every((e=>e.value));!i&&t.sourceId!==gt.sourceId&&t.sourceId!==Nn.sourceId||n?e.classList.add("tag-error"):e.classList.remove("tag-error")}}_handleContextEvents(e){var t;(e=null===(t=this.mergeTags)||void 0===t?void 0:t[e.key])&&this.processSingleMergeTag(this.element.querySelector('[cl-id="'.concat(e.id,'"]')),e)}}class Ln{constructor(e,t,i){this.isStaticMode=e,this.context=t,this.configService=i}create(){return this.isStaticMode?new bn(this.context,this.configService):new Rn(this.context,this.configService)}}class Mn{constructor(e,t){let i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};this.id=e,this.subscriptionEntry=t,this.config=i,this.subscribed=!1}subscribe(e){this.subscribed=!0,this.subscriptionEntry.subscribe(e)}getValue(e){return this.subscriptionEntry.getValue(e)}isSubscribed(){return this.subscribed}}class Dn{constructor(e){this.formService=e}subscribe(e){this.formService.on(Mt.valueChanged,(t=>{e({key:t.getName(),value:t.getValue(),componentId:t.getComponentId()})})),this.formService.on(Mt.controlRegistered,(t=>{e({key:t.getName(),value:t.getValue()})}))}getValue(e){var t;return e?null===(t=this.formService.getControl(e))||void 0===t?void 0:t.getValue():this.formService.getControlsMap()}}class wn{constructor(e,t){this.registeredSourcesMap={},this.sources=[new Mn("FORM",new Dn(e)),new Mn("DATA_LAYER",new gt),new Mn("URL_QUERY_PARAMS",new Nn(t))]}registerSource(e){if(this.registeredSourcesMap[e.id])throw Error("Source with id ".concat(e.id," already registered"));return this.registeredSourcesMap[e.id]=e}getSource(e){return this.registeredSourcesMap[e]}getSources(){return Object.values(this.registeredSourcesMap)}registerInitialSources(){return this.sources.map((e=>this.registerSource(e)))}}class Pn{constructor(e,t){this.key=e,this.value=t}getKey(){return this.key}getValue(){return this.value}update(e){let t=JSON.stringify(this.value);return e=Object.assign(Object.assign({},this.value),e),t!==JSON.stringify(e)&&(this.value=e,!0)}}class xn{constructor(){this.records={}}getRecord(e){return this.records[e]}addRecord(e,t){return t=new Pn(e,t),this.records[e]=t}deleteRecord(e){let t=this.records,i=t[e];e=["symbol"==typeof e?e:e+""];var n,o={};for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&0>e.indexOf(n)&&(o[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)0>e.indexOf(n[r])&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(o[n[r]]=t[n[r]])}return this.records=o,i}getRecordsMap(){return this.records}getKVMap(){return Object.keys(this.records).reduce(((e,t)=>(e[(t=this.records[t]).value.id]=t.value.value,e)),{})}}class Vn{constructor(e,t,i,n,o,r,a,s,l){var d;e=new xt(e);var c=!o;o=c?new Ht(e):new kt(e,o);let h=new St,u=new Vt(t),m=new Bt(e,u),p=new Wt;p.setStyles(r);let g=null!==(d=t.componentFactoryClass)&&void 0!==d?d:on;d=new pt,r=new Dt(n);var E=new wn(r,t),v=new xn;E=new Cn(E,v,c),l=new(null!=l?l:yn)(d,r,u,n,h,E,(()=>this.services)),v=new An(d);let _=new On(bi,u);a=new g(h,d,r,e,o,u,p,n,a,l,v,_,E,c=new Ln(c,E,u),m),t=new an(e,o,t,a,d),this.services={documentService:new Gt(e,t,s),componentResolver:i,documentModel:e,state:h,form:r,eventEmitter:d,config:u,resizeListener:o,mobileDeviceOrientationListener:m,componentFactory:a,viewRenderer:t,commonStylesService:p,tracking:n,actionFactory:l,actionRegister:v,prizePoolFactory:_,context:E,mergeTagsProcessorFactory:c}}destroy(){Object.keys(this.services).filter((e=>"viewRenderer"!==e)).forEach((e=>this.services[e]&&this.services[e].destroy&&this.services[e].destroy()))}}class kn extends pt{constructor(e,t,i,n,o){super(),this.eventEmitter=e,this.documentModel=t,this.viewRenderer=i,this.optionalDocumentStyles=n,this.services=o,this.currentViewComponentRef=this.currentViewIndex=null,this.eventEmitter.on("TOO_MANY_REQUESTS",(()=>{this.viewDestroy(),this.documentContainer.innerText="Too many requests"})),this.transitions=[]}getCurrentViewIndex(){return this.currentViewIndex}start(){return this.documentContainer=window.document.createElement("div"),this.documentContainer.setAttribute("cl-document",""),this.optionalDocumentStyles&&Object.keys(this.optionalDocumentStyles).forEach((e=>{this.documentContainer.style[e]=this.optionalDocumentStyles[e]})),this.navigate(0),this.eventEmitter.on("GO_TO_VIEW",((e,t,i)=>{"number"==typeof e?this.navigate(e,i):-1===(t=this.documentModel.getModel().views.findIndex((t=>t.id===e)))?this.eventEmitter.emit("WIDGET_NAVIGATION_STATE_NOT_FOUND",{viewPointer:e}):this.navigate(t,i)})),this.eventEmitter.on("GO_TO_PREVIOUS_VIEW",(()=>{0<this.getCurrentViewIndex()&&this.navigate(this.getCurrentViewIndex()-1)})),this.eventEmitter.on("GO_TO_NEXT_VIEW",(()=>{this.documentModel.getModel().views[this.getCurrentViewIndex()+1]&&this.navigate(this.getCurrentViewIndex()+1)})),this.eventEmitter.on("CONTACT_DATA_SUBMIT",(()=>{this.contactDataSubmitted=!0})),this.documentContainer}destroy(){this.viewDestroy(),this.documentContainer&&this.documentContainer.remove()}navigate(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=this.documentModel.getView(e),n=this.currentViewIndex;if(this.currentViewIndex!==e){if(!i)throw this.eventEmitter.emit("WIDGET_NAVIGATION_STATE_NOT_FOUND",{navigateTo:e}),Error("View was not found by index: "+e);setTimeout((()=>{let t=0===e,o=this.contactDataSubmitted,r=0<this.services.form.getControlsAsArray().length;!t&&ln(i)&&r&&!o&&(this.eventEmitter.emit("WIDGET_NAVIGATION_STATE_NOT_FOUND",{toSystemStateWithoutSubmitFromIndex:n,ctx:this.services.context.getKVMap()}),this.services.actionFactory.get({type:"REQUEST"}).execute(void 0,void 0,!0,{skipValidation:!0}))}),300);var o=this.viewRenderer.render(i,e);this.viewDestroy(),this.documentContainer.appendChild(o),this.currentViewComponentRef=o,this.currentViewIndex=e,this.transitions.push({prevViewIndex:n,currentViewIndex:e,currentViewComponentRef:o,contactDataSubmitted:this.contactDataSubmitted,routeState:t}),this.emit("NAVIGATION_END")}}viewDestroy(){this.currentViewComponentRef&&this.viewRenderer.destroy(this.currentViewComponentRef)}getDocumentContainer(){return this.documentContainer}getLastTransition(){return this.transitions[this.transitions.length-1]}}class Fn{static getValueByPropPath(e,t){let i=e||{};return t.forEach((e=>{i=null==i?void 0:i[e]})),i}static transformPropPathStringToArray(e){return e.split(",")}static constructDynamicPropPath(e,t){let i=[];return e.filter((e=>e.includes("[id]"))).length?(e.forEach((e=>{var n=e.split(",[id");if(!(n=Fn.getValueByPropPath(t.props,Fn.transformPropPathStringToArray(n[0]))))return null;Object.keys(n).forEach((t=>{i.push(e.replace("[id]",t))})),i=Fn.constructDynamicPropPath(i,t)})),i):e}static applyTranslationObjectToComponentsIfNeeded(e,t,i){let n=e.views;return i?(i=JSON.parse(i||"{}"),Object.keys(i).length?(e.views=this.applyTranslationObjectToComponents(n,t,i),e):e):e}static setProp(e,t,i){e[t.id]&&(e=e[t.id][i])&&(t.props=this._setValueByPropPath({props:t.props,propPath:i.split(","),value:e}))}static applyTranslationObjectToComponents(e,t,i){let n=e=>{const o=t.find((t=>t.name===e.name&&t.version===e.version));o&&o.i18nPropPaths&&o.i18nPropPaths.length&&o.i18nPropPaths.forEach((t=>{t.includes("[id]")?Fn.constructDynamicPropPath(["".concat(t)],e).forEach((t=>{Fn.setProp(i,e,t)})):Fn.setProp(i,e,t)})),e.children&&e.children.length&&e.children.forEach(n)};return e.forEach(n),e}static _setValueByPropPath(e){let t=e.props;var i=e.propPath;let n=e.property;return n||e.element&&e.elementProp||(n=i.slice(-1)[0],i=i.slice(0,-1)),i.forEach((e=>{t=t&&t[e]})),e.element&&e.elementProp?(i=t.findIndex((t=>t.element===e.element)),"object"==typeof t[i][e.elementProp]?t.splice(i,1,Object.assign(Object.assign({},t[i]),{[e.elementProp]:Object.assign(Object.assign({},t[i][e.elementProp]),{[n]:e.value})})):t.splice(i,1,Object.assign(Object.assign({},t[i]),{[e.elementProp]:e.value})),e.props):(t[n]=e.value,e.props)}}class Un{constructor(e,t){let i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=3<arguments.length?arguments[3]:void 0,o=4<arguments.length?arguments[4]:void 0,r=5<arguments.length?arguments[5]:void 0;var a;this.entryModuleType="STATIC",this.componentResolver=t,this.config=Object.assign(Object.assign({},i),{entryModuleType:this.entryModuleType}),this.documentJson=e,this.translations=n,this.viewRouter=this.viewRenderer=this.compositionRoot=null,this.trackingService=o||{send:()=>{},trackClick:()=>{}},this.layoutType=r,(null!==(a=this.config.componentRegister)&&void 0!==a?a:nn).register(R,this.entryModuleType)}init(e){this.documentJson=Fn.applyTranslationObjectToComponentsIfNeeded(JSON.parse(JSON.stringify(this.documentJson)),this.componentResolver.getComponentManifests(),this.translations),e=new Vn(this.documentJson,this.config,this.componentResolver,this.trackingService,null,"",this.layoutType,this.entryModuleType,e);let t=new kn(e.services.eventEmitter,e.services.documentModel,e.services.viewRenderer,this.config&&this.config.optionalDocumentStyles,e.services);e.services.viewRouter=t,this.compositionRoot=e,this.viewRenderer=e.services.viewRenderer,this.componentFactory=e.services.componentFactory,this.viewRouter=t;let i=this.compositionRoot.services.documentModel.getShared().cssVars;return Promise.resolve().then((()=>Ct.override(i,this.viewRouter.getDocumentContainer()))),t.start()}destroy(){var e,t;null===(e=this.viewRouter)||void 0===e||e.destroy(),null===(t=this.compositionRoot)||void 0===t||t.destroy()}performAction(e,t){if(t=this.compositionRoot.services.documentService.handleModelUpdate(e,t),"COLOR_SCHEMA_UPDATE"===e)e=this.compositionRoot.services.documentModel.getShared().cssVars,Ct.override(e,this.viewRouter.getDocumentContainer());return t}listenAction(e,t){this.compositionRoot.services.eventEmitter.on(e,((e,i)=>{t(e,i)}))}}class Bn extends pt{constructor(e){super(),this.propsRequestListener=e=>{var t=e.detail.id;let i=e.detail.widgetId;i&&this.params.config.formVariantId&&this.params.config.formVariantId!==i||(t=mt.getNodeById(this.entryModule.compositionRoot.services.documentModel.getViews(),t))&&(e.detail.props=this.entryModule.componentFactory.constructProps(t,this.entryModule.viewRenderer.viewResourceManager))},this.params=e,this.entryModule=null,this.controllers=[]}disconnect(){window.removeEventListener("cl-props-request",this.propsRequestListener)}addPropsRequestEventListener(){window.addEventListener("cl-props-request",this.propsRequestListener)}setEntryModule(e){this.entryModule=e}navigate(e){this.entryModule&&this.entryModule.viewRouter&&this.entryModule.viewRouter.navigate(e)}updateSharedPropsByType(e,t,i){for(let n of this.controllers)if("function"==typeof n.updateSharedPropsByType&&n.params.widgetType===e)return n.updateSharedPropsByType(t,i);return{}}updateSharedParams(e,t){var i;let n=this.updateSharedPropsByType(this.params.widgetType,e.documentModel.shared,t);return Object.assign(Object.assign({},e),{documentModel:Object.assign(Object.assign({},e.documentModel),{shared:Object.assign(Object.assign(Object.assign({},e.documentModel.shared),{closeIcon:Object.assign(Object.assign({},e.documentModel.shared.closeIcon),null===(i=t.shared)||void 0===i?void 0:i.closeIcon)}),n)})})}setPosition(e){this.controllers.forEach((t=>{"function"==typeof t.setPosition&&(t.params=this.updateSharedParams(t.params,e),t.setPosition(e.isMobileEnv))}))}setCloseIcon(e){this.controllers.forEach((t=>{"function"==typeof t.setCloseIconParams&&(t.params=this.updateSharedParams(t.params,e),t.setCloseIconParams(e.isMobileEnv))}))}setLauncherEntryAnimationAndPosition(e){this.controllers.forEach((t=>{"function"==typeof t.setEntryAnimationAndPosition&&(t.params=this.updateSharedParams(t.params,e),t.setEntryAnimationAndPosition(e.isMobileEnv))}))}performAction(e,t){let i=this.entryModule.performAction(e,t);return this.controllers.forEach((i=>{if("COLOR_SCHEMA_UPDATE"===e)Ct.override(t,i.getConnectedElement())})),i}setEnvironment(e){this.entryModule.performAction("ENVIRONMENT_UPDATE",e);let t={isMobileEnv:e.isMobileEnv};this.setCloseIcon(t),this.setPosition(t),this.setLauncherEntryAnimationAndPosition(t),this.controllers.forEach((t=>{"function"==typeof t.updateScrollbar&&t.updateScrollbar(e.isMobileEnv)}))}}class Hn{constructor(){this.loadedGoogleFonts=[]}addGoogleFonts(e,t){(e||[]).length&&(e=this.getDynamicUrlPart(e,t))&&this.addFonts(e,t)}getDynamicUrlPart(e,t){let i=[];return((t||document).fonts||[]).forEach((e=>i.push("".concat(e.family," ").concat(e.weight," ").concat(e.style)))),t=new Set(i),this.combineUrlDynamicPart(e,t)}combineUrlDynamicPart(e,t){let i="",n=this.makeFontOptions();return e.forEach((e=>{let o="",r="";n.forEach((i=>{if(!t.has("".concat(e," ").concat(i," normal"))){let e="1,".concat(i);r=r?r+";".concat(e):r+e}t.has("".concat(e," ").concat(i," italic"))||(i="0,".concat(i),o=o?o+";".concat(i):o+i)})),(o||r)&&(i+="&family=".concat(e.replace(/ /g,"+"),":ital,wght@").concat(o,";").concat(r))})),i}makeFontOptions(){let e=[];for(let t=0;9>t;t++)e.push(100*(t+1));return e}addFonts(e,t){if((t||document).head){var i=document.createElement("link");i.rel="stylesheet",i.href="https://fonts.googleapis.com/css2?display=swap"+e,(t||document).head.appendChild(i),this.loadedGoogleFonts.push(i)}}removeGoogleFonts(){this.loadedGoogleFonts.forEach((e=>e.remove())),this.loadedGoogleFonts=[]}}class Gn extends Hn{constructor(e,t,i,n){super(),this.params=e,this.eventEmitter=t,this.viewRouter=i,this.documentModel=n,this.connectedElement=null}hasComponentWithResourcesOnTheView(e){if("UPDATING"!==this.params.entryModuleType){var t=0;return e.iterateViewModelAndExecute(this.viewRouter.currentViewIndex,(e=>{var i,n;!0===(null===(n=null===(i=null==e?void 0:e.componentRef)||void 0===i?void 0:i.manifest)||void 0===n?void 0:n.waitForResourcesLoad)&&t++})),0<t}}createSvgElement(e,t,i){let n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttributeNS(null,"viewBox","0 0 "+e+" "+t),n.setAttributeNS(null,"width",e),n.setAttributeNS(null,"height",t),n.innerHTML=i,n}getHideIcon(){return this.createSvgElement(21,21,'<path fill-rule="evenodd" clip-rule="evenodd" d="M13.5582 11.167C13.6018 10.9519 13.6247 10.7293 13.6247 10.5013C13.6247 8.66035 12.1323 7.16797 10.2913 7.16797C10.0634 7.16797 9.84072 7.19086 9.6256 7.23446L10.3945 8.00339C11.6932 8.05612 12.7365 9.09947 12.7892 10.3981L13.5582 11.167ZM8.1189 9.2633C7.91046 9.62829 7.79134 10.0509 7.79134 10.5013C7.79134 11.882 8.91063 13.0013 10.2913 13.0013C10.7418 13.0013 11.1644 12.8822 11.5293 12.6737L12.1346 13.279C11.6067 13.6301 10.9729 13.8346 10.2913 13.8346C8.45039 13.8346 6.95801 12.3423 6.95801 10.5013C6.95801 9.81975 7.16256 9.18597 7.51361 8.65801L8.1189 9.2633Z" fill="#2C2C2C"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M15.7837 13.3901C16.4728 12.7662 17.0357 12.1378 17.4361 11.6517L17.4851 11.5924C17.7606 11.2595 18.0164 10.9504 18.0164 10.4987C18.0164 10.047 17.7606 9.73786 17.4851 9.40501L17.4361 9.3457C16.832 8.61222 15.8577 7.55476 14.6386 6.67763C13.4227 5.80287 11.9277 5.08203 10.2911 5.08203C9.46902 5.08203 8.68264 5.26393 7.94942 5.55587L8.59862 6.20507C9.14557 6.02176 9.71248 5.91536 10.2911 5.91536C11.6843 5.91536 13.0094 6.53209 14.1519 7.35408C15.2911 8.17371 16.2136 9.1722 16.7929 9.8755C17.1465 10.3049 17.183 10.3791 17.183 10.4987C17.183 10.6183 17.1465 10.6925 16.7929 11.1219C16.4027 11.5957 15.8567 12.2034 15.1937 12.8001L15.7837 13.3901ZM6.30424 7.44623C5.22306 8.24755 4.34715 9.19835 3.78941 9.8755C3.43577 10.3049 3.39925 10.3791 3.39925 10.4987C3.39925 10.6183 3.43577 10.6925 3.78941 11.1219C4.36868 11.8252 5.29119 12.8237 6.43042 13.6433C7.57294 14.4653 8.89795 15.082 10.2911 15.082C11.2901 15.082 12.2539 14.765 13.1406 14.2826L13.7526 14.8946C12.7242 15.4892 11.5495 15.9154 10.2911 15.9154C8.65456 15.9154 7.1596 15.1945 5.94374 14.3198C4.72459 13.4426 3.7503 12.3852 3.14617 11.6517L3.09716 11.5924C2.82173 11.2595 2.56592 10.9504 2.56592 10.4987C2.56592 10.047 2.82172 9.73786 3.09716 9.40501L3.14617 9.3457C3.711 8.65993 4.5994 7.69096 5.70897 6.85095L6.30424 7.44623Z" fill="#2C2C2C"/>\n        <path d="M4.45752 2.16602L17.7909 15.4993" stroke="#2C2C2C" stroke-width="0.833333"/>')}getClaspoIcon(){return this.createSvgElement(17,10,'<path d="M13.8946 6.59451C13.337 7.15222 12.5956 7.45921 11.807 7.45921H3.68778C3.09624 7.45921 2.54034 7.22894 2.12199 6.81068C1.70373 6.39243 1.52894 5.83644 1.52894 5.24489C1.52894 4.65345 1.70373 4.09746 2.12199 3.67911C2.54034 3.26095 3.09624 3.03058 3.68778 3.03058C4.23793 3.03058 4.75748 3.23004 5.16396 3.59453V5.36522L10.1517 2.06086L10.1518 2.06116C10.6365 1.73171 11.2081 1.5544 11.807 1.5544C12.5956 1.5544 13.337 1.8614 13.8946 2.4191C14.4524 2.97671 14.7436 3.71827 14.7436 4.50686C14.7436 5.29544 14.4524 6.0369 13.8946 6.59451ZM11.807 0.078125C10.8924 0.078125 10.0424 0.355518 9.33667 0.830762L9.33636 0.830259L5.16396 3.59443V1.8617C4.71187 1.66425 4.21276 1.5544 3.68778 1.5544C1.64956 1.5544 0 3.20678 0 5.24489C0 7.28311 1.64956 8.93549 3.68778 8.93549H11.807C14.2529 8.93549 16.2911 6.95275 16.2911 4.50686C16.2911 2.06086 14.2529 0.078125 11.807 0.078125Z" fill="#F3492C"/>')}addBrandingUTMParametersToURL(e,t){return t={utm_campaign:"Powered_by_promo",utm_medium:"referral",utm_source:t},(e=new URL(e)).search=e.search?e.search+"&".concat(new URLSearchParams(t).toString()):"?".concat(new URLSearchParams(t).toString()),e.toString()}createBrandingElement(){var e=this.getClaspoIcon();let t=this.getHideIcon();this.brandingElement=document.createElement("div"),this.brandingElement.classList.add("cl-branding");var i=document.createElement("a");i.classList.add("cl-link"),i.setAttribute("href",this.addBrandingUTMParametersToURL("https://claspo.io/",this.params.config.siteId)),i.setAttribute("rel","nofollow"),i.setAttribute("target","_blank");let n=document.createElement("span");n.classList.add("cl-branding-text"),n.innerText="Powered by ",i.append(n),i.append(e),(e=document.createElement("span")).classList.add("cl-branding-brand"),e.innerText="Claspo",i.append(e),this.brandingElement.append(i),this.params.config.upgradePlanButton&&((i=document.createElement("div")).classList.add("cl-branding-upgrade-overlay"),i.addEventListener("click",(()=>{this.params.config.upgradePlanUrl&&window.open(this.params.config.upgradePlanUrl,"_self")})),(e=document.createElement("div")).classList.add("cl-branding-upgrade"),e.appendChild(t),this.brandingElement.append(e),this.brandingElement.append(i))}addBrandingElementListeners(){this.brandingElement.addEventListener("click",(()=>{this.eventEmitter.emit("BRANDING_ELEMENT_CLICKED",this.params.widgetType)}))}isMobileEnv(e){return window.matchMedia("(max-width: ".concat(e,"px)")).matches}setConnectedElement(e){this.connectedElement=e}getConnectedElement(){return this.connectedElement}updateSharedPropsByType(e,t){return{}}getDisabledWidgetStyles(e){return"".concat(e,":after {\n      content: '';\n      height: 100%;\n      width: 100%;\n      position: absolute;\n      left: 0;\n      top: 0;\n      z-index: 1;\n    }")}getBrandingStyles(){return".cl-branding {\n          display: flex;\n          flex-direction: row;\n          align-items: center;\n          border-radius: 20px;\n          background: #FFFFFF;\n          height: 21px;\n          line-height: 21px !important;\n          font-family: Arial, sans-serif !important;\n          letter-spacing: 0.3px !important;\n          font-size: 10px !important;\n          font-weight: 400 !important;\n          padding: 0 10px !important;\n          gap: 8px;\n          position: absolute;\n          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n          z-index: 1;\n        }\n        \n        .cl-link {\n          display: flex;\n          align-items: center;\n          gap: 5px;\n          text-decoration: none;\n          cursor: pointer;\n        }\n\n      .cl-branding-text {\n        color: #121221;\n        flex: none;\n        order: 0;\n        flex-grow: 0;\n        font-size: 10px !important;\n        font-family: Arial, sans-serif !important;\n        font-weight: 400 !important;\n        font-style: normal !important;\n      }\n\n      .cl-branding-brand{\n        display: flex;\n        align-items: center;\n        gap: 2px;\n        color: #F3492C;\n        flex: none;\n        order: 1;\n        flex-grow: 0;\n        font-size: 10px !important;\n        font-family: Arial, sans-serif !important;\n        font-weight: 400;\n        font-style: normal !important;\n      }\n\n      .cl-branding-link-overlay,\n      .cl-branding-upgrade-overlay {\n        width: 100%;\n        height: 100%;\n        position: absolute;\n        cursor: pointer;\n      }\n\n      .cl-branding-upgrade {\n        display: flex;\n        align-items: center;\n        order: 2;\n        flex-grow: 0;\n      }\n\n      .cl-branding:hover {\n        box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.07);\n      }"}getViewportWidth(e,t){return Math.max((e||document).documentElement.clientWidth,(t||window).innerWidth||0)}getContainerElementHeight(){return"BODY"===this.containerElement.tagName?Math.max(document.documentElement.clientHeight,window.innerHeight||0):this.containerElement.getBoundingClientRect().height}getActualSizeByEnv(e){var t;return(e=null===(t=this.params.documentModel.shared.actualSize)||void 0===t?void 0:t[e?"mobile":"desktop"])?e:null}getViewContentContainer(){var e;return null===(e=this.documentElement.querySelector('[cl-type="VIEW"]'))||void 0===e?void 0:e.shadowRoot.querySelector("[cl-content-container]")}changeViewAlignToTop(){let e=this.documentElement.querySelector('[cl-type="VIEW"]');"row"===e.style.flexDirection?e.style.alignItems="flex-start":e.style.justifyContent="flex-start"}addWidgetContentClickEventListener(e){e.addEventListener("click",(()=>{this.eventEmitter.emit("WIDGET_CONTENT_CLICKED",e)}))}}class Wn extends Gn{getDefaultCloseIconParams(){let e={verticalOffset:"-42px",horizontalOffset:"-42px",width:"34px",height:"34px",content:"0",inlineSvg:!0,color:"rgb(255, 255, 255)"};return{desktop:e,mobile:Object.assign(Object.assign({},e),{verticalOffset:"-37px",horizontalOffset:"0px"})}}applyCloseIconParams(e,t,i){if(e&&!t)e.style.display="none";else if(e&&t){var n="STATIC"===this.params.entryModuleType,o=n?this.viewRouter.getCurrentViewIndex():this.params.viewIndex;this.setCloseIconVisibility(e,t,o),n&&this.viewRouter.on("NAVIGATION_END",(()=>{this.setCloseIconVisibility(e,t,this.viewRouter.getCurrentViewIndex())})),i=i?t.mobile:t.desktop,e.style.width=i.width,e.style.height=i.height,e.style.top=i.verticalOffset,i.horizontalPosition&&"RIGHT"!==i.horizontalPosition?(e.style.left=i.horizontalOffset,e.style.right=""):(e.style.right=i.horizontalOffset,e.style.left=""),i.inlineSvg?(e.style.color=i.color,e.innerHTML=this.getInlineSvg(i.content),(i=e.firstElementChild).style.width="100%",i.style.height="100%"):(e.style.color="",e.innerHTML="",(n=document.createElement("img")).src=i.content,n.style.width="100%",e.appendChild(n))}}setCloseIconVisibility(e,t,i){var n;t.showOnViews?(i=null===(n=this.documentModel.getModel().views[i])||void 0===n?void 0:n.id,e.style.display=i?t.showOnViews.includes(i)?"block":"none":"block"):e.style.display="block"}getInlineSvg(e){switch(+e){case 0:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.7071 9.70662L9.70711 15.7066L8.29289 14.2924L14.2929 8.2924L15.7071 9.70662Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.29289 9.70711L14.2929 15.7071L15.7071 14.2929L9.70711 8.29289L8.29289 9.70711Z" fill="currentColor"/>\n</svg>\n';case 1:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M18.9916 5.34171C19.4472 5.79732 19.4472 6.53602 18.9916 6.99163L6.99163 18.9916C6.53602 19.4472 5.79732 19.4472 5.34171 18.9916C4.8861 18.536 4.8861 17.7973 5.34171 17.3417L17.3417 5.34171C17.7973 4.8861 18.536 4.8861 18.9916 5.34171Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M5.34171 5.34171C4.8861 5.79732 4.8861 6.53602 5.34171 6.99163L17.3417 18.9916C17.7973 19.4472 18.536 19.4472 18.9916 18.9916C19.4472 18.536 19.4472 17.7973 18.9916 17.3417L6.99163 5.34171C6.53602 4.8861 5.79732 4.8861 5.34171 5.34171Z" fill="currentColor"/>\n</svg>\n';case 2:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11.5 3C6.80558 3 3 6.80558 3 11.5C3 16.1944 6.80558 20 11.5 20C16.1944 20 20 16.1944 20 11.5C20 6.80558 16.1944 3 11.5 3ZM2 11.5C2 6.25329 6.25329 2 11.5 2C16.7467 2 21 6.25329 21 11.5C21 16.7467 16.7467 21 11.5 21C6.25329 21 2 16.7467 2 11.5Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M14.8536 8.85319L8.85355 14.8532L8.14645 14.1461L14.1464 8.14608L14.8536 8.85319Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.14645 8.85355L14.1464 14.8536L14.8536 14.1464L8.85355 8.14645L8.14645 8.85355Z" fill="currentColor"/>\n</svg>\n';case 3:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M17.8648 6.13518C18.0451 6.31542 18.0451 6.60765 17.8648 6.7879L6.78792 17.8648C6.60768 18.0451 6.31545 18.0451 6.13521 17.8648C5.95496 17.6846 5.95496 17.3923 6.13521 17.2121L17.2121 6.13518C17.3923 5.95494 17.6846 5.95494 17.8648 6.13518Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M6.13518 6.13518C5.95494 6.31542 5.95494 6.60765 6.13518 6.7879L17.2121 17.8648C17.3923 18.0451 17.6846 18.0451 17.8648 17.8648C18.045 17.6846 18.045 17.3923 17.8648 17.2121L6.78789 6.13518C6.60765 5.95494 6.31542 5.95494 6.13518 6.13518Z" fill="currentColor"/>\n</svg>\n';case 4:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12ZM7.29289 16.7071C6.90237 16.3166 6.90237 15.6834 7.29289 15.2929L10.5858 12L7.29289 8.70711C6.90237 8.31658 6.90237 7.68342 7.29289 7.29289C7.68342 6.90237 8.31658 6.90237 8.70711 7.29289L12 10.5858L15.2929 7.29289C15.6834 6.90237 16.3166 6.90237 16.7071 7.29289C17.0976 7.68342 17.0976 8.31658 16.7071 8.70711L13.4142 12L16.7071 15.2929C17.0976 15.6834 17.0976 16.3166 16.7071 16.7071C16.3166 17.0976 15.6834 17.0976 15.2929 16.7071L12 13.4142L8.70711 16.7071C8.31658 17.0976 7.68342 17.0976 7.29289 16.7071Z" fill="currentColor"/>\n</svg>\n';case 5:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<circle cx="12" cy="12" r="10" fill="black" fill-opacity="0.1"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.7071 9.70662L9.70711 15.7066L8.29289 14.2924L14.2929 8.2924L15.7071 9.70662Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.29289 9.70711L14.2929 15.7071L15.7071 14.2929L9.70711 8.29289L8.29289 9.70711Z" fill="currentColor"/>\n</svg>\n';case 6:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<circle cx="12" cy="12" r="9" fill="black" fill-opacity="0.1"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12 3.5C7.30558 3.5 3.5 7.30558 3.5 12C3.5 16.6944 7.30558 20.5 12 20.5C16.6944 20.5 20.5 16.6944 20.5 12C20.5 7.30558 16.6944 3.5 12 3.5ZM2.5 12C2.5 6.75329 6.75329 2.5 12 2.5C17.2467 2.5 21.5 6.75329 21.5 12C21.5 17.2467 17.2467 21.5 12 21.5C6.75329 21.5 2.5 17.2467 2.5 12Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.3536 9.35306L9.35355 15.3531L8.64645 14.646L14.6464 8.64596L15.3536 9.35306Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.64645 9.35355L14.6464 15.3536L15.3536 14.6464L9.35355 8.64645L8.64645 9.35355Z" fill="currentColor"/>\n</svg>\n        ';case 7:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<circle cx="12" cy="12" r="9" fill="black" fill-opacity="0.1"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12ZM7.29289 16.7071C6.90237 16.3166 6.90237 15.6834 7.29289 15.2929L10.5858 12L7.29289 8.70711C6.90237 8.31658 6.90237 7.68342 7.29289 7.29289C7.68342 6.90237 8.31658 6.90237 8.70711 7.29289L12 10.5858L15.2929 7.29289C15.6834 6.90237 16.3166 6.90237 16.7071 7.29289C17.0976 7.68342 17.0976 8.31658 16.7071 8.70711L13.4142 12L16.7071 15.2929C17.0976 15.6834 17.0976 16.3166 16.7071 16.7071C16.3166 17.0976 15.6834 17.0976 15.2929 16.7071L12 13.4142L8.70711 16.7071C8.31658 17.0976 7.68342 17.0976 7.29289 16.7071Z" fill="currentColor"/>\n</svg>\n        ';case 8:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<circle cx="12" cy="12" r="9" fill="black" fill-opacity="0.1"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.9138 8.08736C16.1416 8.31516 16.1416 8.68451 15.9138 8.91232L8.9138 15.9123C8.68599 16.1401 8.31664 16.1401 8.08884 15.9123C7.86103 15.6845 7.86103 15.3152 8.08884 15.0874L15.0889 8.08736C15.3167 7.85955 15.686 7.85955 15.9138 8.08736Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.08882 8.08736C7.86102 8.31516 7.86102 8.68451 8.08882 8.91232L15.0888 15.9123C15.3166 16.1401 15.686 16.1401 15.9138 15.9123C16.1416 15.6845 16.1416 15.3152 15.9138 15.0874L8.91378 8.08736C8.68598 7.85955 8.31663 7.85955 8.08882 8.08736Z" fill="currentColor"/>\n</svg>\n        ';case 9:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<circle cx="12" cy="12" r="9" fill="black" fill-opacity="0.1"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.705 8.29392C15.8189 8.40783 15.8189 8.5925 15.705 8.7064L8.70495 15.7064C8.59105 15.8203 8.40638 15.8203 8.29247 15.7064C8.17857 15.5925 8.17857 15.4078 8.29247 15.2939L15.2925 8.29392C15.4064 8.18002 15.5911 8.18002 15.705 8.29392Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.29246 8.29392C8.17856 8.40783 8.17856 8.5925 8.29246 8.7064L15.2925 15.7064C15.4064 15.8203 15.5911 15.8203 15.705 15.7064C15.8189 15.5925 15.8189 15.4078 15.705 15.2939L8.70494 8.29392C8.59104 8.18002 8.40636 8.18002 8.29246 8.29392Z" fill="currentColor"/>\n</svg>\n        '}}addCloseIconEventListener(){this.closeIconElement.addEventListener("click",(()=>{this.eventEmitter.emit("CLOSE_ICON_CLICKED",this.closeIconElement)}))}}class jn extends Wn{constructor(e,t,i,n){super(e,t,i,n),this.zIndex=this.params.zIndex,e=this.params.documentModel.shared.mobileBreakpointWidth,this.floatingBoxRootElement=document.createElement("div"),this.floatingBoxRootElement.insertAdjacentHTML("afterbegin",this._getTemplate(this.params)),this.floatingBoxElement=this.floatingBoxRootElement.querySelector(jn.floatingBoxSelector),this.floatingBoxElement.setAttribute("cl-connector-root-element",At.FLOATING_BOX),this.params.config.formVariantId&&this.floatingBoxElement.setAttribute("cl-widget-id",this.params.config.formVariantId),e=this.isMobileEnv(e),this.closeIconElement=this.floatingBoxElement.querySelector(jn.floatingBoxCloseIconSelector),this.addCloseIconEventListener(),this.addWidgetContentClickEventListener(this.floatingBoxRootElement.querySelector(jn.floatingBoxContentSelector)),this.setPosition(e),this.setCloseIconParams(e),this.params.config.branded&&(this.createBrandingElement(),this.adjustBrandingPosition(),this.floatingBoxElement.appendChild(this.brandingElement),this.addBrandingElementListeners())}adjustBrandingPosition(){this.brandingElement.style.bottom="-30px",this.brandingElement.style.right="0"}setDefaultPositionMobileParams(){var{documentModel:{shared:{floatingBox:e}}}=this.params;null!=e&&e.mobile||(e={verticalPosition:"BOTTOM",horizontalPosition:"LEFT",verticalOffset:this.getMinVerticalOffset(),horizontalOffset:"0px"},this.params=Object.assign(Object.assign({},this.params),{documentModel:Object.assign(Object.assign({},this.params.documentModel),{shared:Object.assign(Object.assign({},this.params.documentModel.shared),{floatingBox:Object.assign(Object.assign({},this.params.documentModel.shared.floatingBox),{mobile:Object.assign({},e)})})})}))}clearPosition(){var e;this.floatingBoxElement.removeAttribute("style"),this.floatingBoxElement.style.zIndex=this.zIndex,this.floatingBoxElement.style.position=null!==(e=this.params.displayPosition)&&void 0!==e?e:"fixed"}getMinVerticalOffset(){return this.params.config.branded?32:0}getVerticalOffset(e){var t=this.params.documentModel.shared.floatingBox;return e=e?t.mobile.verticalOffset:t.verticalOffset,t=this.getMinVerticalOffset(),parseFloat(e)<t?"".concat(t,"px"):e}setPosition(e){this.clearPosition(),this.setDefaultPositionMobileParams();let t=this.params.documentModel.shared.floatingBox,i=e?t.mobile.horizontalOffset:t.horizontalOffset,n=this.getVerticalOffset(e);this.floatingBoxElement.style[(e?t.mobile.horizontalPosition:t.horizontalPosition).toLowerCase()]=i;let o=e?t.mobile.verticalPosition.toLowerCase():t.verticalPosition.toLowerCase();this.params.disableLayoutAnimations||"SLIDE_TO_TOP"!==t.entryAnimation.type?this.floatingBoxElement.style[o]=n:(this.floatingBoxElement.style[o]="".concat(parseFloat(n)-20,"px"),this.floatingBoxElement.style.opacity="0",setTimeout((()=>{this.floatingBoxElement.style[o]=n,this.floatingBoxElement.style.opacity="1"}),50))}setDefaultCloseIconParams(){if(!this.params.documentModel.shared.closeIcon){let e=this.getDefaultCloseIconParams();this.params=Object.assign(Object.assign({},this.params),{documentModel:Object.assign(Object.assign({},this.params.documentModel),{shared:Object.assign(Object.assign({},this.params.documentModel.shared),{closeIcon:Object.assign(Object.assign({},e),{desktop:Object.assign(Object.assign({},e.desktop),{color:"rgb(0, 0, 0)"}),mobile:Object.assign(Object.assign({},e.mobile),{color:"rgb(0, 0, 0)"})})})})})}}setCloseIconParams(e){this.setDefaultCloseIconParams(),this.applyCloseIconParams(this.closeIconElement,this.params.documentModel.shared.closeIcon,e)}connect(e,t,i){return this.hasComponentWithResourcesOnTheView(i.compositionRoot.services.documentModel)&&(this.floatingBoxElement.style.visibility="hidden",i.compositionRoot.services.eventEmitter.on(Qi.VIEW_COMPONENT_RESOURCES_LOADED,(()=>{this.floatingBoxElement.style.visibility="visible"}))),this.documentElement=e,this.containerElement=t,this.floatingBoxRootElement.querySelector(jn.floatingBoxContentSelector).appendChild(e),t.appendChild(this.floatingBoxElement),this.setConnectedElement(this.floatingBoxElement),this.params.disableGoogleFonts||this.addGoogleFonts(this.params.documentModel.shared.googleFonts,t.getRootNode()),e=this.isMobileEnv(this.params.documentModel.shared.mobileBreakpointWidth),this.updateScrollbar(e),this.floatingBoxElement}disconnect(){this.floatingBoxElement.remove(),this.removeGoogleFonts()}updateSharedPropsByType(e,t){var i;return{floatingBox:Object.assign(Object.assign({},e.floatingBox),null===(i=t.shared)||void 0===i?void 0:i.floatingBox)}}updateScrollbar(e){if(!this.params.disableScrollbarCalculation){var t=this.getViewContentContainer();if(t){var i=this.getActualSizeByEnv(e);if(i){var n=parseFloat(this.closeIconElement.style.top);e=this.getVerticalOffset(e),e=parseFloat(e),(n=this.getContainerElementHeight()-(0<n?0:Math.abs(n))-e)>parseFloat(i.height)||(t.style.overflowY="auto",t.style.overflowX="hidden",t.style.maxHeight="".concat(n,"px"),this.changeViewAlignToTop())}}}}_getTemplate(e){return'\n<div class="cl-floating-box">\n  <style>\n  .cl-floating-box {\n    '.concat(this.params.disableLayoutAnimations?"":"transition: 0.3s;","\n  }\n\n  ").concat(e.disabled?this.getDisabledWidgetStyles(jn.floatingBoxSelector):"","\n\n  .cl-floating-box-inner-content {\n     position: relative;\n     max-width: 100vw;\n     z-index: 1;\n  }\n\n  .cl-floating-box-close-icon {\n    position: absolute;\n    cursor: pointer;\n    z-index: 99;\n  }\n\n  ").concat(this.getBrandingStyles(),'\n\n  </style>\n\n  <div class="cl-floating-box-inner-content">\n    <div class="cl-floating-box-close-icon"></div>\n    <div class="cl-floating-box-content"></div>\n  </div>\n</div>\n')}}jn.floatingBoxSelector=".cl-floating-box",jn.floatingBoxContentSelector=".cl-floating-box-content",jn.floatingBoxCloseIconSelector=".cl-floating-box-close-icon";class zn extends Wn{constructor(e,t,i,n){var o;super(e,t,i,n),this.contentLockerRootElement=document.createElement("div"),this.contentLockerRootElement.insertAdjacentHTML("afterbegin",this._getTemplate(this.params)),this.contentLockerElement=this.contentLockerRootElement.querySelector(zn.contentLockerSelector),this.contentLockerElement.setAttribute("cl-connector-root-element",At.CONTENT_LOCKER),this.params.config.formVariantId&&this.contentLockerElement.setAttribute("cl-widget-id",this.params.config.formVariantId),this.contentLockerElement.style.position=null!==(o=this.params.displayPosition)&&void 0!==o?o:"fixed",this.contentLockerElement.style.zIndex=this.params.zIndex,this.params.documentModel.shared.closeIcon&&(e=this.isMobileEnv(this.params.documentModel.shared.mobileBreakpointWidth),t=this.contentLockerRootElement.querySelector(zn.contentLockerContentSelector),this.closeIconElement=document.createElement("div"),this.closeIconElement.classList.add("cl-content-locker-close-icon"),t.appendChild(this.closeIconElement),this.addCloseIconEventListener(),this.addWidgetContentClickEventListener(this.contentLockerElement.querySelector(zn.contentLockerContentSelector)),this.setCloseIconParams(e)),this.params.config.branded&&(this.createBrandingElement(),this.adjustBrandingPosition(),this.contentLockerElement.appendChild(this.brandingElement),this.addBrandingElementListeners())}adjustBrandingPosition(){this.brandingElement.style.right="10px",this.brandingElement.style.bottom="10px"}addBlurryBackdrop(e){e.style.backdropFilter="blur(20px)";let t=new MutationObserver((t=>{t.forEach((t=>{var i;"attributes"===t.type&&"style"===t.attributeName&&(null!==(i=e.style.backdropFilter)&&void 0!==i&&i.includes("blur(20px)")||(e.style.backdropFilter="blur(20px)"))}))}));return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>t.disconnect()}setCloseIconParams(e){this.applyCloseIconParams(this.closeIconElement,this.params.documentModel.shared.closeIcon,e)}connect(e,t,i){this.documentElement=e,this.containerElement=t,this.params.disableGlobalScroll&&document.body.classList.add("cl-noscroll"),this.removeBlurryBackdrop=this.addBlurryBackdrop(this.contentLockerElement);let n=this.contentLockerRootElement.querySelector(zn.contentLockerContentSelector);return n.appendChild(e),t.appendChild(this.contentLockerElement),this.setConnectedElement(this.contentLockerElement),this.params.disableGoogleFonts||this.addGoogleFonts(this.params.documentModel.shared.googleFonts,t.getRootNode()),e=this.isMobileEnv(this.params.documentModel.shared.mobileBreakpointWidth),this.updateScrollbar(e),this.hasComponentWithResourcesOnTheView(i.compositionRoot.services.documentModel)&&(n.style.visibility="hidden",i.compositionRoot.services.eventEmitter.on(Qi.VIEW_COMPONENT_RESOURCES_LOADED,(()=>{n.style.visibility="visible"}))),this.contentLockerElement}disconnect(){var e;this.params.disableGlobalScroll&&document.body.classList.remove("cl-noscroll"),null===(e=this.removeBlurryBackdrop)||void 0===e||e.call(this),this.contentLockerElement.remove(),this.removeGoogleFonts()}updateScrollbar(e){if(!this.params.disableScrollbarCalculation){var t=this.getViewContentContainer();if(t&&this.params.documentModel.shared.actualSize&&(e=this.getActualSizeByEnv(e))){var i=this.getContainerElementHeight();i>parseFloat(e.height)||(t.style.overflowY="auto",t.style.overflowX="hidden",t.style.minHeight="".concat(i,"px"),this.changeViewAlignToTop())}}}_getTemplate(e){return'\n      <div class="cl-content-locker">\n        <style>\n        .cl-content-locker {\n          display: block;\n          top: 0;\n          left: 0;\n          bottom: 0;\n          right: 0;\n          width: 100%;\n          height: 100%;\n        }\n\n        '.concat(e.disabled?this.getDisabledWidgetStyles(zn.contentLockerSelector):"","\n\n        .cl-content-locker-content {\n            width: 100%;\n            height: 100%;\n            min-height: fit-content;\n        }\n\n        .cl-noscroll {\n          overflow: hidden !important;\n        }\n\n        .cl-content-locker-close-icon {\n          z-index: 99;\n          position: absolute;\n          cursor: pointer;\n        }\n\n        ").concat(this.getBrandingStyles(),'\n\n        </style>\n\n          <div class="cl-content-locker-content"></div>\n      </div>')}}zn.contentLockerSelector=".cl-content-locker",zn.contentLockerContentSelector=".cl-content-locker-content",zn.contentLockerCloseIconSelector=".cl-content-locker-close-icon";class Kn extends Wn{constructor(e,t,i,n){super(e,t,i,n),this.zIndex=this.params.zIndex,e=this.params.documentModel.shared.mobileBreakpointWidth,this.floatingBarRootElement=document.createElement("div"),this.floatingBarRootElement.insertAdjacentHTML("afterbegin",this._getTemplate(this.params)),this.floatingBarElement=this.floatingBarRootElement.querySelector(Kn.floatingBarSelector),this.floatingBarElement.setAttribute("cl-connector-root-element",At.FLOATING_BAR),this.params.config.formVariantId&&this.floatingBarElement.setAttribute("cl-widget-id",this.params.config.formVariantId),e=this.isMobileEnv(e),this.closeIconElement=this.floatingBarElement.querySelector(Kn.floatingBarCloseIconSelector),this.addCloseIconEventListener(),this.addWidgetContentClickEventListener(this.floatingBarRootElement.querySelector(Kn.floatingBarContentSelector)),this.setCloseIconParams(e),this.params.config.branded&&(this.createBrandingElement(),this.adjustBrandingPosition(e),this.floatingBarElement.appendChild(this.brandingElement),this.addBrandingElementListeners())}getSharedParams(){return this.params.documentModel.shared.floatingBar}isBottomPosition(e){return"BOTTOM"===e.verticalPosition}adjustBrandingPosition(e){let t=this.getSharedParams();e=e?t.mobile:t.desktop,this.brandingElement.style.right="10px",this.brandingElement.style.zIndex="2",this.isBottomPosition(e)?this.brandingElement.style.top="-30px":this.brandingElement.style.bottom="-30px"}clearPosition(){var e;this.floatingBarElement.removeAttribute("style"),this.floatingBarElement.style.zIndex=this.zIndex,this.floatingBarElement.style.position=null!==(e=this.params.displayPosition)&&void 0!==e?e:"fixed",this.modifiedHtmlBodyElement&&this.originalHtmlBodyElementMarginTop&&(this.modifiedHtmlBodyElement.style.marginTop=this.originalHtmlBodyElementMarginTop),this.modifiedFloatingElement&&(this.modifiedFloatingElement.style.top=this.originalModifiedFloatingElementTop)}setTopPosition(e){this.floatingBarElement.style.left="0px",this.floatingBarElement.style.top="0px"}setBottomPosition(e){this.floatingBarElement.style.left="0px",this.floatingBarElement.style.bottom="0px"}setPosition(e){this.clearPosition();var t=this.getSharedParams();t=e?t.mobile:t.desktop,this.isBottomPosition(t)?this.setBottomPosition(t):this._setTopPosition(e,t)}updateSharedPropsByType(e,t){var i;return{floatingBar:Object.assign(Object.assign({},e.floatingBar),null===(i=t.shared)||void 0===i?void 0:i.floatingBar)}}getOtherStyles(){return""}async _setTopPosition(e,t){if(this.modifiedHtmlBodyElement=this.modifiedFloatingElement=null,"body"===this.containerElement.tagName.toLowerCase()&&this.params.documentModel.shared.actualSize&&!this.params.disableSmartPosition&&(e=e?this.params.documentModel.shared.actualSize.mobile:this.params.documentModel.shared.actualSize.desktop)){e=e.height;var i=this.containerElement.getRootNode(),n=this._getElementAtTheTopOfTheViewport(i);n&&(n=this._findFloatingElement(n))&&(this.modifiedFloatingElement=n,this.originalModifiedFloatingElementTop=getComputedStyle(n).top,n.style.top=e),this.modifiedHtmlBodyElement=i.body,this.originalHtmlBodyElementMarginTop=getComputedStyle(this.modifiedHtmlBodyElement).marginTop,this.modifiedHtmlBodyElement.style.marginTop=e}this.setTopPosition(t)}_getElementAtTheTopOfTheViewport(e){let t=this.getViewportWidth(e,e.defaultView||e.parentWindow)/2,i=e.elementFromPoint(t,0);return i!==e.body?i:e.elementFromPoint(t,50)}_findFloatingElement(e){let t=null;for(;e;){let i=getComputedStyle(e);if(!(e&&e.getAttribute("cl-connector-root-element")||"fixed"!==i.position)||"sticky"===i.position){t=e;break}e=e.parentElement}return t}setCloseIconParams(e){this.applyCloseIconParams(this.closeIconElement,this.params.documentModel.shared.closeIcon,e)}connect(e,t,i){return this.containerElement=t,this.floatingBarRootElement.querySelector(Kn.floatingBarContentSelector).appendChild(e),t.appendChild(this.floatingBarElement),this.setConnectedElement(this.floatingBarElement),this.setPosition(this.isMobileEnv(this.params.documentModel.shared.mobileBreakpointWidth)),this.params.disableGoogleFonts||this.addGoogleFonts(this.params.documentModel.shared.googleFonts,t.getRootNode()),this.hasComponentWithResourcesOnTheView(i.compositionRoot.services.documentModel)&&(this.floatingBarElement.style.visibility="hidden",i.compositionRoot.services.eventEmitter.on(Qi.VIEW_COMPONENT_RESOURCES_LOADED,(()=>{this.floatingBarElement.style.visibility="visible"}))),this.floatingBarElement}disconnect(){this.clearPosition(),this.floatingBarElement.remove(),this.removeGoogleFonts()}_getTemplate(e){return'\n      <div class="cl-floating-bar">\n        <style>\n        .cl-floating-bar {\n          width: 100%;\n        }\n\n        '.concat(e.disabled?this.getDisabledWidgetStyles(Kn.floatingBarSelector):"","\n\n        .cl-floating-bar-inner-content {\n           position: relative;\n           max-width: 100vw;\n           z-index: 1;\n        }\n\n        .cl-floating-bar-close-icon {\n          position: absolute;\n          cursor: pointer;\n          z-index: 99;\n        }\n\n      ").concat(this.getOtherStyles(),"\n\n       ").concat(this.getBrandingStyles(),'\n        </style>\n\n        <div class="cl-floating-bar-inner-content">\n          <div class="cl-floating-bar-close-icon"></div>\n          <div class="cl-floating-bar-content"></div>\n        </div>\n      </div>\n    ')}}Kn.floatingBarSelector=".cl-floating-bar",Kn.floatingBarContentSelector=".cl-floating-bar-content",Kn.floatingBarCloseIconSelector=".cl-floating-bar-close-icon";class Xn extends Gn{constructor(e,t,i,n){super(e,t,i,n),this.zIndex=this.params.zIndex,this.launcherRootElement=document.createElement("div"),this.launcherRootElement.insertAdjacentHTML("afterbegin",this._getTemplate(this.params)),this.launcherElement=this.launcherRootElement.querySelector(Xn.launcherSelector),this.launcherElement.setAttribute("cl-connector-root-element",At.LAUNCHER),this.params.config.formVariantId&&this.launcherElement.setAttribute("cl-widget-id",this.params.config.formVariantId),this.defaultStylesElement=this.launcherElement.querySelector(Xn.launcherStylesSelector).cloneNode(!0),this.addWidgetContentClickEventListener(this.launcherRootElement.querySelector(Xn.launcherContentSelector))}connect(e,t,i){return this.launcherRootElement.querySelector(Xn.launcherContentSelector).appendChild(e),t.appendChild(this.launcherElement),this.setEntryAnimationAndPosition(this.isMobileEnv(this.params.documentModel.shared.mobileBreakpointWidth)),this.setConnectedElement(this.launcherElement),this.params.disableGoogleFonts||this.addGoogleFonts(this.params.documentModel.shared.googleFonts,t.getRootNode()),this.hasComponentWithResourcesOnTheView(i.compositionRoot.services.documentModel)&&(this.launcherElement.style.visibility="hidden",i.compositionRoot.services.eventEmitter.on(Qi.VIEW_COMPONENT_RESOURCES_LOADED,(()=>{this.launcherElement.style.visibility="visible"}))),this.launcherElement}disconnect(){this.launcherElement.remove(),this.removeGoogleFonts()}setEntryAnimationAndPosition(e){var t=this.params.documentModel.shared.launcher;this.setLoopAnimation(t.loopAnimation);let i=(e=e?t.mobile:t.desktop).verticalPosition.toLowerCase(),n=e.horizontalPosition.toLowerCase();var o=["SLIDE_TO_TOP","SLIDE_TO_BOTTOM","SLIDE_TO_LEFT","SLIDE_TO_RIGHT"];if(this.params.disableLayoutAnimations||!o.includes(t.entryAnimation.type))this.launcherElement.style[n]=e.horizontalOffset,this.launcherElement.style[i]=e.verticalOffset,this.launcherElement.style.opacity="1";else{if("SLIDE_TO_TOP"===t.entryAnimation.type||"SLIDE_TO_BOTTOM"===t.entryAnimation.type){o=n;var r=e.horizontalOffset,a=i,s=e.verticalOffset;t="SLIDE_TO_TOP"===t.entryAnimation.type?"TOP"===e.verticalPosition?20:-20:"TOP"===e.verticalPosition?-20:20}else o=i,r=e.verticalOffset,a=n,s=e.horizontalOffset,t="SLIDE_TO_LEFT"===t.entryAnimation.type?"LEFT"===e.horizontalPosition?20:-20:"LEFT"===e.horizontalPosition?-20:20;this.launcherElement.style[o]=r,this.launcherElement.style[a]="".concat(parseFloat(s)+t,"px"),setTimeout((()=>{this.launcherElement.style[a]=s,this.launcherElement.style.opacity="1"}),50)}}clearLoopAnimations(){var e;let t=[];this.launcherElement.classList.forEach((e=>{e.startsWith(zt.animationClassPrefix)&&t.push(e)})),this.launcherElement.classList.remove(...t),this.launcherElement.querySelector(Xn.launcherStylesSelector).innerHTML=this.defaultStylesElement.innerHTML,this.launcherElement.removeAttribute("style"),this.launcherElement.style.zIndex=this.zIndex,this.launcherElement.style.position=null!==(e=this.params.displayPosition)&&void 0!==e?e:"fixed"}updateSharedPropsByType(e,t){var i;return{launcher:Object.assign(Object.assign({},e.launcher),null===(i=t.shared)||void 0===i?void 0:i.launcher)}}setLoopAnimation(e){this.clearLoopAnimations(),this.params.disableLayoutAnimations||(this._applyLoopAnimationParams(e),this.launcherElement.classList.add(zt.animationClassPrefix+e.type))}_applyLoopAnimationParams(e){e.params&&Object.keys(e.params).forEach((t=>{let i=e.params[t];this.launcherElement.style.setProperty("--cl-".concat(e.type,"-").concat(t),"".concat(i||zt.getDefaultParamValueByAnimationType(e.type,t)))}))}_getTemplate(e){var t;return'\n      <div class="cl-launcher">\n        <style class="cl-launcher-styles">\n\n        '.concat(zt.constructAnimationStylesByTypes([null===(t=e.documentModel.shared.launcher.loopAnimation)||void 0===t?void 0:t.type]),"\n\n        .cl-launcher {\n          ").concat(this.params.disableLayoutAnimations?"":"transition: 0.3s;","\n          cursor: pointer;\n          opacity: 0;\n        }\n\n        ").concat(e.disabled?this.getDisabledWidgetStyles(Xn.launcherSelector):"",'\n\n        .cl-launcher-inner-content {\n           position: relative;\n        }\n        </style>\n\n        <div class="cl-launcher-inner-content">\n          <div class="cl-launcher-content"></div>\n        </div>\n      </div>\n')}}Xn.launcherSelector=".cl-launcher",Xn.launcherContentSelector=".cl-launcher-content",Xn.launcherStylesSelector=".cl-launcher-styles";class Yn extends Wn{constructor(e,t,i,n){var o;super(e,t,i,n),this.zIndex=this.params.zIndex,this.setDefaultDialogParams(),e=this.params.documentModel.shared.mobileBreakpointWidth,this.dialogRootElement=document.createElement("div"),this.dialogRootElement.insertAdjacentHTML("afterbegin",this._getTemplate(Object.assign(Object.assign({},this.params),{background:this.params.documentModel.shared.dialog.background}))),this.dialogElement=this.dialogRootElement.querySelector(Yn.dialogSelector),this.dialogElement.style.zIndex=this.zIndex,this.dialogElement.setAttribute("cl-connector-root-element",At.DETACHED),this.params.config.formVariantId&&this.dialogElement.setAttribute("cl-widget-id",this.params.config.formVariantId),this.dialogElement.style.position=null!==(o=this.params.displayPosition)&&void 0!==o?o:"fixed",o=this.isMobileEnv(e),this.closeIconElement=this.dialogElement.querySelector(Yn.dialogCloseIconSelector),this.addBackDropClickEventListener(),this.addCloseIconEventListener(),this.addWidgetContentClickEventListener(this.dialogRootElement.querySelector(Yn.dialogContentSelector)),this.setCloseIconParams(o),this.params.config.branded&&(this.createBrandingElement(),this.adjustBrandingPosition(),this.dialogElement.querySelector(".cl-dialog-inner-content-wrapper").appendChild(this.brandingElement),this.addBrandingElementListeners()),this.boundEscapeListener=this.escapeListenerCallback.bind(this),window.addEventListener("keyup",this.boundEscapeListener)}adjustBrandingPosition(){this.brandingElement.style.position="relative",this.brandingElement.style.marginTop="10px"}setDefaultDialogParams(){this.params.documentModel.shared.dialog||(this.params=Object.assign(Object.assign({},this.params),{documentModel:Object.assign(Object.assign({},this.params.documentModel),{shared:Object.assign(Object.assign({},this.params.documentModel.shared),{dialog:{background:"rgba(0, 0, 0, 0.7)"}})})}))}setDefaultCloseIconParams(){if(!this.params.documentModel.shared.closeIcon){let e=this.getDefaultCloseIconParams();this.params=Object.assign(Object.assign({},this.params),{documentModel:Object.assign(Object.assign({},this.params.documentModel),{shared:Object.assign(Object.assign({},this.params.documentModel.shared),{closeIcon:{desktop:e.desktop,mobile:e.mobile}})})})}}addBackDropClickEventListener(){this.dialogElement.addEventListener("click",(e=>{e.target===this.dialogElement&&this.eventEmitter.emit("CLOSE_WIDGET")}))}setCloseIconParams(e){this.setDefaultCloseIconParams(),this.applyCloseIconParams(this.closeIconElement,this.params.documentModel.shared.closeIcon,e)}updateSharedPropsByType(e,t){var i;return{dialog:Object.assign(Object.assign({},e.dialog),null===(i=t.shared)||void 0===i?void 0:i.dialog)}}connect(e,t,i){return this.hasComponentWithResourcesOnTheView(i.compositionRoot.services.documentModel)&&(this.dialogElement.style.visibility="hidden",i.compositionRoot.services.eventEmitter.on(Qi.VIEW_COMPONENT_RESOURCES_LOADED,(()=>{this.dialogElement.style.visibility="visible"}))),this.documentElement=e,this.containerElement=t,this.params.disableGlobalScroll&&document.body.classList.add("cl-noscroll"),this.dialogRootElement.querySelector(Yn.dialogContentSelector).appendChild(e),t.appendChild(this.dialogElement),this.setConnectedElement(this.dialogElement),this.params.disableGoogleFonts||this.addGoogleFonts(this.params.documentModel.shared.googleFonts,t.getRootNode()),e=this.isMobileEnv(this.params.documentModel.shared.mobileBreakpointWidth),this.updateScrollbar(e),this.dialogElement}disconnect(){this.params.disableGlobalScroll&&document.body.classList.remove("cl-noscroll"),this.dialogElement.remove(),window.removeEventListener("keyup",this.boundEscapeListener),this.removeGoogleFonts()}updateScrollbar(e){if(!this.params.disableScrollbarCalculation){var t=this.getViewContentContainer();if(t&&(e=this.getActualSizeByEnv(e))){var i=.9*this.getContainerElementHeight();i>parseFloat(e.height)||(t.style.overflowY="auto",t.style.overflowX="hidden",this._extendContainerOuterSizeToFitInnerContentShadows(t),this.dialogElement.querySelector(".cl-dialog-inner-content-wrapper").style.maxHeight="".concat(i,"px"),this.dialogElement.style.overflowY="auto",this.dialogElement.style.overflowX="hidden",this.changeViewAlignToTop())}}}escapeListenerCallback(e){"Escape"===e.key&&this.eventEmitter.emit("CLOSE_WIDGET")}_extendContainerOuterSizeToFitInnerContentShadows(e){e.style.width="calc(100% + ".concat(40,"px)"),e.style.margin="-".concat(20,"px"),e.style.padding="".concat(20,"px")}_getTemplate(e){return'\n<div class="cl-dialog">\n  <style>\n  .cl-dialog {\n    top: 0;\n    left: 0;\n    right: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background: '.concat(e.background,";\n    box-sizing: border-box;\n  }\n\n  ").concat(e.disabled?this.getDisabledWidgetStyles(Yn.dialogSelector):"","\n\n  .cl-dialog-inner-content-wrapper {\n     display: flex;\n     flex-direction: column;\n     align-items: end;\n  }\n  \n  .cl-dialog-inner-content {\n     position: relative;\n     max-width: 100vw;\n  }\n\n  .cl-dialog-close-icon {\n    z-index: 99;\n    position: absolute;\n    cursor: pointer;\n  }\n\n  ").concat(this.getBrandingStyles(),'\n  </style>\n\n  <div class="cl-dialog-inner-content-wrapper">\n    <div class="cl-dialog-inner-content">\n      <div class="cl-dialog-close-icon"></div>\n      <div class="cl-dialog-content"></div>\n    </div>\n  </div>\n</div>\n')}}Yn.dialogSelector=".cl-dialog",Yn.dialogContentSelector=".cl-dialog-content",Yn.dialogCloseIconSelector=".cl-dialog-close-icon";let Qn={BEFORE_BEGIN:"beforebegin",AFTER_BEGIN:"afterbegin",BEFORE_END:"beforeend",AFTER_END:"afterend",REPLACE:"REPLACE"};class qn{static map(e){return Qn.hasOwnProperty(e)?Qn[e]:Qn.AFTER_END}}class Zn extends Gn{constructor(e,t,i,n){super(e,t,i,n),this.builtInElement=null,this.params.config.branded&&this.createBrandingElement()}connect(e,t,i){return this.hasComponentWithResourcesOnTheView(i.compositionRoot.services.documentModel)&&(e.style.visibility="hidden",i.compositionRoot.services.eventEmitter.on(Qi.VIEW_COMPONENT_RESOURCES_LOADED,(()=>{e.style.visibility="visible"}))),this.params.placement?(i=(t=document.querySelector(this.params.placement.selector)).getRootNode(),e.setAttribute("cl-connector-root-element",At.BUILT_IN),this.params.config.formVariantId&&e.setAttribute("cl-widget-id",this.params.config.formVariantId),this.params.placement.insertType===Qn.REPLACE?t.replaceWith(e):t.insertAdjacentElement(qn.map(this.params.placement.insertType),e)):(i=t.getRootNode(),t.appendChild(e)),this.params.disabled&&((t=document.createElement("style")).innerHTML=this.getDisabledWidgetStyles('[class^="cl-widget"]'),e.appendChild(t)),this.builtInElement=e,this.setConnectedElement(this.builtInElement),this.params.disableGoogleFonts||this.addGoogleFonts(this.params.documentModel.shared.googleFonts,i),this.params.config.branded&&((t=document.createElement("style")).innerHTML=this.getBrandingStyles(),this.adjustBrandingPosition(),e.appendChild(this.brandingElement),"VIEW"===e.getAttribute("cl-type")?(e.shadowRoot.appendChild(t),e.shadowRoot.appendChild(this.brandingElement)):(e.style.position="relative",e.appendChild(t),e.appendChild(this.brandingElement)),this.addBrandingElementListeners()),this.addWidgetContentClickEventListener(i),this.builtInElement}adjustBrandingPosition(){this.brandingElement.style.position="absolute",this.brandingElement.style.bottom="10px",this.brandingElement.style.right="10px"}disconnect(){this.builtInElement&&this.builtInElement.remove(),this.removeGoogleFonts()}}class Jn{static create(e,t,i,n){let{widgetType:o}=e;switch(o){case At.FLOATING_BOX:return new jn(e,t,i,n);case At.FLOATING_BAR:return new Kn(e,t,i,n);case At.DETACHED:return new Yn(e,t,i,n);case At.CONTENT_LOCKER:return new zn(e,t,i,n);case At.LAUNCHER:return new Xn(e,t,i,n);case At.BUILT_IN:return new Zn(e,t,i,n);default:throw Error("LayoutFactory: unknown widget type ".concat(o))}}}class $n extends Bn{constructor(e){super(e);let{documentModel:t,componentResolver:i,config:n={},translations:o,trackingService:r,widgetType:a}=e;e=new Un(t,i,n,o,r,a),this.setEntryModule(e)}connect(e){var t,i,n;let o=this.entryModule.init();o.style.display="flex";let{layoutFactoryClass:r=Jn,widgetType:a,documentModel:s}=this.params,l=Object.assign(Object.assign({},this.params),{zIndex:null!==(i=null===(t=null==s?void 0:s.shared)||void 0===t?void 0:t.zIndex)&&void 0!==i?i:P(a)});return this.controllers.push(r.create(Object.assign(Object.assign({},l),{viewIndex:0,entryModuleType:this.entryModule.entryModuleType}),this,this.entryModule.viewRouter,this.entryModule.compositionRoot.services.documentModel)),super.addPropsRequestEventListener(),this.params.config.formVariantId?o.classList.add("cl-widget-"+this.params.config.formVariantId):o.classList.add("cl-widget"),this.entryModule.listenAction("*",((e,t)=>{this.emit(t,e),"CLOSE_WIDGET"===t&&e&&"function"==typeof e&&e()})),null===(n=this.controllers[0])||void 0===n?void 0:n.connect(o,e,this.entryModule)}disconnect(){super.disconnect(),this.entryModule&&this.entryModule.viewRouter&&this.entryModule.compositionRoot&&this.entryModule.destroy(),this.controllers[0]&&this.controllers[0].disconnect(),this.controllers=[]}destroy(){this.disconnect()}}class eo{constructor(e){t(this,"collectionIntervalHours",null),this.collectionIntervalHours=e}setData(e,t){this._storeData({[e]:t})}getData(e){return this._getData().data[e]}_getData(){}_setData(e){}_storeData(e){let t=this._getData();this._setData({...t,data:{...t.data,...e}})}_updateMetricCollectionDate(){let e=this._getData();this._setData({...e,lastDate:(new Date).toISOString()})}_shouldMetricBeCollected(){var e=this._getLastDate();return!e||(e=new Date(e),parseInt(((new Date).getTime()-e.getTime())/36e5)>=this.collectionIntervalHours)}_getLastDate(){return this._getData().lastDate}}var to=new class extends eo{constructor(){super(2),this._storeData({SCRIPT_INITIAL_LOAD:this._getWindowPerf()}),this._shouldMetricBeCollected()&&Ee.info("SCRIPT_INITIAL_LOAD",this._composePayload())}collect(e){this._storeData({[e]:this._getWindowPerf()})}_getData(){return Ce.getMetrics()}_setData(e){Ce.setMetrics(e)}_composePayload(){let e=this._getData();return{site:new URL(document.location.href).hostname,...e.data}}_getWindowPerf(){return window.performance.now()}};class io{constructor(e,t){this.observer=null,this.rootElement=e,this.oneTimeObserver=t}handle(e){this.observer=new IntersectionObserver((t=>{t.find((e=>e.isIntersecting))&&(e(),this.oneTimeObserver&&this.unsubscribe())}),{root:null,rootMargin:"0px",threshold:.1}),this.observer.observe(this.rootElement)}unsubscribe(){this.observer.disconnect()}}class no{constructor(e){this._payload={...e,type:"view"},e.addReferrer&&(this._payload.referrer=window.location.href)}get(){return btoa(JSON.stringify(this._payload))}}class oo extends io{constructor(e,t){super(e,!0),this.params=t}handle(){super.handle(this.onFormShown.bind(this))}onFormShown(){let e=new no({...this.params,addReferrer:"DEBUG"!==lt.getFormVariant("f".concat(this.params.formId,"v").concat(this.params.variantId)).publishStatus}).get();Je.execute(new $e("/forms/v1/event").get(),"POST",e,{"Content-Type":"text/plain","cl-customer-id":ot.getUserIdentifier()}).catch((e=>Ee.error(e,"onFormsReceived error on FormViewedEventHandler: ")))}}var ro=new class extends pt{};class ao{static isFormBranded(e){return!!lt.getForm(e).branded}}class so{static isEmail(e){return so.emailPattern.test(e)}static isPhoneNumber(e){return!!e&&(!!(e=(e||"").match(so.phonePattern))&&10<=e.length)}static hasBrandName(e){return["esputnik","yespo","reteno"].some((t=>e.toLowerCase().includes(t)))}}t(so,"emailPattern",/^[_A-Za-z0-9-]+(\.[_A-Za-z0-9-]+)*@([A-Za-z0-9-]+(\.[A-Za-z0-9]+)+)+$/),t(so,"phonePattern",new RegExp(/\d/,"g")),t(so,"hashPattern",/^[0-9a-f]+$/);var lo=new class{constructor(){t(this,"_delays",{short:1e3,checkShort:800,normal:1e4,long:6e5}),t(this,"_minErrorsCount",0),t(this,"_maxErrorsCount",3),t(this,"_errorsCount",0),t(this,"_sendingDataInProgress",!1),t(this,"_webContactDataQueue",[]),t(this,"_webContactSendURL",null),t(this,"_webEventSendURL",null),t(this,"_orgId",null),t(this,"_guid",null),t(this,"_currentDelayMS",null),t(this,"_checkDelayMS",null),t(this,"_host",null),t(this,"_readFromQueryIntervalId",null),t(this,"_checkErrorsCountIntervalId",null),this._host=Ce.getConfig().apiConfig.hostUrl,this._webContactSendURL=this.getUrl("webcontact"),this._webEventSendURL=this.getUrl("webevent"),Ie.get("webContactDataQueue"),this._currentDelayMS=this._delays.short,this._checkDelayMS=this._delays.checkShort,this._orgId=Ce.getConfig().orgId,this._guid=Ce.getConfig().guid,this.prefix=Ce.getPrefix(),this.allowedToRun()&&(this._readFromQueryIntervalId=setInterval((()=>this.readFromQueue()),this._currentDelayMS),this._checkErrorsCountIntervalId=setInterval((()=>this.checkErrorsCount()),this._checkDelayMS))}get _webId(){return ot.getUserIdentifier()}setPrefix(e,t){this.prefix={debugPrefix:e,storagePrefix:t}}allowedToRun(){return!!(this.prefix.debugPrefix&&"cl"!==this.prefix.debugPrefix||this._orgId)}getUrl(e){return"".concat(this._host,"site-events/api/v1/").concat(e)}checkErrorsCount(){let e=this._delays.short;this._errorsCount>this._minErrorsCount&&this._errorsCount<=this._maxErrorsCount&&(e=this._delays.normal),this._errorsCount>this._maxErrorsCount&&(e=this._delays.long),this._currentDelayMS!==e&&(this._currentDelayMS=e,this.adjustReadFromQueryInterval(e),this.adjustCheckErrorsCountInterval(e))}adjustCheckErrorsCountInterval(e){clearInterval(this._checkErrorsCountIntervalId),this._checkErrorsCountIntervalId=setInterval((()=>this.checkErrorsCount()),e-2e3)}adjustReadFromQueryInterval(e){clearInterval(this._readFromQueryIntervalId),this._readFromQueryIntervalId=setInterval((()=>this.readFromQueue()),e)}stop(){this.allowedToRun()&&(clearInterval(this._readFromQueryIntervalId),clearInterval(this._checkErrorsCountIntervalId))}destroy(){this.stop()}addToQueue(e,t){this.allowedToRun()&&this._webContactDataQueue.push({data:e,message:t})}readFromQueue(){if(this._webContactDataQueue.length&&!this._sendingDataInProgress){let e=this._webContactDataQueue[0];this._sendingDataInProgress=!0,this.updateWebContact(e.data,e.message)}}removeFirstElementFromQueue(){this._webContactDataQueue.shift(),this._sendingDataInProgress=!1}errorSendingWebContact(){this._sendingDataInProgress=!1,this._errorsCount+=1}async successSendingWebContact(e){e=await this.secureWebContact(e),Ce.setWebContact(e),this.removeFirstElementFromQueue(),this._errorsCount=0,(Ce.getState().userInfo||Ce.getState().customerData)&&this.migrateToWebContact()}async activate(e){var t,i,n=Ce.getWebContact();0!==Object.keys(n).length?this._webContactDataQueue.length||Ce.setWebContact(await this.secureWebContact(n)):(n=null!==(t=Ce.getUserInfo())&&void 0!==t?t:{},t=null!==(i=Ce.getCustomerData())&&void 0!==i?i:{},i=x({webPushSubscriptionContactId:Ie.get("esWebPushContactId"),widgetSubscriptionContactId:Ie.get("clContactId"),utmContactId:t.esContactId||n.esContactId,externalCustomerId:t.externalCustomerId||n.externalCustomerId,email:t.email||n.email,iid:t.iid||n.iid}),t.phone&&k(t.phone)?i.phone=t.phone:n.phone&&k(n.phone)&&(i.phone=n.phone),Object.keys(i).length&&this.addToQueue({...i,webId:this._webId,orgId:this._orgId},e))}updateFromCustomerData(e,t){let i={email:e.email,externalCustomerId:e.externalCustomerId,trackingContactId:e.esContactId};k(e.phone)&&(i.phone=e.phone),this.addToQueue({...i,webId:this._webId,orgId:this._orgId},t)}updateFromUserInfo(e,t){let i={email:e.email};k(e.phone)&&(i.phone=e.phone),this.addToQueue({...i,webId:this._webId,orgId:this._orgId},t)}async updateWebContact(e,t){var i=["webId","orgId"],n=r(x(Ce.getWebContact()),i);let o=["email","phone"].filter((t=>!this.isPropertyPresentAndNotHashed(t,e))),a=r(x(e),i.concat(o));return function(e,t){return Object.keys(t).some((i=>e[i]!==t[i]))}(i=await this.secureWebContact(n),n=await this.secureWebContact(a))?(i=Object.keys(function(e,t){let i=Object.keys(t).filter((i=>e[i]!==t[i])),n={};for(let e of i)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(i,n)).reduce(((e,t)=>({...e,[t]:a[t]})),{}),i=x({...i,webId:this._webId,orgId:this._orgId}),this.sendWebContact(i,t).then((()=>{}))):(this.removeFirstElementFromQueue(),Promise.resolve())}isPropertyPresentAndNotHashed(e,t){var i;return(i=null==t?void 0:t[e])&&(i=!(64===(null==(e=null==t?void 0:t[e])?void 0:e.length)&&so.hashPattern.test(e))),i}async secureWebContact(e){let t=["email","phone"].filter((t=>this.isPropertyPresentAndNotHashed(t,e)));if(!t.length)return e;let i=await Promise.all(t.map((t=>{var i=this._guid;return V(t="".concat(e[t]).concat(i))})));return t.reduce(((e,t,n)=>({...e,[t]:i[n]})),e)}async migrateToWebContact(){Ce.setState((e=>{let{userInfo:t,customerData:i,...n}=e;return{...n,_userInfo:t,_customerData:i}}))}sendWebContact(e,t){return Je.execute(this._webContactSendURL,"POST",{...e},{"Content-Type":"application/json"}).then((t=>{200===t.status?this.successSendingWebContact(e):this.errorSendingWebContact()})).catch((i=>{this.errorSendingWebContact(),Ee.info("FAILED_SEND_WEB_CONTACT",{name:i.name,message:i.message,data:e,sourceMessage:t,stack:i.stack})}))}sendWebEvent(e){return Je.execute(this._webEventSendURL,"POST",{...e,webId:this._webId,orgId:this._orgId},{"Content-Type":"application/json"}).catch((e=>Ee.info("FAILED_TRACKING_WEB_EVENTS",{name:e.name,message:e.message,stack:e.stack})))}};class co{constructor(e){let{placement:t,placements:i=[]}=e;this._placements=[],t&&this._placements.push(t),i.length&&this._placements.push(...i),this._placementsMap=new Map}getUniquePresentPlacements(){return this.constructPlacementsMap(),Array.from(this._placementsMap.values()).filter((e=>document.querySelector(e.selector)))}static createPlacementKey(e){return"".concat(e.selector,"_").concat(e.insertType)}constructPlacementsMap(){this._placements.forEach((e=>{null!=e&&e.selector&&null!=e&&e.insertType&&this._placementsMap.set(co.createPlacementKey(e),e)}))}}class ho{constructor(e){t(this,"obs",null),this.targetNode=e}observe(e){this.obs=new MutationObserver((function(t,i){for(const i of t)"childList"===i.type&&(0<(t=Array.from(i.removedNodes)).length&&e&&e(t))})),this.obs.observe(this.targetNode,{childList:!0,subtree:!0})}observing(){return null!==this.obs}disconnect(){this.obs&&(this.obs.disconnect(),this.obs=null)}}class uo extends ye{constructor(e){super(),this.prefix="".concat(e,"component.sdk.")}get(e){return super.get(this.getKey(e))}set(e,t){return super.set(this.getKey(e),t)}getKey(e){return this.prefix+e}}var mo=new class{constructor(){}activate(){document.addEventListener("visibilitychange",(function(){if("hidden"===document.visibilityState){let e=Ce.getState(),t=[];Object.keys(e).filter((t=>t.includes("_dlCheckForAlertState")&&"QUEUED"===e[t])).forEach((e=>{let i=e.split("_")[0];t.push(i),Ce.setState({[e]:"SENT"})})),t.length&&Et.track("WIDGET_HAS_UNRESOLVED_DATA_LAYER_MERGE_TAGS",{widgetIds:t,siteId:Ce.getConfig().siteId,accountId:Ce.getConfig().accountId,clCustomerId:ot.getUserIdentifier()})}}))}checkPreconditionForDataLayerAndMarkForAlertIfNeeded(e,t,i){!1===t&&!0===i.TARGETING.enabled&&!1===i.TARGETING.fulfilled&&(t=!1===(i=f(i.TARGETING.rule.state,["pageFulfilled"])).DATA_LAYER_EVENT,i=1===Object.values(i).filter((e=>!1===e)).length,t&&i&&(e="".concat(e.id,"_dlCheckForAlertState"),"SENT"!==Ce.getState()[e]&&Ce.setState({[e]:"QUEUED"})))}checkIfDataLayerAlertKeyMustBeCancelled(e){e="".concat(e.id,"_dlCheckForAlertState"),Ce.getState(e)&&Ce.setState({[e]:"CANCELLED"})}};var po=new class extends vt{constructor(e,i){super(e,i),t(this,"_variantsQueue",[]),t(this,"_injectedVariants",[]),t(this,"_staticPreviews",[]),t(this,"destroyForm",(e=>{let t=e.id;e=this._staticPreviews.findIndex((e=>e.params.config.formVariantId===t));let i=this._staticPreviews[e];i&&(i.disconnect(),this._staticPreviews.splice(e,1),e=this._injectedVariants.findIndex((e=>e.id===t)),this._injectedVariants.splice(e,1))})),this.removedNodeObserver=new ho(document.body)}activate(e,t){super.activate(e,t),this._variantsQueue=lt.getStaticActiveFormVariants(Ce.getConfig()).filter((e=>!e.rules||!e.rules.CUSTOM_CODE.enabled)).slice()}showFormFromCustomCode(e,t){let i=!0===e.rules.CUSTOM_CODE.enabled;e.rules&&!i||this._injectVariants([{...e,triggeredBy:t}])}showFormBySelector(e){let t=!0===e.rules.SELECTOR.enabled;e.rules&&!t||this._injectVariants([e])}destroy(){this._staticPreviews.forEach((e=>{let t=new Ot(e.params.config.formVariantId);t.activate(),t.send("FormClose_[Name]"),t.destroy(),e.disconnect()})),this._injectedVariants=[],this.removedNodeObserver.disconnect()}showForm(e){if(!this.isVariantAlreadyInjected(e.id))return this._injectVariants([e])}isVariantAlreadyInjected(e){return!!this.getInjectedConnectorIds().find((t=>t===e))}getInjectedConnectorIds(){return this._injectedVariants.map((e=>e.id))}async _injectVariants(e){return await Promise.all(G(e.filter((e=>e&&(e.placement||e.placements))).map((e=>{const{id:t}=e,i=new co(e).getUniquePresentPlacements();return i.length?(this._removeInjectedVariantsFromQueue(t),this._injectedVariants.push(e),this.prepareForm(e).then((t=>{let{appearance:n}=t;return H(i.map((t=>this._injectVariant(e,n,t))))})).catch((t=>{Ee.error(t,"Error injectBuiltInForm call formVariantId="+e.id)}))):Promise.reject({formVariantId:t,message:"No placements found"})})),1))}async _injectVariant(e,t,i){var n,o,r;let{id:s,formId:l,triggeredBy:d}=e,c=t&&t.document||{};var h=this.isDocumentModelValid(c,e);if(!h.valid)return Promise.reject({formVariantId:s,message:h.errorMessage});let u=new Ot(s);u.activate(),h=ht.isInDebugMode(l);let m,p=()=>{u.send("FormClose_[Name]"),this.userActionsDetector.formVariantStat.close(e.id),E.disconnect()},g=Ce.getConfig().forms,E=new $n({widgetType:"BUILT_IN",documentModel:c,componentResolver:this.componentResolver,config:{siteId:Ce.getConfig().siteId,clCustomerId:ot.getUserIdentifier(),interactionId:null==g||null===(n=g[e.formId])||void 0===n?void 0:n.__interactionId,appearanceRevision:e.appearanceRevision,revision:e.revision,formVariantId:s,hostUrl:Ce.getConfig().apiConfig.hostUrl,subscribeContactUrl:new $e("/forms/v1/subscribe/".concat(qe.createVariantUUID(e.id,t.lang))).get(),browserLanguage:this.browserLanguageService.getLanguageForForms(),appearanceLanguage:t.lang,widgetDebugMode:h,utmTag:null===(o=Ce.getConfig().formConfig)||void 0===o?void 0:o.utmTag,widgetId:e.formId,widgetName:null==g||null===(r=g[e.formId])||void 0===r?void 0:r.name,type:e.type,widgetType:e.widgetType,clContactId:a(e),branded:ao.isFormBranded(e.formId),staticResourcesUrl:Ce.getConfig().apiConfig.staticResourcesUrl,triggeredBy:d||"Rules",storeRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.setRelativeTimerViewDate(e.id)},clearRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.clearRelativeTimerViewDate(e.id)},getRelativeTimerViewDate:()=>{var t;return null===(t=this.userActionsDetector.formVariantStat.getStats(e.id).formVariants[e.id])||void 0===t?void 0:t.relativeTimerViewDate},storage:new uo(Ce.getPrefix().storagePrefix),sessionUrlSearchParams:this.userActionsDetector.getStats().sessionUrlSearchParams||[]},translations:t.translations,trackingService:u,placement:i});this.addWidgetClickHandler(E,u,e),E.on("CONTACT_ID_WAS_RECEIVED",(e=>{e&&(Ie.set("clContactId",e),Ce.setUserInfo({...Ce.getUserInfo(),clContactId:e}),F({contactId:e}),lo.addToQueue({widgetSubscriptionContactId:e},"[WebContactService] BuiltInWidgetTypeService. After widget subscription")),ro.emit("CONTACT_DATA_SUBMIT",{formVariantId:s})})),E.on("SHOW_WIDGET",(t=>{t.closeWidget&&p(),ro.emit("SHOW_WIDGET_FROM_ANOTHER_WIDGET",{linkedToVariantId:t.variantId,formVariantId:e.id,triggeredBy:d})})),E.on("CLOSE_WIDGET",(()=>p())),E.on("CONTACT_DATA_SUBMIT",(()=>{this.userActionsDetector.formVariantStat.submit(s)})),E.on("WIDGET_NAVIGATION_STATE_NOT_FOUND",(t=>{Et.track("WIDGET_NAVIGATION_STATE_NOT_FOUND",{...t,widgetId:l,siteId:Ce.getConfig().siteId,accountId:Ce.getConfig().accountId,clCustomerId:ot.getUserIdentifier(),clContactId:a(e)})})),this.addInjectedDocumentConnector(s,E);try{if(!document.querySelector(i.selector))return Promise.reject({formVariantId:s,message:"No container element found"});m=E.connect(),this.observeRemovedNodesIfNeeded()}catch(t){throw Ee.error(t,"Error _showForm connect"+e.id),t}return h||(this.userActionsDetector.formVariantStat.view(s),this.userActionsDetector.formVariantHoverStat.visible(s),to.collect("FORM_RENDERED"),new oo(m,qe.createFormParams(s,d,t.lang)).handle()),u.send("FormShow_[Name]"),mo.checkIfDataLayerAlertKeyMustBeCancelled(e),this._staticPreviews.push(E),{rootElement:m,documentConnector:E}}_getReadyToInjectVariants(){return this._variantsQueue.filter((e=>e.placement&&e.placement.selector&&document.querySelector(e.placement.selector))).map((e=>[e,e.placement.selector&&document.querySelector(e.placement.selector)]))}_removeInjectedVariantsFromQueue(e){let t=this._variantsQueue.findIndex((t=>t.id===e));this._variantsQueue.splice(t,1)}observeRemovedNodesIfNeeded(){this.removedNodeObserver.observing()||this.removedNodeObserver.observe((()=>{this._injectedVariants.filter((e=>{var t,i,n;return!1===(null===(t=this.injectedPreviewMap[e.id])||void 0===t||null===(i=t.controllers[0])||void 0===i||null===(n=i.connectedElement)||void 0===n?void 0:n.isConnected)})).forEach(this.destroyForm)}))}}(new rt,Ye);var go=new class extends vt{constructor(e,t){super(e,t)}showFormBySelector(e){let t=e.id;e&&e.rules&&e.rules.SELECTOR.enabled&&(this.isAppearanceLoading()||this.isVariantAlreadyInjected(t)||this.prepareAppearanceAndShowForm(e))}showFormFromCustomCode(e,t){let i=e.id;e&&e.rules&&(this.isAppearanceLoading()||this.isVariantAlreadyInjected(i)||this.prepareAppearanceAndShowForm(e,t))}showForm(e){if(!(this.isAppearanceLoading()||this.isDialogOpened()||this.isVariantAlreadyInjected(e.id)))return this.prepareAppearanceAndShowForm(e)}prepareAppearanceAndShowForm(e,t){return this.addInjectedConnectorId(e.id),this.prepareForm(e).then((i=>(({appearance:i}=i),this._showForm(e,i,t)))).catch((t=>{Ee.error(t,"Error showDetachedForm call formVariantId="+e.id)}))}async _showForm(e,t,i){var n,o,r;let s=t&&t.document||{};var l=this.isDocumentModelValid(s,e);if(!l.valid)return Promise.reject({formVariantId:e.id,message:l.errorMessage});let d=new Ot(e.id);d.activate();let c=()=>{d.send("FormClose_[Name]"),this.userActionsDetector.onWidgetClosed(e),u.disconnect(),this.removeInjectedConnectorId(e.id)};l=Ce.getConfig().forms;let h,u=new $n({widgetType:"DETACHED",documentModel:s,componentResolver:this.componentResolver,config:{siteId:Ce.getConfig().siteId,clCustomerId:ot.getUserIdentifier(),interactionId:null==l||null===(n=l[e.formId])||void 0===n?void 0:n.__interactionId,appearanceRevision:e.appearanceRevision,revision:e.revision,formVariantId:e.id,hostUrl:Ce.getConfig().apiConfig.hostUrl,subscribeContactUrl:new $e("/forms/v1/subscribe/".concat(qe.createVariantUUID(e.id,t.lang))).get(),browserLanguage:this.browserLanguageService.getLanguageForForms(),appearanceLanguage:t.lang,widgetDebugMode:ht.isInDebugMode(e.formId),utmTag:null===(o=Ce.getConfig().formConfig)||void 0===o?void 0:o.utmTag,widgetId:e.formId,widgetName:null==l||null===(r=l[e.formId])||void 0===r?void 0:r.name,type:e.type,widgetType:e.widgetType,clContactId:a(e),branded:ao.isFormBranded(e.formId),staticResourcesUrl:Ce.getConfig().apiConfig.staticResourcesUrl,triggeredBy:i||"Rules",storeRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.setRelativeTimerViewDate(e.id)},clearRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.clearRelativeTimerViewDate(e.id)},getRelativeTimerViewDate:()=>{var t;return null===(t=this.userActionsDetector.formVariantStat.getStats(e.id).formVariants[e.id])||void 0===t?void 0:t.relativeTimerViewDate},storage:new uo(Ce.getPrefix().storagePrefix),sessionUrlSearchParams:this.userActionsDetector.getStats().sessionUrlSearchParams||[]},translations:t.translations,trackingService:d,displayPosition:"fixed",disableGlobalScroll:!0});this.addWidgetClickHandler(u,d,e),u.on("CONTACT_ID_WAS_RECEIVED",(t=>{t&&(Ie.set("clContactId",t),Ce.setUserInfo({...Ce.getUserInfo(),clContactId:t}),F({contactId:t}),lo.addToQueue({widgetSubscriptionContactId:t},"[WebContactService] DetachedWidgetTypeService. After widget subscription")),ro.emit("CONTACT_DATA_SUBMIT",{formVariantId:e.id})})),u.on("SHOW_WIDGET",(t=>{t.closeWidget&&c(),t.variantId&&ro.emit("SHOW_WIDGET_FROM_ANOTHER_WIDGET",{linkedToVariantId:t.variantId,formVariantId:e.id,triggeredBy:i})})),u.on("CLOSE_WIDGET",(()=>c())),u.on("CLOSE_ICON_CLICKED",(()=>c())),u.on("CONTACT_DATA_SUBMIT",(()=>{this.userActionsDetector.formVariantStat.submit(e.id)})),u.on("WIDGET_NAVIGATION_STATE_NOT_FOUND",(t=>{Et.track("WIDGET_NAVIGATION_STATE_NOT_FOUND",{...t,widgetId:e.formId,siteId:Ce.getConfig().siteId,accountId:Ce.getConfig().accountId,clCustomerId:ot.getUserIdentifier(),clContactId:a(e)})}));try{h=u.connect(document.body)}catch(t){throw Ee.error(t,"Error _showForm connect"+e.id),t}return this.addInjectedDocumentConnector(e.id,u),this.userActionsDetector.formVariantStat.view(e.id),this.userActionsDetector.formVariantHoverStat.visible(e.id),ht.isInDebugMode(e.formId)||new oo(h,qe.createFormParams(e.id,i,t.lang)).handle(),d.send("FormShow_[Name]"),mo.checkIfDataLayerAlertKeyMustBeCancelled(e),{rootElement:h,documentConnector:u}}isDialogOpened(){return!!document.body.querySelector(".cl-dialog")}}(new rt,Ye);var Eo=new class extends vt{constructor(e,t){super(e,t)}showFormFromCustomCode(e,t){let i=e.id;this.isAppearanceLoading()||this.isVariantAlreadyInjected(i)||(this.addInjectedConnectorId(i),this.prepareForm(e).then((n=>(({appearance:n}=n),this._showForm(e,n,t).catch((e=>{Ee.error(e,"Error _showForm connect1 "+i)}))))).catch((e=>{Ee.error(e,"Error showFloatingBoxForm call formVariantId="+i)})))}showForm(e){if(!this.isVariantAlreadyInjected(e.id))return this.addInjectedConnectorId(e.id),this.prepareForm(e).then((t=>(({appearance:t}=t),this._showForm(e,t)))).catch((t=>{Ee.error(t,"Error showFloatingBoxForm call formVariantId="+e.id)}))}async _showForm(e,t,i){var n,o,r;let s=t&&t.document||{};var l=this.isDocumentModelValid(s,e);if(!l.valid)return Promise.reject({formVariantId:e.id,message:l.errorMessage});let d=new Ot(e.id);d.activate();let c=()=>{d.send("FormClose_[Name]"),this.userActionsDetector.onWidgetClosed(e),u.disconnect(),this.removeInjectedConnectorId(e.id)};l=Ce.getConfig().forms;let h,u=new $n({widgetType:"FLOATING_BOX",documentModel:s,componentResolver:this.componentResolver,config:{siteId:Ce.getConfig().siteId,clCustomerId:ot.getUserIdentifier(),interactionId:null==l||null===(n=l[e.formId])||void 0===n?void 0:n.__interactionId,appearanceRevision:e.appearanceRevision,revision:e.revision,formVariantId:e.id,hostUrl:Ce.getConfig().apiConfig.hostUrl,subscribeContactUrl:new $e("/forms/v1/subscribe/".concat(qe.createVariantUUID(e.id,t.lang))).get(),browserLanguage:this.browserLanguageService.getLanguageForForms(),appearanceLanguage:t.lang,widgetDebugMode:ht.isInDebugMode(e.formId),utmTag:null===(o=Ce.getConfig().formConfig)||void 0===o?void 0:o.utmTag,widgetId:e.formId,widgetName:null==l||null===(r=l[e.formId])||void 0===r?void 0:r.name,type:e.type,widgetType:e.widgetType,clContactId:a(e),branded:ao.isFormBranded(e.formId),staticResourcesUrl:Ce.getConfig().apiConfig.staticResourcesUrl,triggeredBy:i||"Rules",storeRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.setRelativeTimerViewDate(e.id)},clearRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.clearRelativeTimerViewDate(e.id)},getRelativeTimerViewDate:()=>{var t;return null===(t=this.userActionsDetector.formVariantStat.getStats(e.id).formVariants[e.id])||void 0===t?void 0:t.relativeTimerViewDate},storage:new uo(Ce.getPrefix().storagePrefix),sessionUrlSearchParams:this.userActionsDetector.getStats().sessionUrlSearchParams||[]},translations:t.translations,trackingService:d,displayPosition:"fixed"});await this.componentResolver.loadComponentsIfNecessary(t.document,Ce.getConfig().apiConfig.staticResourcesUrl),this.addWidgetClickHandler(u,d,e),u.on("CONTACT_ID_WAS_RECEIVED",(t=>{t&&(Ie.set("clContactId",t),Ce.setUserInfo({...Ce.getUserInfo(),clContactId:t}),F({contactId:t}),lo.addToQueue({widgetSubscriptionContactId:t},"[WebContactService] FloatingBoxWidgetTypeService. After widget subscription")),ro.emit("CONTACT_DATA_SUBMIT",{formVariantId:e.id})})),u.on("SHOW_WIDGET",(t=>{t.closeWidget&&c(),t.variantId&&ro.emit("SHOW_WIDGET_FROM_ANOTHER_WIDGET",{linkedToVariantId:t.variantId,formVariantId:e.id,triggeredBy:i})})),u.on("CLOSE_WIDGET",(()=>c())),u.on("CLOSE_ICON_CLICKED",(()=>c())),u.on("CONTACT_DATA_SUBMIT",(()=>{this.userActionsDetector.formVariantStat.submit(e.id)})),u.on("WIDGET_NAVIGATION_STATE_NOT_FOUND",(t=>{Et.track("WIDGET_NAVIGATION_STATE_NOT_FOUND",{...t,widgetId:e.formId,siteId:Ce.getConfig().siteId,accountId:Ce.getConfig().accountId,clCustomerId:ot.getUserIdentifier(),clContactId:a(e)})})),this.addInjectedDocumentConnector(e.id,u);try{h=u.connect(document.body)}catch(t){throw Ee.error(t,"Error _showForm connect"+e.id),t}return this.userActionsDetector.formVariantStat.view(e.id),this.userActionsDetector.formVariantHoverStat.visible(e.id),ht.isInDebugMode(e.formId)||new oo(h,qe.createFormParams(e.id,i,t.lang)).handle(),d.send("FormShow_[Name]"),mo.checkIfDataLayerAlertKeyMustBeCancelled(e),{rootElement:h,documentConnector:u}}isFloatingBoxVisible(){return!!document.body.querySelector(".cl-floating-box")}}(new rt,Ye);var vo=new class extends vt{constructor(e,t){super(e,t)}showFormFromCustomCode(e,t){let i=e.id;this.isAppearanceLoading()||this.isVariantAlreadyInjected(i)||(this.addInjectedConnectorId(i),this.prepareForm(e).then((i=>{({appearance:i}=i),this._showForm(e,i,t)})).catch((e=>{Ee.error(e,"Error showFloatingBarForm call formVariantId="+i)})))}showForm(e){if(!this.isVariantAlreadyInjected(e.id))return this.addInjectedConnectorId(e.id),this.prepareForm(e).then((t=>(({appearance:t}=t),this._showForm(e,t)))).catch((t=>{Ee.error(t,"Error showFloatingBarForm call formVariantId="+e.id)}))}async _showForm(e,t,i){var n,o,r;let s=t&&t.document||{};var l=this.isDocumentModelValid(s,e);if(!l.valid)return Promise.reject({formVariantId:e.id,message:l.errorMessage});let d=new Ot(e.id);d.activate();let c=()=>{d.send("FormClose_[Name]"),this.userActionsDetector.onWidgetClosed(e),u.disconnect(),this.removeInjectedConnectorId(e.id)};l=Ce.getConfig().forms;let h,u=new $n({widgetType:"FLOATING_BAR",documentModel:s,componentResolver:this.componentResolver,config:{siteId:Ce.getConfig().siteId,clCustomerId:ot.getUserIdentifier(),interactionId:null==l||null===(n=l[e.formId])||void 0===n?void 0:n.__interactionId,appearanceRevision:e.appearanceRevision,revision:e.revision,formVariantId:e.id,hostUrl:Ce.getConfig().apiConfig.hostUrl,subscribeContactUrl:new $e("/forms/v1/subscribe/".concat(qe.createVariantUUID(e.id,t.lang))).get(),browserLanguage:this.browserLanguageService.getLanguageForForms(),appearanceLanguage:t.lang,widgetDebugMode:ht.isInDebugMode(e.formId),optionalDocumentStyles:{width:"100%"},utmTag:null===(o=Ce.getConfig().formConfig)||void 0===o?void 0:o.utmTag,widgetId:e.formId,widgetName:null==l||null===(r=l[e.formId])||void 0===r?void 0:r.name,type:e.type,widgetType:e.widgetType,clContactId:a(e),branded:ao.isFormBranded(e.formId),staticResourcesUrl:Ce.getConfig().apiConfig.staticResourcesUrl,triggeredBy:i||"Rules",storeRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.setRelativeTimerViewDate(e.id)},clearRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.clearRelativeTimerViewDate(e.id)},getRelativeTimerViewDate:()=>{var t;return null===(t=this.userActionsDetector.formVariantStat.getStats(e.id).formVariants[e.id])||void 0===t?void 0:t.relativeTimerViewDate},storage:new uo(Ce.getPrefix().storagePrefix),sessionUrlSearchParams:this.userActionsDetector.getStats().sessionUrlSearchParams||[]},translations:t.translations,trackingService:d,displayPosition:"fixed"});this.addWidgetClickHandler(u,d,e),u.on("CONTACT_ID_WAS_RECEIVED",(t=>{t&&(Ie.set("clContactId",t),Ce.setUserInfo({...Ce.getUserInfo(),clContactId:t}),F({contactId:t}),lo.addToQueue({widgetSubscriptionContactId:t},"[WebContactService] FloatingBarWidgetTypeService. After widget subscription")),ro.emit("CONTACT_DATA_SUBMIT",{formVariantId:e.id})})),u.on("SHOW_WIDGET",(t=>{t.closeWidget&&c(),t.variantId&&ro.emit("SHOW_WIDGET_FROM_ANOTHER_WIDGET",{linkedToVariantId:t.variantId,formVariantId:e.id,triggeredBy:i})})),u.on("CLOSE_WIDGET",(()=>c())),u.on("CLOSE_ICON_CLICKED",(()=>c())),u.on("CONTACT_DATA_SUBMIT",(()=>{this.userActionsDetector.formVariantStat.submit(e.id)})),u.on("WIDGET_NAVIGATION_STATE_NOT_FOUND",(t=>{Et.track("WIDGET_NAVIGATION_STATE_NOT_FOUND",{...t,widgetId:e.formId,siteId:Ce.getConfig().siteId,accountId:Ce.getConfig().accountId,clCustomerId:ot.getUserIdentifier(),clContactId:a(e)})})),this.addInjectedDocumentConnector(e.id,u);try{h=u.connect(document.body)}catch(t){throw Ee.error(t,"Error _showForm connect"+e.id),t}return this.userActionsDetector.formVariantStat.view(e.id),this.userActionsDetector.formVariantHoverStat.visible(e.id),ht.isInDebugMode(e.formId)||new oo(h,qe.createFormParams(e.id,i,t.lang)).handle(),d.send("FormShow_[Name]"),mo.checkIfDataLayerAlertKeyMustBeCancelled(e),{rootElement:h,documentConnector:u}}}(new rt,Ye);var _o=new class extends vt{constructor(e,t){super(e,t)}showFormFromCustomCode(e,t){let i=e.id,n=e.linkedToVariantId;this.isAppearanceLoading()||this.isLauncherVisible()||(this.addInjectedConnectorId(i),this.prepareForm(e).then((i=>{({appearance:i}=i),this._showForm(e,n,i,t)})).catch((e=>{Ee.error(e,"LauncherMainService:Error showLauncher call formVariantId="+i)})))}showForm(e){let t=e.id,i=e.linkedToVariantId;this.isAppearanceLoading()||this.isLauncherVisible()||this.isVariantAlreadyInjected(t)||(this.addInjectedConnectorId(t),this.prepareForm(e).then((t=>{({appearance:t}=t),this._showForm(e,i,t)})).catch((e=>{Ee.error(e,"LauncherMainService:Error showForm call formVariantId="+t)})))}async _showForm(e,t,i,n){var o,r,s;let l=i&&i.document||{};var d=this.isDocumentModelValid(l,e);if(!d.valid)return Promise.reject({formVariantId:e.id,message:d.errorMessage});let c=new Ot(e.id);c.activate();let h=()=>{this.userActionsDetector.onWidgetClosed(e),m.disconnect(),this.removeInjectedConnectorId(e.id)};d=Ce.getConfig().forms;let u,m=new $n({widgetType:"LAUNCHER",documentModel:l,componentResolver:this.componentResolver,config:{siteId:Ce.getConfig().siteId,clCustomerId:ot.getUserIdentifier(),interactionId:null==d||null===(o=d[e.formId])||void 0===o?void 0:o.__interactionId,appearanceRevision:e.appearanceRevision,revision:e.revision,formVariantId:e.id,hostUrl:Ce.getConfig().apiConfig.hostUrl,subscribeContactUrl:new $e("/forms/v1/subscribe/".concat(qe.createVariantUUID(e.id,i.lang))).get(),browserLanguage:this.browserLanguageService.getLanguageForForms(),appearanceLanguage:i.lang,widgetDebugMode:ht.isInDebugMode(e.formId),utmTag:null===(r=Ce.getConfig().formConfig)||void 0===r?void 0:r.utmTag,widgetId:e.formId,widgetName:null==d||null===(s=d[e.formId])||void 0===s?void 0:s.name,type:e.type,widgetType:e.widgetType,clContactId:a(e),staticResourcesUrl:Ce.getConfig().apiConfig.staticResourcesUrl,triggeredBy:n||"Rules",storeRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.setRelativeTimerViewDate(e.id)},clearRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.clearRelativeTimerViewDate(e.id)},getRelativeTimerViewDate:()=>{var t;return null===(t=this.userActionsDetector.formVariantStat.getStats(e.id).formVariants[e.id])||void 0===t?void 0:t.relativeTimerViewDate},optionalDocumentStyles:{display:"flex"},storage:new uo(Ce.getPrefix().storagePrefix),sessionUrlSearchParams:this.userActionsDetector.getStats().sessionUrlSearchParams||[]},translations:i.translations,trackingService:c,displayPosition:"fixed"});m.on("SHOW_WIDGET",(i=>{i.closeWidget&&h(),t&&(ro.emit("SHOW_WIDGET_FROM_ANOTHER_WIDGET",{linkedToVariantId:t,formVariantId:e.id,triggeredByLauncher:!0}),c.send("LauncherClick_[Name]"))})),this.addWidgetClickHandler(m,c,e),m.on("CLOSE_WIDGET",(()=>h())),m.on("CONTACT_DATA_SUBMIT",(()=>{this.userActionsDetector.formVariantStat.submit(e.id)})),m.on("WIDGET_NAVIGATION_STATE_NOT_FOUND",(t=>{Et.track("WIDGET_NAVIGATION_STATE_NOT_FOUND",{...t,widgetId:e.formId,siteId:Ce.getConfig().siteId,accountId:Ce.getConfig().accountId,clCustomerId:ot.getUserIdentifier(),clContactId:a(e)})})),this.addInjectedDocumentConnector(e.id,m);try{u=m.connect(document.body)}catch(t){throw Ee.error(t,"Error _showForm connect"+e.id),t}this.userActionsDetector.formVariantStat.view(e.id),this.userActionsDetector.formVariantHoverStat.visible(e.id),ht.isInDebugMode(e.formId)||new oo(u,qe.createFormParams(e.id,n,i.lang)).handle(),c.send("LauncherShow_[Name]"),mo.checkIfDataLayerAlertKeyMustBeCancelled(e)}isLauncherVisible(){return!!document.body.querySelector(".cl-launcher")}}(new rt,Ye);var fo=new class extends vt{constructor(e,t){super(e,t)}showFormFromCustomCode(e,t){let i=e.id;this.isAppearanceLoading()||this.isVariantAlreadyInjected(i)||(this.addInjectedConnectorId(i),this.prepareForm(e).then((i=>(({appearance:i}=i),this._showForm(e,i,t)))).catch((e=>{Ee.error(e,"Error showContentLocker call formVariantId="+i)})))}showForm(e){if(!(this.isAppearanceLoading()||this.isContentLockerVisible()||this.isVariantAlreadyInjected(e.id))){this.addInjectedConnectorId(e.id);var t=this._showBackdropWhileLoading();this.prepareForm(e).then((t=>{({appearance:t}=t),this._showForm(e,t)})).catch((t=>{Ee.error(t,"Error showContentLocker call formVariantId="+e.id)})).finally(t)}}_showBackdropWhileLoading(){let e=document.createElement("div");return e.classList.add("cl-content-locker-backdrop"),e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgba(0, 0, 0, 0.1)",e.style.backdropFilter="blur(20px)",e.style.display="flex",e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.zIndex="99999999",document.body.appendChild(e),()=>e.remove()}async _showForm(e,t,i){var n,o,r;let s=t&&t.document||{};var l=this.isDocumentModelValid(s,e);if(!l.valid)return Promise.reject({formVariantId:e.id,message:l.errorMessage});let d=new Ot(e.id);d.activate();let c=()=>{d.send("FormClose_[Name]"),this.userActionsDetector.onWidgetClosed(e),u.disconnect(),this.removeInjectedConnectorId(e.id)};l=Ce.getConfig().forms;let h,u=new $n({widgetType:"CONTENT_LOCKER",documentModel:s,componentResolver:this.componentResolver,config:{siteId:Ce.getConfig().siteId,clCustomerId:ot.getUserIdentifier(),interactionId:null==l||null===(n=l[e.formId])||void 0===n?void 0:n.__interactionId,appearanceRevision:e.appearanceRevision,revision:e.revision,formVariantId:e.id,hostUrl:Ce.getConfig().apiConfig.hostUrl,subscribeContactUrl:new $e("/forms/v1/subscribe/".concat(qe.createVariantUUID(e.id,t.lang))).get(),browserLanguage:this.browserLanguageService.getLanguageForForms(),appearanceLanguage:t.lang,optionalDocumentStyles:{width:"100%",height:"100%"},widgetDebugMode:ht.isInDebugMode(e.formId),utmTag:null===(o=Ce.getConfig().formConfig)||void 0===o?void 0:o.utmTag,widgetId:e.formId,widgetName:null==l||null===(r=l[e.formId])||void 0===r?void 0:r.name,type:e.type,widgetType:e.widgetType,clContactId:a(e),branded:ao.isFormBranded(e.formId),staticResourcesUrl:Ce.getConfig().apiConfig.staticResourcesUrl,triggeredBy:i||"Rules",storeRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.setRelativeTimerViewDate(e.id)},clearRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.clearRelativeTimerViewDate(e.id)},getRelativeTimerViewDate:()=>{var t;return null===(t=this.userActionsDetector.formVariantStat.getStats(e.id).formVariants[e.id])||void 0===t?void 0:t.relativeTimerViewDate},storage:new uo(Ce.getPrefix().storagePrefix),sessionUrlSearchParams:this.userActionsDetector.getStats().sessionUrlSearchParams||[]},translations:t.translations,trackingService:d,displayPosition:"fixed",disableGlobalScroll:!0});this.addWidgetClickHandler(u,d,e),u.on("SHOW_WIDGET",(t=>{t.closeWidget&&c(),t.variantId&&ro.emit("SHOW_WIDGET_FROM_ANOTHER_WIDGET",{linkedToVariantId:t.variantId,formVariantId:e.id,triggeredBy:i})})),u.on("CLOSE_WIDGET",(()=>c())),u.on("CLOSE_ICON_CLICKED",(()=>c())),u.on("CONTACT_DATA_SUBMIT",(()=>{this.userActionsDetector.formVariantStat.submit(e.id)})),u.on("WIDGET_NAVIGATION_STATE_NOT_FOUND",(t=>{Et.track("WIDGET_NAVIGATION_STATE_NOT_FOUND",{...t,widgetId:e.formId,siteId:Ce.getConfig().siteId,accountId:Ce.getConfig().accountId,clCustomerId:ot.getUserIdentifier(),clContactId:a(e)})})),this.addInjectedDocumentConnector(e.id,u);try{h=u.connect(document.body)}catch(t){throw Ee.error(t,"Error _showForm connect"+e.id),t}this.userActionsDetector.formVariantStat.view(e.id),this.userActionsDetector.formVariantHoverStat.visible(e.id),ht.isInDebugMode(e.formId)||new oo(h,qe.createFormParams(e.id,i,t.lang)).handle(),d.send("FormShow_[Name]"),mo.checkIfDataLayerAlertKeyMustBeCancelled(e)}isContentLockerVisible(){return!!document.body.querySelector(".cl-content-locker")}}(new rt,Ye);class yo{constructor(){t(this,"showForm",(e=>this._delegate(e.type,"showForm",[e])))}activateAll(e,t){Object.values(yo._delegates).forEach((i=>i.activate(e,t)))}destroyAll(){Object.values(yo._delegates).forEach((e=>e.destroy()))}getShownForms(){return Object.keys(yo._delegates).reduce(((e,t)=>({...e,[t]:yo._delegates[t].getInjectedConnectorIds()})),{})}showFormFromSelectorClick(e){"BUILT_IN"===e.type||"DETACHED"===e.type?this._delegate(e.type,"showFormBySelector",[e]):this._delegate(e.type,"showFormFromCustomCode",[e])}showFormFromCustomCode(e,t){this._delegate(e.type,"showFormFromCustomCode",[e,t])}getAppearanceFromCacheOrLoad(e){return this._delegate(e.type,"getAppearanceFromCacheOrLoad",[e])}prepareForm(e,t){return this._delegate(e.type,"prepareForm",[e,t])}destroyForm(e){return this._delegate(e.type,"destroyForm",[e])}_delegate(e,t,i){let n=yo._delegates[e];if(!n)throw Error("WidgetTypeFacade: ".concat(e," class is not delegated"));let o=n[t];if(!o||"function"!=typeof o)throw Error("WidgetTypeFacade: ".concat(e," class ").concat(t," method is not delegated"));return o.apply(n,i)}}t(yo,"_delegates",{BUILT_IN:po,DETACHED:go,FLOATING_BOX:Eo,FLOATING_BAR:vo,LAUNCHER:_o,CONTENT_LOCKER:fo});var To=new yo;var Io=new class{constructor(){this.changeObserver=new ct,this.formVariantListenedMap=new Map}activate(){let e=lt.getFormVariants(Ce.getConfig()).filter((e=>{var t,i,n,o;return e.rules&&(null===(t=e.rules.SELECTOR)||void 0===t?void 0:t.enabled)&&((null===(i=e.rules.SELECTOR)||void 0===i?void 0:i.selector)||(null===(n=e.rules.SELECTOR)||void 0===n||null===(o=n.selectors)||void 0===o?void 0:o.length))})).filter((e=>lt.filterByStatus(e)));this._tryToAddClickListener(e),this.changeObserver.observe((()=>this._tryToAddClickListener(e)))}_doesFormVariantListenedMapContainValue(e,t){return!!this.formVariantListenedMap.has(e)&&(!!(e=this.formVariantListenedMap.get(e))&&e.has(t))}_setFormVariantListenedMapValue(e,t){this.formVariantListenedMap.has(e)?this.formVariantListenedMap.get(e).add(t):this.formVariantListenedMap.set(e,new Set([t]))}_tryToAddClickListener(e){e.forEach((e=>{var t,i;let n=null===(t=e.rules.SELECTOR)||void 0===t?void 0:t.selector;t=(null===(i=e.rules.SELECTOR)||void 0===i?void 0:i.selectors)||[],n&&!t.includes(n)&&t.push(n),t.length&&t.forEach((t=>{if(!this._doesFormVariantListenedMapContainValue(e.id,t))try{Array.from(document.querySelectorAll(t)).forEach((i=>{i&&(this._setFormVariantListenedMapValue(e.id,t),i.addEventListener("click",this.formVariantClickHandler(e)))}))}catch(t){Ee.error(t,"Failed to add click listener formVariantId="+e.id)}}))}))}formVariantClickHandler(e){return()=>{To.showFormFromSelectorClick(e),ro.emit("SHOW_WIDGET_BY_CLICKING_ELEMENT",e)}}destroy(){this.changeObserver.disconnect()}};var Oo=new class{constructor(){this.changeObserver=new ct,this.formVariantListened={}}activate(){let e=lt.getFormVariants(Ce.getConfig()).filter((e=>e.rules&&e.rules.CUSTOM_CODE.enabled&&e.rules.CUSTOM_CODE.selector)).filter((e=>lt.filterByStatus(e)));this._tryToAddClickListener(e),this.changeObserver.observe((()=>this._tryToAddClickListener(e)))}_tryToAddClickListener(e){e.forEach((e=>{let t=e.rules.CUSTOM_CODE.selector;if(t&&!this.formVariantListened[e.id])try{let i=document.querySelector(t);i&&(this.formVariantListened[e.id]=e,i.addEventListener("click",(()=>{To.showFormFromCustomCode(e),ro.emit("SHOW_WIDGET_BY_CUSTOM_CODE",e.id)})))}catch(t){Ee.error(t,"Failed to add click listener formVariantId="+e.id)}}))}destroy(){this.changeObserver.disconnect()}};let Ao=new Set(["FLOATING_BOX","FLOATING_BAR"]),Co={corners:[],edges:[],content:[],offset:[],all:[]};var So=new class{isMobile(e){return W(e.document)}getWidgetSize(e,t,i){return t=t.document.shared.actualSize&&t.document.shared.actualSize[i?"mobile":"desktop"],{width:"FLOATING_BAR"===e.type?pi.width:parseInt(t.width),height:parseInt(t.height)}}getCoords(e,t){var i;if(!t)return Co;let n=this.isMobile(t);return(!n||null!==(i=t.document.shared.actualSize)&&void 0!==i&&i.mobile)&&(i=this.mapProps(e.type,t.document.shared,n))?(t=this.getWidgetSize(e,t,n),"DETACHED"===e.type&&(i.horizontalOffset=(pi.width-t.width)/2,i.verticalOffset=(pi.height-t.height)/2),e={x:parseInt(i.horizontalOffset),y:parseInt(i.verticalOffset)},this.buildCoordsLists({...i,widgetSize:t,indentationPosition:e})):Co}findTheWidgetsRootElementToBeOverlapped(e,t,i){let n,o=localStorage.getItem("esOverlapDebug");return i.find(((t,i)=>{let[r,a]=t;return t=document.elementsFromPoint(r,a),t=this.getTargetElementThatRelateToWidget(t),o&&((i=document.createElement("div")).id=e.id,i.innerHTML="".concat(e.id),i.style.backgroundColor=t?"red":"green",i.style.color="white",i.style.fontSize="8px",i.style.width="auto",i.style.height="auto",i.style.position="fixed",i.style.left="".concat(r,"px"),i.style.top="".concat(a,"px"),i.style.zIndex=String(Math.round(Number.MAX_SAFE_INTEGER/1e7)),document.body.appendChild(i)),n=t})),n}mapProps(e,t,i){switch(e){case"FLOATING_BAR":return i?t.floatingBar.mobile:t.floatingBar.desktop;case"FLOATING_BOX":return i?t.floatingBox.mobile:t.floatingBox;case"DETACHED":return{};default:throw Error("Can not map props for overlap calculation of ".concat(e))}}getTargetElementThatRelateToWidget(e){return e.filter((e=>e instanceof HTMLElement)).find((e=>null!=e&&e.hasAttribute("cl-connector-root-element")?Ao.has(e.getAttribute("cl-connector-root-element")):null!=e&&e.hasAttribute("cl-type")?(e=e.closest("[cl-connector-root-element]"),Ao.has(e.getAttribute("cl-connector-root-element"))):null))}getCornersPoints(e){let{horizontalPosition:t,verticalPosition:i,widgetSize:n,indentationPosition:o}=e;return{x0:e="LEFT"===t?o.x:pi.width-(o.x+n.width),x1:"LEFT"===t?e+n.width:pi.width-o.x,y0:"BOTTOM"===i?pi.height-o.y:o.x+n.height,y1:"TOP"===i?o.y:pi.height-(o.y+n.height)}}buildCoordsLists(e){let{x0:t,x1:i,y0:n,y1:o}=this.getCornersPoints(e);var{widgetSize:r}=e;e=[[t,n],[t,o],[i,n],[i,o]];let a=[],s=[],l=[],d=Math.round(r.height/2),c=Math.round(r.height/6),h=Math.round(r.width/2);r=Math.round(r.width/6);for(let e=0;6>=e;e++)a.push([t+r*e,n]),a.push([t+r*e,o]),a.push([t,o+c*e]),a.push([i,o+c*e]),s.push([t+h,o+d]);let u=[[-50,-50],[-50,50],[50,-50],[50,50]];return e.forEach(((e,t)=>{let[i,n]=e;u.forEach(((e,t)=>{let[o,r]=e;l.push([i+o,n+r])}))})),{corners:e,edges:a,content:s,offset:l,all:e.concat(a).concat(s).concat(l)}}};class bo{createScaledPixelMatrix(){return Array.apply(null,Array(Math.round(pi.width/bo.pxScaleFactor))).map((()=>Array.apply(null,Array(Math.round(pi.height/bo.pxScaleFactor)))))}getIntersectionsForBatch(e){let t=this.createScaledPixelMatrix(),i=new Set;e.forEach((e=>{let n=e.fV.id,o=Math.round(e.coordsMap.corners[1][0]/bo.pxScaleFactor),r=Math.round(e.coordsMap.corners[3][0]/bo.pxScaleFactor),a=Math.round(e.coordsMap.corners[1][1]/bo.pxScaleFactor);e=Math.round(e.coordsMap.corners[0][1]/bo.pxScaleFactor);for(let s=o;s<r;s++)for(let l=a;l<e;l++)try{t[s][l]?(t[s][l]+="_".concat(n),i.add(t[s][l])):t[s][l]=n}catch(t){Ee.warn("Virtual overlap coords fV ".concat(n," x S").concat(o," xE ").concat(r," yStart ").concat(a," yEnd ").concat(e),t)}}));let n=[...i.values()],o=new Set,r=[],a=new Set,s=[];return n.forEach(((e,t)=>{a.add(t);let i=e.split("_");(e=n.filter(((e,t)=>!a.has(t))).filter((e=>i.filter((e=>!o.has(e))).find((t=>e.includes(t)))))).length?(e=e.join("_").split("_"),e=i.concat(e),e=[...new Set(e).values()],r.push(e),e.forEach((e=>o.add(e)))):s.push(i)})),s.forEach((e=>{let t=e.filter((e=>!o.has(e))).length;e.length===t&&(r.push(e),e.forEach((e=>o.add(e))))})),{list:r,set:o}}}t(bo,"pxScaleFactor",10);var No=new bo;class Ro{static get(e){let t=e.filter((e=>e.rules.pageFulfilled)),i=[];return 1===t.length?t[0]:(i=t.length?t:e,i[Math.floor(Math.random()*i.length)])}}class Lo{constructor(){let{unlockTimeout:e=null}=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t(this,"_unlockTimeout",null),t(this,"_timers",{}),t(this,"_locked",{}),this._unlockTimeout=e}setStatus(e){let t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];!0===t?this._locked[e]=t:(delete this._locked[e],clearTimeout(this._timers[e]),delete this._timers[e])}is(e){return this._locked[e]===(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])}canLock(e){return!this.is(e,!0)}isLocked(){return Object.values(this._locked).some((e=>!0===e))}lock(e){this.canLock(e)&&this.setStatus(e,!0);let t=this.unlock.bind(this,e);return this._unlockTimeout&&Object.assign(this._timers,{[e]:setTimeout(t,this._unlockTimeout)}),t}lockAll(e){e.forEach((e=>this.lock(e)))}unlock(e){this.is(e,!0)&&this.setStatus(e,!1)}unlockAll(e){(e||Object.keys(this._locked)).forEach((e=>this.unlock(e)))}}class Mo extends Lo{unlockWhenReady(e,t){let i,n,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:5e3,r=new Promise((e=>{i=t.documentConnector.entryModule.viewRenderer.viewResourceManager.systemEventEmitter.on("VIEW_COMPONENT_RESOURCES_LOADED",(()=>{e()})).off}));Promise.race([r,new Promise((e=>{n=setTimeout(e,o)}))]).finally((()=>{this.unlock(e),i(),clearTimeout(n)}))}}class Do{constructor(){t(this,"semaphore",new Mo),this.q=[]}async getOverlapState(e){var t,i,n=await To.getAppearanceFromCacheOrLoad(e);return null!=n&&null!==(t=n.document)&&void 0!==t&&null!==(i=t.shared)&&void 0!==i&&i.actualSize?(t=So.getCoords(e,n)).all.length?{fV:e,rootElement:n=So.findTheWidgetsRootElementToBeOverlapped(e,n,t.all),coordsMap:t}:{fV:e,rootElement:void 0,coordsMap:t}:{fV:e,rootElement:void 0,coordsMap:Co}}async processBatch(e){if(this.semaphore.isLocked())return Promise.resolve();var t=await Promise.all(this.q.map((e=>this.getOverlapState(e).then((t=>({fV:e,...t}))))));this.q=[];let i=t.filter((e=>!e.coordsMap.all.length));await Promise.all(i.map((t=>(e(t.fV.id),To.showForm(t.fV)))));let n=(t=t.filter((e=>e.coordsMap.all.length)).filter((e=>!e.rootElement))).reduce(((e,t)=>(e.set(t.fV.id,t),e)),new Map);if(1<t.length){let{list:i,set:o}=No.getIntersectionsForBatch(t);t.filter((e=>!o.has(e.fV.id))).forEach((t=>{To.showForm(t.fV),e(t.fV.id)}));let r=new Set;i.forEach((e=>{e=e.map((e=>n.get(e))).map((e=>e.fV)),e=Ro.get(e),r.add(e.id),this.semaphore.lock(e.id)})),await Promise.all([...r].map((async t=>{t=n.get(t),e(t.fV.id);let i=await To.showForm(t.fV);return this.semaphore.unlockWhenReady(t.fV.id,i),i})))}else if(t.length)return[t]=t,e(t.fV.id),To.showForm(t.fV);return Promise.resolve()}async addBatch(e,t){this.q.push(...e),await this.processBatch(t)}}var wo=new class{constructor(){this.floatingDisplayQueue=new Do}async display(e,t,i,n,o){let r=[],a=[],s=[],l=[],d=[];if(e.forEach((e=>{var t,i,n,o;"SHOW_IN_INTERVAL"===(null==e||null===(t=e.rules)||void 0===t||null===(i=t.ANNOYANCE)||void 0===i?void 0:i.type)||"SHOW_IF_THERE_ARE_NO_FLOATING_WIDGETS_DISPLAYED"===(null==e||null===(n=e.rules)||void 0===n||null===(o=n.ANNOYANCE)||void 0===o?void 0:o.type)?d.push(e):"DETACHED"===e.type?l.push(e):Ao.has(e.type)?r.push(e):"BUILT_IN"===e.type?s.push(e):a.push(e)})),await this.floatingDisplayQueue.addBatch(r,t),await Promise.all(l.map((e=>(t(e.id),To.showForm(e))))),0===r.concat(l).length&&d.length){1<d.length&&d.find((e=>{var t,i;return"SHOW_IN_INTERVAL"===(null==e||null===(t=e.rules)||void 0===t||null===(i=t.ANNOYANCE)||void 0===i?void 0:i.type)}))&&(d=d.filter((e=>{var t,n;let o="SHOW_IF_THERE_ARE_NO_FLOATING_WIDGETS_DISPLAYED"!==(null==e||null===(t=e.rules)||void 0===t||null===(n=t.ANNOYANCE)||void 0===n?void 0:n.type);return o||i(e.id),o})));let e=d.length,n=d.filter((e=>{var t,i;return"SHOW_IF_THERE_ARE_NO_FLOATING_WIDGETS_DISPLAYED"===(null==e||null===(t=e.rules)||void 0===t||null===(i=t.ANNOYANCE)||void 0===i?void 0:i.type)})).length,r=Ro.get(d);t(r.id),d.filter((e=>e.id!==r.id)).forEach((t=>{i(t.id),1<e&&n===e&&o(t.id)})),await To.showForm(r)}else d.forEach((e=>i(e.id)));await Promise.all(a.map((async e=>(t(e.id),To.showForm(e))))),await H(this.reorderBuiltInForms(s).map((async e=>To.showForm(e).then((i=>{if((i=i.length?i[0]:i).length&&"rejected"===i[0].status||"rejected"===i.status)return n(e.id);t(e.id)}),(()=>{n(e.id)})))))}async prepareForDisplay(e){return To.prepareForm(e,{ignoreLoading:!0})}reorderBuiltInForms(e){return e.sort(((e,t)=>(e=e.placement&&"REPLACE"===e.placement.insertType||e.placements&&e.placements.some((e=>"REPLACE"===e.insertType)),t=t.placement&&"REPLACE"===t.placement.insertType||t.placements&&t.placements.some((e=>"REPLACE"===e.insertType)),e&&!t?1:!e&&t?-1:0)))}};var Po=new class{log(){localStorage.getItem("esRulesLogger")&&console.log(...arguments)}};class xo{static isEnabled(){return"true"===_e.get().formConfig.ANNOYANCE_SAFEGUARD_ENABLED}static get(){try{var e="object"==typeof _e.get().formConfig.ANNOYANCE_SAFEGUARD?_e.get().formConfig.ANNOYANCE_SAFEGUARD:JSON.parse(_e.get().formConfig.ANNOYANCE_SAFEGUARD)}catch(t){e=null}return e||xo.fallbackConfig}}t(xo,"fallbackConfig",{unit:"SECOND",amount:"10"});class Vo{static getCurrentNumberOfAnnoyanceWidgets(){let e=To.getShownForms(),t=[];return Object.keys(e).filter((e=>Ge.has(e))).forEach((i=>{t.push(...e[i])})),t.length}static isAlreadyRendered(e,t){let i=To.getShownForms();return i[e]&&i[e].includes(t)}static isRenderingAllowed(e,t,i){if(this.isAlreadyRendered(i,t))return!0;let{sessionAnnoyanceLastWidgetClosedMs:n,sessionAnnoyanceLastWidgetPagesCount:o,sessionPagesCount:r}=e;if(we.getAll().includes(xo.get().unit)){if(Number.isInteger(n))return e=n>(e=Pe.convert(xo.get().unit,we.MILLISECOND,xo.get().amount)),Po.log("annoyance time diffing ".concat(JSON.stringify(xo.get())," = ").concat(e)),e&&0===Vo.getCurrentNumberOfAnnoyanceWidgets()}else if(o)return e=r-o>=(e=xo.get().amount),Po.log("annoyance pages count ".concat(r," (sessionPagesCount) ").concat(JSON.stringify(xo.get())," = ").concat(e)),e&&0===Vo.getCurrentNumberOfAnnoyanceWidgets();return 0===Vo.getCurrentNumberOfAnnoyanceWidgets()}}let ko=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter((e=>!!e)).join("__")},Fo={COOKIE:"cookie",CONTACT_ID:"contactId",EXTERNAL_CUSTOMER_ID:"externalCustomerId",EMAIL:"email",PHONE:"phone"};class Uo{constructor(e,t,i,n,o){this.cookie=e,this.contactId=t,this.email=i,this.phone=n,this.externalCustomerId=o}toJSON(){return JSON.stringify(this)}toLocatorsList(){return Object.keys(Fo).filter((e=>!!this[Fo[e]])).map((e=>({type:Fo[e],value:this[Fo[e]]})))}static fromUserInfo(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new Uo(void 0,e.clContactId||e.esContactId||e.utmContactId,e.email,e.phone,e.externalCustomerId)}}class Bo{static async request(e){let t=Ce.getConfig(),i=ot.getUserIdentifier(),n=Uo.fromUserInfo(Ce.getUserInfo());return n.cookie=i,e={accountId:t.accountId||t.orgId,contactId:n.contactId,locators:n.toLocatorsList(),checks:e},Je.execute(t.apiConfig.asyncRulesCheckUrlV2,"POST",e,Bo.getHeadersV2()).then((e=>e.body)).catch((e=>(Ee.error(e,"Failed on async rules check V2 "),null)))}}t(Bo,"getHeadersV2",(()=>({"cl-customer-id":ot.getUserIdentifier()})));class Ho{set(e,t){return ke.set(e,t)}get(e){return ke.get(e)}remove(e){return ke.remove(e)}}class Go{constructor(e,t,i){let n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;this.cacheProvider=e,this.cacheKey=t,this.cleanupInterval=i,this.defaultTTl=n,this.cleanupInterval&&this.startCleanup()}startCleanup(){this.interval=setInterval((()=>this.cleanup()),this.cleanupInterval)}stopCleanup(){this.interval&&(clearInterval(this.interval),this.interval=null)}cleanup(){var e=this.getMap();let t=!1;for(let i in e)e[i].expirationDate&&Date.now()>e[i].expirationDate&&(delete e[i],t=!0);t&&(e=JSON.stringify(e),this.cacheProvider.set(this.cacheKey,e))}set(e,t){let i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.defaultTTl,n=3<arguments.length?arguments[3]:void 0,o=4<arguments.length?arguments[4]:void 0;try{let r=i?Date.now()+i:null,a=this.getMap();a[e]={value:t,expirationDate:r,clContactId:n,webId:o};let s=JSON.stringify(a);this.cacheProvider.set(this.cacheKey,s)}catch(e){Ee.info("Failed to set item to session storage",e)}}get(e){try{let t=this.getMap();if(!t.hasOwnProperty(e))return null;let i=t[e];return i.expirationDate&&Date.now()>i.expirationDate?(this.delete(e),null):i}catch(e){return Ee.info("Failed to get item from session storage",e),null}}delete(e){try{let t=this.getMap();delete t[e];let i=JSON.stringify(t);this.cacheProvider.set(this.cacheKey,i)}catch(e){Ee.info("Failed to remove item from session storage",e)}}getMap(){try{let e=this.cacheProvider.get(this.cacheKey);return e?JSON.parse(e):{}}catch(e){return Ee.info("Failed to get item from session storage",e),{}}}clear(){this.cacheProvider.remove(this.cacheKey)}}var Wo=new class{constructor(){if(this.isFeatureEnabled()){var e,t;this.lock=new Lo,this.initAsyncRulesCheckCache();let i=Ce.getConfig();this.segmentationWithoutContactIdEnabled=(null===(e=i.features)||void 0===e?void 0:e.SEGMENT_BY_CONTACT_ACTIVITY_IN_WIDGET)&&!0===(null===(t=i.features)||void 0===t?void 0:t.SEGMENT_BY_CONTACT_ACTIVITY_IN_WIDGET),this.generalHideForSubscribersCache=!1,this.widgetHideForSubscribersCache=new Map,this.serviceFailedToProcess=!1}}initAsyncRulesCheckCache(){ke.registerKeys("es.async.rules.check.cache","es.async.rules.check.cache.duration.ms"),this.asyncRulesCheckCache=new Go(new Ho,"es.async.rules.check.cache",4e3);let e=ke.get("es.async.rules.check.cache.duration.ms");this.asyncRulesCheckCacheDuration=!isNaN(e)&&+e||3e5}isFeatureEnabled(){var e,t;return(null===(e=Ce.getConfig().features)||void 0===e?void 0:e.CHECK_SEGMENT_MEMBERSHIP)&&!0===(null===(t=Ce.getConfig().features)||void 0===t?void 0:t.CHECK_SEGMENT_MEMBERSHIP)}getTtl(e,t){var i,n;let o=null;return 429===(null===(i=e.response.error)||void 0===i?void 0:i.status)?o=5e3:e.response.error&&404!==(null===(n=e.response.error)||void 0===n?void 0:n.status)||(o=t),o}processAsyncRule(e,t,i,n,o,r,a,s,l,d){o=ko(o,s),n[e.formId].push(o),(e=this.asyncRulesCheckCache.get(s))&&!e[l]&&e[l]!==d&&(this.asyncRulesCheckCache.delete(s),e=void 0),e?t[o]=e.value.response.checkResult:(t[o]=void 0,i.push({type:r,params:{[a]:s},response:void 0}))}processResponse(e,t,i,n,o,r){e[t=ko(t,i.params[n])]=i.response.checkResult,this.asyncRulesCheckCache.set(i.params[n],i,this.getTtl(i,this.asyncRulesCheckCacheDuration),o,r)}containsIdentifyFields(e){return!!e.fields&&e.fields.some((e=>!!("phone"===e.id|"email"===e.id)))}async processAsyncRules(e,t,i){if(this.lock.isLocked())return[];let n=[],o=[];return e.reduce(((e,n)=>{let o="FOR_ALL"===lt.getForm(n.formId).publishStatus&&n.useCase===Qe.REQUEST_FORM;var r=i===n.formId,a=st.isDebugVariantShouldBeShown(lt.getDebugFormVariants(),n.id);return r=t&&(r||a),a=!lt.formVariantHasEnabledAsyncRules(n),r||a&&!o?e.push({fV:n,shouldBeRendered:!0}):e.push({fV:n,shouldBeCheckedByAsyncRules:!0}),e}),[]).forEach((e=>{let{fV:t,shouldBeCheckedByAsyncRules:i}=e;i?n.push(t):o.push(t)})),e=await this.checkBatch(n),o.concat(e)}async checkBatch(e){var t;let i=[];if(this.serviceFailedToProcess)return i;let n=[],o={},r={},a=Ie.get("clContactId")||null,s=!!a,l=ot.getUserIdentifier();if(e.forEach((e=>{r[e.formId]=[];var t=e.asyncRules.SHOW_IF_SEGMENT_MEMBER;let i=e.asyncRules.HIDE_FOR_SUBSCRIBERS;var d=t&&t.enabled;let c=d&&(this.segmentationWithoutContactIdEnabled||s),h=e.useCase===Qe.REQUEST_FORM&&!c&&!this.containsIdentifyFields(e);c?this.processAsyncRule(e,o,n,r,"SHOW_IF_SEGMENT_MEMBER","IS_IN_SEGMENT","segmentId",t.segmentId,"clContactId",a):d&&(r[e.formId].push(ko("SHOW_IF_SEGMENT_MEMBER",null==t?void 0:t.segmentId)),o[ko("SHOW_IF_SEGMENT_MEMBER",null==t?void 0:t.segmentId)]=void 0),h&&this.processAsyncRule(e,o,n,r,"SHOW_IF_WEB_ID_MAPPED","IS_WEB_ID_MAPPED","webId",l,"webId",l),i&&i.enabled&&(t=ko("HIDE_FOR_SUBSCRIBERS",i.checkThisWidgetOnly&&e.formId),r[e.formId].push(t),(d=i.checkThisWidgetOnly?this.widgetHideForSubscribersCache.get(e.formId):this.generalHideForSubscribersCache)?o[t]=!d.response.checkResult:(o[t]=void 0,n.push({type:"IS_ALREADY_SUBSCRIBED",params:{widgetId:i.checkThisWidgetOnly&&e.formId||void 0},response:void 0})))})),!n.length)return j(e,r,o);n=function(e){return Object.values(e.reduce(((e,t)=>{let i=ko(t.type,t.params.segmentId,t.params.widgetId);return e[i]||(e[i]=t),e}),{}))}(n),this.lock.lock(0);let d=await Bo.request(n.filter((e=>!e.response)));return this.lock.unlock(0),d?(null==d||null===(t=d.checks)||void 0===t||t.forEach((e=>{if("IS_IN_SEGMENT"===e.type)ko("SHOW_IF_SEGMENT_MEMBER",e.params.segmentId),this.processResponse(o,"SHOW_IF_SEGMENT_MEMBER",e,"segmentId",a,l);else if("IS_WEB_ID_MAPPED"===e.type)this.processResponse(o,"SHOW_IF_WEB_ID_MAPPED",e,"webId",a,l);else if("IS_ALREADY_SUBSCRIBED"===e.type){let t=ko("HIDE_FOR_SUBSCRIBERS",e.params.widgetId);o[t]=!e.response.checkResult,e.params.widgetId?this.widgetHideForSubscribersCache.set(e.params.widgetId,e):this.generalHideForSubscribersCache=e}})),j(e,r,o)):(this.serviceFailedToProcess=!0,i)}};class jo{constructor(){}activate(){this._setupCache()}_setupCache(){var{storagePrefix:e}=Ce.getPrefix();let t="".concat(e,"check.segment.cache");e="".concat(e,"check.segment.cache.duration.ms"),ke.registerKeys(t,e),e=ke.get(e),e=!isNaN(e)&&+e||3e5,this.cache=new Go(new Ho,t,4e3,e)}async processAsyncRules(e,t,i){return e=e.map((e=>new Promise(((n,o)=>{if((!t||i!==e.formId&&!st.isDebugVariantShouldBeShown(lt.getDebugFormVariants(),e.id))&&lt.formVariantHasEnabledAsyncRules(e))return this.check(e).then(n);n({fV:e,shouldBeRendered:!0})})).catch((e=>{Ee.error(e,"Failed on form rules check")})))),(await Promise.all(e)).filter((e=>e&&e.shouldBeRendered)).map((e=>(({fV:e}=e),e)))}async check(e){if(this.cache.get(e.id))return{fV:e,shouldBeRendered:this.cache.get(e.id).value};var t=Ce.getConfig().apiConfig.asyncRulesCheckUrl.replace("{id}",qe.createVariantUUID(e.id));return t=await Je.execute(t,"GET",null,jo.getHeaders()).then((e=>e.body)).then((e=>!e.hideByAsyncRules)).catch((t=>(Ee.error(t,"Failed on async rules check fV:"+e.id),!1))),this.cache.set(e.id,t),{fV:e,shouldBeRendered:t}}}t(jo,"getHeaders",(()=>({"Content-Type":"text/plain","cl-customer-id":ot.getUserIdentifier()})));var zo=new jo;class Ko{isRuleTypeEnabled(e,t){return!!e[t]&&(!e[t].hasOwnProperty("enabled")||e[t].enabled)}}let Xo={ANNOYANCE:"ANNOYANCE",FREQUENCY:"FREQUENCY",CUSTOM_CODE:"CUSTOM_CODE",TARGETING:"TARGETING",HIDE:"HIDE",SCHEDULE:"SCHEDULE",SELECTOR:"SELECTOR",PLACEMENT:"PLACEMENT"};class Yo extends Ko{constructor(e,t){super(),this.rule=e,this.fV=t}isEnabled(){return this.isRuleTypeEnabled(this.fV.rules,Xo.CUSTOM_CODE)}isFulfilled(){return this.isEnabled()}}class Qo{constructor(e,t){var i,n;this.annoyanceType=(null===(i=e.rules)||void 0===i||null===(n=i.ANNOYANCE)||void 0===n?void 0:n.type)||"SHOW_IN_INTERVAL",this.fV=e,this.sessionStat=t}isEnabled(){return Ge.has(this.fV.type)&&xo.isEnabled()}isFulfilled(e){return!!Vo.isAlreadyRendered(this.fV.type,this.fV.id)||("SHOW_REGARDLESS_OF_THE_DISPLAY_OF_WIDGETS"===this.annoyanceType||("SHOW_IF_THERE_ARE_NO_FLOATING_WIDGETS_DISPLAYED"===this.annoyanceType?!e.skipList.includes(this.fV.id)&&0===Vo.getCurrentNumberOfAnnoyanceWidgets():Vo.isRenderingAllowed(e,this.fV.id)))}}t(Qo,"config",xo.get());class qo extends Ko{constructor(e,t,i){super(),this.rule=e,this.fV=t,this.excludedRuleTypes=i}isEnabled(){return!this.excludedRuleTypes.includes("FREQUENCY")&&this.isRuleTypeEnabled(this.fV.rules,"FREQUENCY")}isBasedOnTime(){var e;return 0<((null===(e=this.rule)||void 0===e?void 0:e.predicates)||[]).filter((e=>e.isActive)).filter((e=>["MIN_INTERVAL","ONCE_PER_SESSION"].includes(e.name))).length}isFulfilled(e){var t;return 0<((null===(t=this.rule)||void 0===t?void 0:t.predicates)||[]).filter((e=>e.isActive)).filter((t=>!qo.predicates[t.name]||new qo.predicates[t.name](t,this.fV).is(e))).length}}t(qo,"predicates",{NO_LIMIT:class{constructor(e,t){this.predicate=e,this.fV=t}is(e){return!this.fV.useCase||this.fV.useCase!==Qe.AGE_VERIFY||!(null!=(e=e.formVariants[this.fV.id])&&e.closeDate)}},ONCE_PER_SITE:class{constructor(e,t){this.predicate=e,this.fV=t}is(e){return e=e.formVariants[this.fV.id],this.fV.useCase&&this.fV.useCase===Qe.AGE_VERIFY?!(null!=e&&e.closeDate):!e}},MIN_INTERVAL:class{constructor(e,t){this.predicate=e,this.fV=t}is(e){let t=Pe.convert(this.predicate.params.unit,we.MILLISECOND,this.predicate.params.amount);if(this.fV.useCase&&this.fV.useCase===Qe.AGE_VERIFY){var i,n=null===(i=e.formVariants[this.fV.id])||void 0===i?void 0:i.closeDate;if(n)return 0<=new Date-new Date(n)-t}else if(i=null===(n=e.formVariants[this.fV.id])||void 0===n?void 0:n.view)return 0<=new Date-new Date(i)-t;return!0}},ONCE_PER_SESSION:class{constructor(e,t){this.predicate=e,this.fV=t}is(e){let t=e.formVariants[this.fV.id];return this.fV.useCase&&this.fV.useCase===Qe.AGE_VERIFY?!t||!t.closeDate||new Date(t.closeDate).getTime()<new Date(e.currentSession.getStartISOString()).getTime():!t||!t.view||new Date(t.view).getTime()<new Date(e.currentSession.getStartISOString()).getTime()}}});class Zo{constructor(e){this.condition=e}isFulfilled(e,t,i){var n;let o=null===(n=e.formVariants[t.id])||void 0===n?void 0:n.close;if((n=t.useCase&&t.useCase===Qe.AGE_VERIFY)&&i.basedOnTime){var r=!i.fulfilled&&o>=this.condition.params.amount;return Po.log("WIDGET_AGE_VERIFY_BASED_ON_TIME_CLOSED ".concat(r)),r}return n?(e=(null===(r=e.formVariants[t.id])||void 0===r?void 0:r.closeDate)&&o>=this.condition.params.amount,Po.log("WIDGET_AGE_VERIFY_CLOSED ".concat(e)),e):(r=o>=this.condition.params.amount,Po.log("WIDGET_CLOSED ".concat(r)),r)}}class Jo{static create(e){if("WIDGET_CLOSED"===e.name)return new Zo(e);throw Error("Unknown ConditionName: "+e.name)}}let $o={AND:"AND",OR:"OR"};class er extends Ko{constructor(e,t,i){super(),this.rule=e,this.fV=t,this.excludedRuleTypes=i,this.isFulfilled=this.isFulfilled.bind(this)}isEnabled(){return!this.excludedRuleTypes.includes("HIDE")&&this.isRuleTypeEnabled(this.fV.rules,"HIDE")}isFulfilled(e,t){if(!this.isEnabled())return!1;let i=this.rule.conditions.filter((i=>Jo.create(i).isFulfilled(e,this.fV,t)));return z(this.rule.conditions.length,i.length,this.rule.relation)}}class tr{constructor(e,t){this.predicate=e,this.fV=t}is(e){return!this._isDateWithTimeZoneInPast(this.predicate.params.date,this.predicate.params.timeZone,e.cacheTimeShiftMs)}_isDateWithTimeZoneInPast(e,t){let i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return 0>=new Date(e).getTime()+(i||0)-this._setTimeZoneToNativeDate(null,t).getTime()}_isDayAndTimeAllowed(e,t,i){var n=this._setTimeZoneToNativeDate(null,i);i=n.toLocaleString("en-EN",{weekday:"long"}).toLowerCase();var o=60*n.getHours()+n.getMinutes();if(n=this._getPreviousDay(n).toLocaleString("en-EN",{weekday:"long"}).toLowerCase(),"00"===e.from.hours&&"00"===e.from.minutes&&"00"===e.to.hours&&"00"===e.to.minutes)o=!0;else{var r=e.to.hours;let a=e.to.minutes;if("00"===r&&"00"===a&&(r="23",a="59"),e=60*parseInt(e.from.hours,10)+parseInt(e.from.minutes,10),0>(r=60*parseInt(r,10)+parseInt(a,10))-e)return e<=o&&t.includes(i)||o<=r&&t.includes(n);o=e<=o&&o<=r}return o&&t.includes(i)}_setTimeZoneToNativeDate(e,t){return e=e?new Date(e):new Date,t?new Date(e.toLocaleString.call(e,"en-US",{timeZone:t&&"Europe/Kyiv"===t?"Europe/Kiev":t})):e}_getPreviousDay(e){return(e=new Date(e)).setDate(e.getDate()-1),e}}class ir extends Ko{constructor(e,t){super(),this.rule=e,this.fV=t}isEnabled(){return this.isRuleTypeEnabled(this.fV.rules,"SCHEDULE")}isFulfilled(e){var t;return 0===((null===(t=this.rule)||void 0===t?void 0:t.predicates)||[]).filter((e=>e.isActive)).map((t=>!ir.predicates[t.name]||{fulfilled:new ir.predicates[t.name](t,this.fV).is(e)})).filter((e=>!e.fulfilled)).length}}t(ir,"predicates",{HIDE_AFTER:class extends tr{constructor(e,t){super(e,t)}is(e){return!this._isDateWithTimeZoneInPast(this.predicate.params.date,this.predicate.params.timeZone,e.cacheTimeShiftMs)}},SHOW_AFTER:class extends tr{constructor(e,t){super(e,t)}is(e){return this._isDateWithTimeZoneInPast(this.predicate.params.date,this.predicate.params.timeZone,e.cacheTimeShiftMs)}},SPECIFIC_DAYS_AND_TIME:class extends tr{constructor(e,t){super(e,t)}is(e){return this._isDayAndTimeAllowed(this.predicate.params.time,this.predicate.params.days,this.predicate.params.timeZone,e.cacheTimeShiftMs)}},HIDE_AFTER_RELATIVE_TIMER_FOR_AMOUNT_OF_TIME:class{constructor(e,i){t(this,"_dayInMs",864e5),t(this,"_hourInMs",36e5),t(this,"_minuteInMs",6e4),this.predicate=e,this.fV=i,this.isShownInCurrentSessionKey=ke.getKey("f.isRelativeTimerShownInCurrentSession"),ke.registerKeys(this.isShownInCurrentSessionKey),this.relativeTimerStorageKey=ke.getKey("f.fv.relativeTimerViewDate")}is(e){var t,i=null===(t=e.formVariants[this.fV.id])||void 0===t?void 0:t.relativeTimerViewDate;let n=(t=this._getPersistedShownParams())||this.predicate.params;if(!i||"FROM_THE_START_OF_DISPLAYING"!==n.mode)return this.allowDisplay();if((i=(e=new Date(i).getTime()+(e.cacheTimeShiftMs||0)+this._getLengthMs(n.lengthFromTheStart))<Date.now())&&n.isShowAgainAllowed){if("NEXT_SESSION"===n.showAgainMode)return t?this.restrictDisplay():this.allowDisplay(!0);if("AFTER_FIXED_PERIOD"===n.showAgainMode)return e+(t=this._getShowAgainMs(n.showAgainUnit,n.showAgainAmount))<=Date.now()?this.allowDisplay(!0):this.restrictDisplay()}return i?this.restrictDisplay():this.allowDisplay()}restrictDisplay(){return!1}allowDisplay(e){return this._getPersistedShownParams()||this._setPersistedShownParams(),e&&localStorage.removeItem(this.relativeTimerStorageKey),!0}_getAllPersistedShownParams(){return ke.get(this.isShownInCurrentSessionKey)||{}}_getPersistedShownParams(){var{id:e}=this.fV;return({[e]:e}=this._getAllPersistedShownParams()),e||null}_setPersistedShownParams(){let e={[this.fV.id]:this.predicate.params},t=this._getAllPersistedShownParams();Object.assign(t,e),ke.set(this.isShownInCurrentSessionKey,t)}_getLengthMs(e){let[t,i,n,o]=e.split(".").map(Number);return t*this._dayInMs+i*this._hourInMs+n*this._minuteInMs+1e3*o}_getShowAgainMs(e,t){return{DAYS:this._dayInMs,HOURS:this._hourInMs,MINUTES:this._minuteInMs}[e]*t}}});let nr=[{operandName:"VISITOR",operators:[{type:"TIME",name:"TIME_SPENT_ON_PAGE"},{type:"TIME",name:"TIME_SPENT_ON_SITE"},{type:"INTEGER",name:"PAGE_READ_PERCENT"},{type:"INTEGER",name:"PAGES_VIEWED"},{type:"TIME",name:"UN_ACTIVE_TIME"},{type:"VOID",name:"USER_LEAVES_PAGE"},{type:"VOID",name:"USER_ALREADY_SUBSCRIBED_FOR_THE_CURRENT_FORM"},{type:"VOID",name:"USER_NOT_HOVER_WIDGET"},{type:"VOID",name:"NEW_VISITORS"}]},{operandName:"DEVICE_TYPE",operators:[{type:"SELECT",name:"EQUALS",options:[{label:"ANY",value:null},{label:"MOBILE",value:"MOBILE"},{label:"DESKTOP",value:"DESKTOP"}]}]},{operandName:"URL",operators:[{type:"STRING",name:"EQUALS"},{type:"STRING",name:"CONTAINS"},{type:"STRING",name:"CONTAINS_ONE_OF"},{type:"STRING",name:"STARTS_WITH"},{type:"STRING",name:"ENDS_WITH"},{type:"STRING",name:"REG_EX"}]},{operandName:"URL_SEARCH_PARAM",operators:[{type:"STRING",name:"EQUALS"},{type:"STRING",name:"CONTAINS"},{type:"STRING",name:"CONTAINS_ONE_OF"},{type:"STRING",name:"STARTS_WITH"},{type:"STRING",name:"ENDS_WITH"},{type:"STRING",name:"REG_EX"},{type:"STRING",name:"EXISTS"}]},{operandName:"HTML_ELEMENT",operators:[{type:"HTML_ELEMENT",name:"MATCHES"}]},{operandName:"COUNTRY",operators:[{type:"STRING",name:"CONTAINS_ONE_OF"}]},{operandName:"REGION",operators:[{type:"STRING",name:"CONTAINS_ONE_OF"}]},{operandName:"CITY",operators:[{type:"STRING",name:"CONTAINS_ONE_OF"}]},{operandName:"DATA_LAYER_EVENT",operators:[{type:"STRING",name:"STARTS_WITH"},{type:"STRING",name:"CONTAINS_ONE_OF"},{type:"STRING",name:"ENDS_WITH"},{type:"STRING",name:"EQUALS"},{type:"FLOAT",name:"LESS_THAN"},{type:"FLOAT",name:"GREATER_THAN"},{type:"STRING",name:"REG_EX"},{type:"STRING",name:"EXISTS"}]}];class or{static getOperatorType(e,t){return nr.find((t=>t.operandName===e)).operators.find((e=>e.name===t)).type}}class rr{constructor(e){t(this,"operatorNameMap",{CONTAINS:K,STARTS_WITH:X,EQUALS:Q,ENDS_WITH:Y,REG_EX:q,CONTAINS_ONE_OF:Z,EXISTS:J}),this.name=e}isMatched(e,t,i,n){return this.operatorNameMap[this.name](e,t,i,n)}}class ar{constructor(e){t(this,"operatorNameMap",{TIME_SPENT_ON_PAGE:ee,TIME_SPENT_ON_SITE:te,UN_ACTIVE_TIME:ie}),this.name=e}isMatched(e,t,i,n){return e=this.operatorNameMap[this.name](e,t,i,n),Po.log("time  ".concat(this.name," ").concat(JSON.stringify(i)," = ").concat(e)),e}}class sr{constructor(e){t(this,"operatorNameMap",{MATCHES:ne}),this.name=e}isMatched(e,t,i,n){return this.operatorNameMap[this.name](e,t,i,n)}}class lr{constructor(e){t(this,"operatorNameMap",{USER_ALREADY_SUBSCRIBED_FOR_THE_CURRENT_FORM:oe,USER_LEAVES_PAGE:re,USER_NOT_HOVER_WIDGET:se,NEW_VISITORS:ae}),this.name=e}isMatched(e,t,i,n){return e=this.operatorNameMap[this.name](e,t,i,n),Po.log("".concat(this.name,"  ").concat(JSON.stringify(i)," = ").concat(e)),e}}class dr{constructor(e){t(this,"operatorNameMap",{PAGE_READ_PERCENT:le,PAGES_VIEWED:de}),this.name=e}isMatched(e,t,i,n){return this.operatorNameMap[this.name](e,t,i,n,this.name)}}class cr{constructor(e){t(this,"operatorNameMap",{LESS_THAN:ce,GREATER_THAN:he}),this.name=e}isMatched(e,t,i,n){return this.operatorNameMap[this.name](e,t,i,n,this.name)}}class hr{static create(e,t){switch(e){case"STRING":case"SELECT":return new rr(t);case"TIME":return new ar(t);case"HTML_ELEMENT":return new sr(t);case"INTEGER":return new dr(t);case"VOID":return new lr(t);case"FLOAT":return new cr(t);default:throw Error("Unknown OperatorType: "+e)}}}class ur{constructor(e){this.condition=e}isOperandValueMatched(e,t,i,n){var o=or.getOperatorType(this.condition.operand.name,this.condition.operator);let r;o=hr.create(o,this.condition.operator);try{r=n?decodeURIComponent(this.condition.value):this.condition.value}catch(e){r=this.condition.value}return e=o.isMatched(e,t,r,i),Po.log("".concat(i,"  ").concat(this.condition.operator," ").concat(r," = ").concat(e)),e}}class mr extends ur{constructor(e){super(e)}urlWithoutDebugParams(){let e=new URL(window.location.href);"esDebugForm clDebugForm clPublishedForm esPublishedForm clIgnoreRules esIgnoreRules".split(" ").forEach((t=>{e.searchParams.delete(t)}));let t=Array.from(e.searchParams.entries()).map((e=>"".concat(encodeURIComponent(e[0]),"=").concat(encodeURIComponent(e[1])))).join("&"),i=e.pathname.split("/").map((e=>{try{return encodeURIComponent(decodeURIComponent(e))}catch(t){return e}}));return"".concat(this._decodeURIComponent(e.origin)).concat(this._decodeURIComponent(i.join("/"))).concat(t?"?"+this._decodeURIComponent(t):"").concat(this._decodeURIComponent(e.hash))}_decodeURIComponent(e){try{return decodeURIComponent(e)}catch(t){return e}}isFulfilled(e,t){return this.isOperandValueMatched(e,t,this.urlWithoutDebugParams(),!0)}}class pr extends ur{constructor(e){super(e)}isFulfilled(e,t){return e.sessionUrlSearchParams.some((i=>{if((i=new URLSearchParams(i).get(this.condition.operand.value))&&this.isOperandValueMatched(e,t,i,!0))return!0}))}}class gr extends ur{constructor(e){super(e)}isFulfilled(e,t){let i=or.getOperatorType(this.condition.operand.name,this.condition.operator);return hr.create(i,this.condition.operator).isMatched(e,t,this.condition.value)}}class Er extends ur{constructor(e){super(e)}isFulfilled(e,t){if(!this.condition.value)return!0;var i=navigator.userAgent||navigator.vendor||window.opera;return i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(i)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(i.substr(0,4))?"MOBILE":"DESKTOP",this.isOperandValueMatched(e,t,i)}}class vr extends ur{constructor(e){super(e)}isFulfilled(e,t){let i=or.getOperatorType(this.condition.operand.name,this.condition.operator);return e=!!hr.create(i,this.condition.operator).isMatched(e,t,this.condition.value),Po.log("HTML_ELEMENT  ".concat(this.condition.operator," ").concat(this.condition.value," = ").concat(e)),e}}class _r extends ur{constructor(e){super(e)}isFulfilled(e,t,i){return this.isOperandValueMatched(e,t,[i.countryCode])}}class fr extends ur{constructor(e){super(e)}isFulfilled(e,t,i){return this.isOperandValueMatched(e,t,[String(i.regionGeonameId)])}}class yr extends ur{constructor(e){super(e)}isFulfilled(e,t,i){return this.isOperandValueMatched(e,t,[String(i.cityGeonameId)])}}let Tr={},Ir=null;class Or extends ur{constructor(e){super(e)}isFulfilled(e,t){var i,n,o=btoa(JSON.stringify(this.condition));if(this.shouldInvalidateResultsCache())Ir=null===(i=window.dataLayer)||void 0===i?void 0:i.length,Tr={};else if(void 0!==(null===(n=Tr[t.id])||void 0===n?void 0:n[o]))return o=Tr[t.id][o],Po.log("data layer event condition ".concat(JSON.stringify(this.condition)," ").concat(o?"matches":"not matches"," (from cache)")),o;return i=this.condition.value.parameters.relation===$o.AND?this.condition.value.parameters.values.every((i=>this.isParameterValueMatches(e,t,i))):this.condition.value.parameters.values.some((i=>this.isParameterValueMatches(e,t,i))),Tr[t.id]?Tr[t.id][o]=i:Tr[t.id]={[o]:i},i}isParameterValueMatches(e,t,i){let n=this.getParameterValue(i);if(!this.isParameterValueValid(n))return!1;let o=or.getOperatorType(this.condition.operand.name,i.operator);return e=hr.create(o,i.operator).isMatched(e,t,i.value,n),Po.log("".concat(n," ").concat(i.operator," ").concat(i.value," = ").concat(e)),e}isParameterValueValid(e){return!(d(e)||Array.isArray(e)&&(!e.length||d(e[0])||Array.isArray(e[0])))}getParameterValue(e){return gt.processModel({arguments:[{name:"dataLayerEventName",value:this.condition.value.event},{name:"dataLayerPropPath",value:e.name}]})}shouldInvalidateResultsCache(){var e;return null==Ir||Ir!==(null===(e=window.dataLayer)||void 0===e?void 0:e.length)}}class Ar{static create(e){switch(e.operand.name){case"URL":return new mr(e);case"URL_SEARCH_PARAM":return new pr(e);case"VISITOR":return new gr(e);case"DEVICE_TYPE":return new Er(e);case"HTML_ELEMENT":return new vr(e);case"COUNTRY":return new _r(e);case"REGION":return new fr(e);case"CITY":return new yr(e);case"DATA_LAYER_EVENT":return new Or(e);default:throw Error("Unknown OperandName: "+e.operand.name)}}}class Cr extends Ko{constructor(e,t,i){super(),this.rule=e,this.fV=t,this.state={},this.cachingState={},this.locationData=i,this.isFulfilled=this.isFulfilled.bind(this)}isEnabled(){return this.isRuleTypeEnabled(this.fV.rules,"TARGETING")}isFulfilled(e){return!this.isExcludeFulfilled(this.rule.schema.exclude,e)&&(e=this.isIncludeFulfilled(this.rule.schema.include,e),this.state.pageFulfilled=e&&(this.state.URL||this.state.URL_SEARCH_PARAM||this.state.HTML_ELEMENT),this.fV.rules.pageFulfilled=this.state.pageFulfilled,e)}isIncludeFulfilled(e,t){return this.areGroupsFulFilled(e.groups,e.relation,t,{exclude:!1})}isExcludeFulfilled(e,t){return!!e.groups.length&&this.areGroupsFulFilled(e.groups,e.relation,t,{exclude:!0})}areGroupsFulFilled(e,t,i){this.cachingState={relation:t,fulfilledGroupsCount:0};let n=e.map(((e,t)=>(((e=this.isGroupFulfilled(e,i)).hasUserLeavesPage||e.hasReadPercent)&&(this.cachingState.groupIndexContainingCachingRules=t),this.cachingState.fulfilledGroupsCount+=Number(e.groupFulfilled),e))),o=n.filter((e=>(({groupFulfilled:e}=e),e)));return e=z(e.length,o.length,t),this.cachingState={...this.cachingState,fulfilled:e,groups:n,relation:t},e}isGroupFulfilled(e,t){var i=e.relation;let n=e.conditions.length,o={groupFulfilled:!0,groupRelation:i,conditions:[]};if(!n)return o;let r=!1,a=!1,s=0;return i=z(n,(e=e.conditions.map((e=>{const i=Ar.create(e).isFulfilled(t,this.fV,this.locationData);return Object.assign(this.state,{[e.operand.name]:i}),"PAGE_READ_PERCENT"===e.operator&&(a=!0),"USER_LEAVES_PAGE"===e.operator&&(r=!0),i||"PAGE_READ_PERCENT"===e.operator||"USER_LEAVES_PAGE"===e.operator||s++,{fulfilled:i,conditionModel:e}}))).filter((e=>(({fulfilled:e}=e),e))).length,i),{...o,groupFulfilled:i,conditions:e,hasReadPercent:a,hasUserLeavesPage:r,numberOfFailedConditions:s}}}class Sr{constructor(e){this.fV=e,this.state={},this.uniquePlacementsGetter=new co(this.fV),this._uniquePresentPlacements=[],this.isFulfilled=this.isFulfilled.bind(this)}isEnabled(){return"BUILT_IN"===this.fV.type}uniquePresentPlacements(){return this._uniquePresentPlacements}checkUniquePresentPlacements(){this._uniquePresentPlacements=this.uniquePlacementsGetter.getUniquePresentPlacements()}isFulfilled(e){return this.checkUniquePresentPlacements(),0<this._uniquePresentPlacements.length||e(this.fV.id)}}class br{constructor(e){t(this,"_semaphore",new Lo),this.rulesService=e}invalidate(){let e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).filter((e=>{var t;return(t=this._semaphore.canLock(e.formVariant.id))&&(t=e.allRulesFulfilled||(!e.rules[Xo.FREQUENCY].enabled||e.rules[Xo.FREQUENCY].fulfilled)&&(!e.rules[Xo.HIDE].enabled||!e.rules[Xo.HIDE].fulfilled)&&(!e.rules[Xo.SCHEDULE].enabled||e.rules[Xo.SCHEDULE].fulfilled)&&(function(e){if(e.rules[Xo.TARGETING].enabled){if(({cachingState:e={}}=e.rules[Xo.TARGETING].rule),void 0===e.groupIndexContainingCachingRules)return!1;var t=e.groups[e.groupIndexContainingCachingRules];let i=t.groupRelation===$o.OR||!t.numberOfFailedConditions;return e.relation===$o.OR?e.fulfilled||t.fulfilled||i:(t=e.fulfilledGroupsCount-Number(t.groupFulfilled)==e.groups.length-1,e.fulfilled||t&&i)}return!1}(e)||!!(e.formVariant.rules[Xo.SELECTOR]&&e.formVariant.rules[Xo.SELECTOR].enabled&&e.formVariant.rules[Xo.SELECTOR].selector))),t}));return this._cache(e)}async _cache(e){if(e.length)return e=e.map((e=>(({formVariant:e}=e),e))),e=await this.rulesService.filterByAsyncRules(e),this._cacheForms(e),e}async _cacheForms(e){try{for await(let t of e){if(!this._semaphore.canLock(t.id))continue;this._semaphore.lock(t.id);let{manifests:e,appearance:i}=await wo.prepareForDisplay(t),n=e.filter((e=>{var t;return 0<(null==e||null===(t=e.resourcesPropPaths)||void 0===t?void 0:t.length)})).map((e=>i.document.views.map((t=>{const n=[];return l(t,(t=>{if(t.name===e.name){var o=e.resourcesPropPaths.map((e=>pe(t.props,e,i))).filter(Boolean);o=G(o,1/0),n.push(...o.filter(Boolean))}})),H(t=n.map((e=>this._loadResource(e))))}))));await H(n)}}catch(t){throw this._semaphore.unlockAll(e.map((e=>e.id))),t}}_loadResource(e){var t;let i=e.startsWith("url")?((null===(t=/url\((.*)\)/.exec(e))||void 0===t?void 0:t[1])||"").replace(/['"]/g,""):e;return/^https?:\/\//.test(i)?new Promise(((t,n)=>{let o=new Image;o.onload=()=>t(e),o.onerror=()=>n(e),o.src=i})):Promise.reject("Not a URL")}}var Nr=new class{constructor(e){t(this,"intervalTimerId",null),t(this,"locationData",null),t(this,"resourcesSemaphore",new Lo),t(this,"resourcesCache",new br(this)),this.store=e,this.alreadyCheckedFormVariantIds=new Set,this.showAnotherWidgetFormVariantIds=new Set,this.currentPageRenderedWidgetIds=new Set,this.showFormByClickingElementFormVariantIds=new Set,this.showFormByCustomCodeFormVariantIds=new Set,this.showWidgetOnMouseoutIds=new Set,this.subscriptions=[]}activate(e,t){this.userActionsDetector=e,this.locationData=t,this.checkRules(),this.subscriptions.push(this.userActionsDetector.on("mouseout",(()=>{this.checkRules({mouseout:!0})})),this.userActionsDetector.on("mouseover",(()=>{this.checkRules({mouseout:!1})})),ro.on("PAGE_VIEW_CHANGED",this.onPageViewChanged.bind(this)),ro.on("SHOW_WIDGET_BY_CLICKING_ELEMENT",this.onShowWidgetByClickingElement.bind(this)),ro.on("SHOW_WIDGET_BY_CUSTOM_CODE",this.onShowWidgetByCustomCode.bind(this))),this.intervalTimerId=setInterval((()=>{this.checkRules()}),500)}getStats(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{...this.userActionsDetector.getStats(),...e}}currentPageRendered(e){return this.currentPageRenderedWidgetIds.has(e)}async checkRules(e){try{let t={...this.getStats(e),cacheTimeShiftMs:-500},i=this.getPublishedFormVariantsAvailableForRendering().filter((e=>this.resourcesSemaphore.canLock(e.id))).map((e=>ue(e,t,this.userActionsDetector.sessionStat,this.locationData,(e=>this.currentPageRendered(e)))));this.destroyIfNeeded(t);let n=i.filter((e=>this.filterBySyncRulesFromFvStats(e))).map((e=>(({formVariant:e}=e),e)));n=n.filter((e=>this.filterByDataThatPresentInStorageBeforeAsyncRules(e,t)));let o=await this.filterByAsyncRules(n),r=o.map((e=>e.id));this.resourcesSemaphore.lockAll(r);let a=o.reduce(((e,t)=>Object.assign(e,{[t.id]:!0})),{}),s=i.filter((e=>!a[e.formVariant.id]));setTimeout((()=>{this.resourcesCache.invalidate(s)}),0),t.mouseout&&o.forEach((e=>this.showWidgetOnMouseoutIds.add(e.id))),o.length&&await wo.display(o,(e=>{this.resourcesSemaphore.unlock(e),this.currentPageRenderedWidgetIds.add(e)}),(e=>{this.resourcesSemaphore.unlock(e)}),(e=>{this.resourcesSemaphore.unlock(e)}),(e=>{this.userActionsDetector.sessionStat.addToSkipList(e)}))}catch(e){this.resourcesSemaphore.unlockAll(),Ee.error(e,"Failed on form rules check")}}getAbTestsFormsToExclude(){let e=new Set,t=(Ce.getConfig().formConfig||{}).abTests||[],i=Ce.getFormAbTestsFormVariants().reduce(((e,t)=>e.concat(t.formId)),[]);return t.forEach((t=>{t.rules.forEach((t=>{i.includes(t.formId)||e.add(t.formId)}))})),e}getPublishedFormVariantsAvailableForRendering(){let e=st.publishedFormIdToDebug(),t=st.isDebugShouldIgnoreRules(),i=Ce.getConfig(),n=lt.getFormVariantsToRender(i);return 0<e&&(n=n.filter((t=>t.formId===e||"FOR_ALL"===i.forms[t.formId].publishStatus))),t||(n=n.filter((e=>!this.getAbTestsFormsToExclude().has(e.formId)))),0<this.currentPageRenderedWidgetIds.size?n.filter((e=>!this.currentPageRenderedWidgetIds.has(e.id))):n}async filterByAsyncRules(e){let t=st.publishedFormIdToDebug(),i=st.isDebugShouldIgnoreRules(),{features:n={}}=Ce.getConfig();return!0===(null==n?void 0:n.CHECK_SEGMENT_MEMBERSHIP)?Wo.processAsyncRules(e,i,t):zo.processAsyncRules(e,i,t)}filterBySyncRulesFromFvStats(e){let t=e.formVariant;return!((!st.isDebugShouldIgnoreRules()||st.publishedFormIdToDebug()!==t.formId&&!st.isDebugVariantShouldBeShown(lt.getDebugFormVariants(),t.id))&&t.rules)||!t.rules.CUSTOM_CODE.enabled&&this._syncRulesStatsPredicate(e)}filterByDataThatPresentInStorageBeforeAsyncRules(e,t){var i,n,o,r;return!!st.isDebugShouldIgnoreRules()||!(null!==(i=e.asyncRules)&&void 0!==i&&null!==(n=i.HIDE_FOR_SUBSCRIBERS)&&void 0!==n&&n.enabled&&!1===(null===(o=e.asyncRules)||void 0===o||null===(r=o.HIDE_FOR_SUBSCRIBERS)||void 0===r?void 0:r.checkThisWidgetOnly)&&(e=Object.values(t.formVariants).find((e=>!!e.submit)),t=(t=Ie.get("clContactId"))&&"0"!==t,e&&t))}filterBySyncRules(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];return!((!st.isDebugShouldIgnoreRules()||st.publishedFormIdToDebug()!==e.formId&&!st.isDebugVariantShouldBeShown(lt.getDebugFormVariants(),e.id))&&e.rules)||!e.rules.CUSTOM_CODE.enabled&&(i=ue(e,t,this.userActionsDetector.sessionStat,this.locationData,(e=>this.currentPageRendered(e)),i),this._syncRulesStatsPredicate(i))}_syncRulesStatsPredicate(e){let{formVariant:t,allRulesFulfilled:i,rules:n,stats:o}=e;if(mo.checkPreconditionForDataLayerAndMarkForAlertIfNeeded(t,i,n),Po.log("formVariant ".concat(t.id," annoyance"),n.ANNOYANCE.fulfilled),Po.log("formVariant ".concat(t.id," hide"),n.HIDE.fulfilled),Po.log("formVariant ".concat(t.id," schedule"),n.SCHEDULE.fulfilled),Po.log("formVariant ".concat(t.id," frequency"),n.FREQUENCY.fulfilled),Po.log("formVariant ".concat(t.id," targeting"),n.TARGETING.fulfilled),Po.log("formVariant ".concat(t.id," placement"),n.PLACEMENT.fulfilled),n.ANNOYANCE.enabled)if("SHOW_IF_THERE_ARE_NO_FLOATING_WIDGETS_DISPLAYED"===n.ANNOYANCE.rule.annoyanceType){e=i&&!n.ANNOYANCE.fulfilled;let r=i&&!Vo.isRenderingAllowed(o,t.id,t.type);if(e||r)return o.skipList.includes(t.id)||this.userActionsDetector.sessionStat.addToSkipList(t.id),!1}else if(!n.ANNOYANCE.fulfilled)return!1;return!(n.HIDE.enabled&&n.HIDE.fulfilled||n.SCHEDULE.enabled&&!n.SCHEDULE.fulfilled||n.FREQUENCY.enabled&&!n.FREQUENCY.fulfilled||n.PLACEMENT.enabled&&!n.PLACEMENT.fulfilled)&&(n.TARGETING.enabled&&n.TARGETING.fulfilled)}isWidgetShownOnMouseout(e){return this.showWidgetOnMouseoutIds.has(e.id)?e.rules.TARGETING.schema.exclude.groups.some((e=>e.conditions.some((e=>"USER_NOT_HOVER_WIDGET"===e.operator))))?((e=JSON.parse(JSON.stringify(e))).rules.TARGETING.schema.include.groups.forEach((e=>{e.conditions=e.conditions.filter((e=>"USER_LEAVES_PAGE"!==e.operator))})),e.rules.TARGETING.schema.include.groups=e.rules.TARGETING.schema.include.groups.filter((e=>0<e.conditions.length)),{shown:!0,checkIt:!0,formVariant:e}):{shown:!0,checkIt:!1,formVariant:e}:{shown:!1,checkIt:!1,formVariant:e}}destroyIfNeeded(e){let t=To.getShownForms();Object.keys(t).filter((e=>0<t[e].length)).map((e=>t[e])).forEach((t=>{t.forEach((t=>{if(!this.showAnotherWidgetFormVariantIds.has(t)&&!this.showFormByClickingElementFormVariantIds.has(t)&&!this.showFormByCustomCodeFormVariantIds.has(t)){var i=lt.getFormVariant(t),n=this.isWidgetShownOnMouseout(i);if(!n.shown||n.checkIt){n.shown&&n.checkIt&&(i=n.formVariant),t=this.currentPageRenderedWidgetIds.has(t),n="LAUNCHER"===i.type;var o=this.filterByDataThatPresentInStorageBeforeAsyncRules(i,e);(!this.filterBySyncRules(i,e,t?["FREQUENCY","HIDE"]:[])||n&&!o)&&(To.destroyForm(i),this.alreadyCheckedFormVariantIds.delete(i.id),Ge.has(i.type)&&this.userActionsDetector.sessionStat.setAnnoyLastClosed())}}}))}))}destroy(){this.userActionsDetector&&this.userActionsDetector.destroy(),this.intervalTimerId&&clearInterval(this.intervalTimerId),this.subscriptions.forEach((e=>e.off()))}onShowWidgetByClickingElement(e){this.showFormByClickingElementFormVariantIds.add(e.id)}onShowWidgetByCustomCode(e){this.showFormByCustomCodeFormVariantIds.add(e)}onShowWidgetFromAnotherWidget(e){this.showAnotherWidgetFormVariantIds.add(e.id)}onPageViewChanged(){this.showFormByClickingElementFormVariantIds=new Set,this.showAnotherWidgetFormVariantIds=new Set,this.currentPageRenderedWidgetIds=new Set,this.alreadyCheckedFormVariantIds=new Set,this.showFormByCustomCodeFormVariantIds=new Set,this.showWidgetOnMouseoutIds=new Set}}(Ce);class Rr{constructor(e){({accountId:e}=e),this._payload={accountId:e,type:"view",referrer:window.location.href}}get(){return btoa(JSON.stringify(this._payload))}}var Lr=new class{constructor(e){this.params=e}handle(e){var t=Ce.getPrefix();"localhost"===window.location.hostname||"cl"!==t.debugPrefix||(t=st.getQueryParamNames(),st.isDebugQueryStringPresentInUrl(t)||(t=0<lt.getFormVariants().filter((t=>"FOR_ALL"===lt.getForm(t.formId).publishStatus&&function(e,t){var i;let n=["HIDE_AFTER","SHOW_AFTER"];var o;return null===(i=e.rules.SCHEDULE)||void 0===i||!i.enabled||!((null===(o=e.rules.SCHEDULE)||void 0===o?void 0:o.predicates)||[]).filter((e=>(null==e?void 0:e.isActive)&&n.includes(null==e?void 0:e.name))).some((i=>!1===new ir.predicates[i.name](i,e).is(t.sessionStat)))}(t,e))).length,ht.isInstanceInDebugMode()||!t))||this.onPageViewed()}onPageViewed(){let e=new Rr(this.params).get();Je.execute(new $e("/forms/v1/page/event").get(),"POST",e,{"Content-Type":"text/plain","cl-customer-id":ot.getUserIdentifier()}).catch((e=>Ee.error(e,"onFormPageView error on FormPageViewedEventHandler: ")))}}(qe.createPageParams());class Mr{constructor(){this.observer=this.prevPath=null,window.globalHistoryLength=window.history.length;let e={apply(){return window.globalHistoryLength=isNaN(window.globalHistoryLength)&&window.history.length||++window.globalHistoryLength,Reflect.apply(...arguments)}};history.pushState=new Proxy(history.pushState,e),history.replaceState=new Proxy(history.replaceState,e)}getPrevPath(){return this.prevPath}getCurrentPath(){let e=new URL(location.href);return e.search="",e.toString()}getPrevHistoryLength(){return this.prevHistoryLength}getCurrentHistoryLength(){return window.globalHistoryLength}setPrevPath(e){this.prevPath=e}setPrevHistoryLength(e){this.prevHistoryLength=e}isPathChanged(){return this.getCurrentPath()!==this.getPrevPath()}isHistoryLengthChanged(){return this.getCurrentHistoryLength()!==this.getPrevHistoryLength()}observe(e){this.setPrevPath(this.getCurrentPath()),this.observer=new MutationObserver((()=>{let t=this.isPathChanged(),i=this.isHistoryLengthChanged();t&&this.setPrevPath(this.getCurrentPath()),i&&this.setPrevHistoryLength(this.getCurrentHistoryLength()),t&&i&&e()})),this.observer.observe(document.body,Mr.config)}destroy(){var e;null===(e=this.observer)||void 0===e||e.disconnect()}}t(Mr,"config",{childList:!0,subtree:!0});var Dr=new Mr;var wr=new class{compute(e,t){let i=new Tn;t=t.map((e=>({...e,id:e.variantId})));let n=i.calculateFromWeights(t);return e.find((e=>e.id===n.variantId))}};class Pr{constructor(e){this.variantComputationByRulesService=e}getExperimentVariantsConfig(){throw Error("You have to implement the method setExperimentVariants!")}getExperimentVariantsFromConfig(){throw Error("You have to implement the method getExperimentVariantsFromConfig!")}addExperimentVariant(e,t,i){throw Error("You have to implement the method addExperimentVariant!")}getExperimentVariants(){throw Error("You have to implement the method getExperimentVariants!")}setExperimentVariants(e){throw Error("You have to implement the method setExperimentVariants!")}activate(){let e=this.getExperimentVariantsConfig();this._removeOldExperimentsFromStorage(this.getExperimentVariants(),e),this._removeModifiedExperimentsFromStorage(this.getExperimentVariants(),e),this._writeNewExperimentsToStorage(this.getExperimentVariants(),e)}_removeOldExperimentsFromStorage(e){let t=this.getExperimentVariantsFromConfig();e=e.filter((e=>t.find((t=>t.id===e.id)))),this.setExperimentVariants(e)}_removeModifiedExperimentsFromStorage(e,t){t&&t.length&&(t=t.reduce(((t,i)=>{const{itemVariants:n,trafficSplitRules:o}=i;return t.concat(this._getUnmodifiedVariants(n,e,o))}),[]),this.setExperimentVariants(t))}_writeNewExperimentsToStorage(e,t){let i=new Map,n=new Map;t.forEach((t=>{let{itemVariants:o,trafficSplitRules:r}=t;var a=e.find((e=>o.find((t=>t.id===e.id))));let s=o.map((e=>e.formId)),l=[...i.entries()].map((e=>{let[t,i]=e;return s.filter((e=>i.has(e))).length===s.length?t:null})).filter(Boolean)[0];if(l&&n.has(l)){let e=n.get(l);a=this.getExperimentVariantsConfig().find((e=>e.testId===l)).itemVariants.findIndex((t=>t.formId===e.formId)),this.addExperimentVariant(o[a],r,t.testId)}else{let e=new Set(o.map((e=>e.linkedToVariantId)));i.set(t.testId,e),a||(a=this.variantComputationByRulesService.compute(o,r),a=this.addExperimentVariant(a,r,t.testId),n.set(t.testId,a))}}))}_generateHash(e,t){return"".concat(e,".").concat(t.length,".").concat(t.map((e=>e.weight)).join("."))}_getUnmodifiedVariants(e,t,i){return i&&i.length&&e&&e.length?t.filter((t=>e.some((e=>t.hash===this._generateHash(e.id,i))))):t}}var xr=new class extends Pr{constructor(e){super(e)}getExperimentVariantsConfig(){let e=Object.values(Ce.getConfig().formVariants||{}),t=[];return Ce.getFormAbTestsConfig().forEach((i=>{let n=[],o=i.rules.map((t=>{var i;const o=e.find((e=>e.formId===t.formId));return o&&n.push(o),{...t,variantId:null!==(i=null==o?void 0:o.id)&&void 0!==i?i:null}})).filter((e=>null!==e.variantId));n.length&&t.push({itemVariants:n,trafficSplitRules:o,testId:i.id})})),t}setExperimentVariants(e){Ce.setFormAbTestFormVariants(e)}getExperimentVariants(){return Ce.getFormAbTestsFormVariants()}addExperimentVariant(e,t,i){return e={testId:i,formId:e.formId,id:e.id,hash:this._generateHash(e.id,t)},Ce.addAbTestFormVariant(e),e}getExperimentVariantsFromConfig(){return this.getExperimentVariantsConfig().reduce(((e,t)=>e.concat(t.itemVariants)),[])}}(wr);var Vr=new class{execute(e){let t=e.rules.TARGETING.schema.include.groups[0].conditions.slice(),i=[];return t.find((e=>"HIDE_FOR_THOSE_WHO_CLOSED_WIDGET"===e.operand.name))&&(t=t.filter((e=>"HIDE_FOR_THOSE_WHO_CLOSED_WIDGET"!==e.operand.name)),i.push({name:"WIDGET_CLOSED",isActive:!0,params:{unit:"COUNT",amount:1}})),e.rules.TARGETING={...e.rules.TARGETING,schema:{...e.rules.TARGETING.schema,include:{...e.rules.TARGETING.schema.include,groups:[{...e.rules.TARGETING.schema.include.groups[0],conditions:t},...e.rules.TARGETING.schema.include.groups.slice(1)]},exclude:{...e.rules.TARGETING.schema.exclude,relation:$o.OR}}},e.rules.HIDE||(e.rules.HIDE={enabled:!!i.length,type:Xo.HIDE,relation:$o.OR,hideFor:null,conditions:i}),e}};var kr=new class extends eo{getData(){if(!this._shouldMetricBeCollected(this._getLastDate(),24)){let e=this._getData().data;return e&&e.countryCode?Promise.resolve(e):this._requestDataFromServer()}return this._updateMetricCollectionDate(),this._requestDataFromServer()}_getData(){return Ce.getLocationData()}_setData(e){Ce.setLocationData(e)}_requestDataFromServer(){return Je.execute(new $e("/forms/v1/location").get(),"GET",null,{"Content-Type":"application/json"}).then((e=>(this._storeData(e.body),e.body))).catch((()=>({body:{}})))}}(24);class Fr{static findTestId(e,t){return(e=e.find((e=>e.rules.some((e=>e.formId===t)))))?e.id:null}}class Ur{constructor(e,t,i){this.store=e,this.userIdentifierStorageService=t,this.storageService=i}activate(){var e=this.userIdentifierStorageService.getUserIdentifier();this.storageKey="".concat(this.store.getPrefix().storagePrefix).concat(e,".interactions"),e=this.storageService.get(this.storageKey)||this._initializeInteractionMap(),this._appendInteractionIds(e)}_initializeInteractionMap(){let e={};var t=this.store.getConfig().forms;for(let i of Object.values(t))t=et.generate(),e[i.id]=t,i.__interactionId=t;return this.storageService.set(this.storageKey,e),e}_appendInteractionIds(e){var t=this.store.getConfig().forms;let i=[];for(let n of Object.values(t))(t=e[n.id])?n.__interactionId=t:(t=et.generate(),e[n.id]=t,n.__interactionId=t,i.push(n));0<i.length&&this.storageService.set(this.storageKey,e)}}var Br=new class{getGeolocationRules(e){let t=this.getGeolocationRulesIndex(e);return-1===t?null:e[t]}getGeolocationRulesIndex(e){return e.findIndex((e=>{var t;return["COUNTRY","REGION","CITY"].includes(null==e||null===(t=e.conditions[0])||void 0===t?void 0:t.operand.name)}))}getFormVariantsWithLocationRules(e){return e.filter((e=>{let t=this.getGeolocationRules(e.rules.TARGETING.schema.include.groups);return e=this.getGeolocationRules(e.rules.TARGETING.schema.exclude.groups),t||e}))}};class Hr{constructor(){this.entryModuleType=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"STATIC"}getComponentManifests(){return this.getAllComponents().map((e=>{var t;return null===(t=e.define)||void 0===t?void 0:t.manifest}))}getAllComponents(){return Object.values(this.getWcRegister().modelNameToTagMap).map((e=>this.getWcRegister().getComponentTagName(e,this.entryModuleType))).map((e=>customElements.get(e))).filter((e=>!!e))}async loadComponentsIfNecessary(e,t){let i=new Set;e.views.forEach((e=>{mt.iterateDepthFirst(e,(e=>{i.add(e.name)}))}));let n=(e=this.getComponentManifests()).map((e=>e.name)),o=[...i].filter((e=>!n.includes(e)));return o.length?(await this.loadComponents(o,t),{manifests:this.getComponentManifests()}):{manifests:e}}async loadComponents(e,t){return e=this.buildComponentModulesPaths(this.getComponentNamesToLoad(e),t),e=await this.importComponentModules(e),this.registerModules(e),e.map((e=>e.default))}getComponentNamesToLoad(e){return e}buildComponentModulesPaths(e,t){return e.map((e=>"".concat(t,"scripts/").concat(e,".js")))}async importComponentModules(e){return Promise.all(e.map((e=>import(e))))}registerModules(e){e.forEach((e=>{this.getWcRegister().registerComponent(e.default,this.entryModuleType)}))}getWcRegister(){return nn}}var Gr=new class{async activate(){this.apiHandlers={},new Ur(Ce,ot,Ie).activate(),this.userActionsDetector=new ze,ro.on("SHOW_WIDGET_FROM_ANOTHER_WIDGET",this._showWidgetFromAnotherWidget.bind(this)),ro.on("CONTACT_DATA_SUBMIT",this._onContactSubmit.bind(this));let e=lt.getFormVariants().map((e=>Vr.execute(e))),t={};Br.getFormVariantsWithLocationRules(e).length&&(t=await kr.getData()),zo.activate(),xr.activate(),To.activateAll(this.userActionsDetector,new Hr),Nr.activate(this.userActionsDetector,t),Io.activate(),Oo.activate(),Lr.handle(this.userActionsDetector),Dr.observe(this.detectPageView.bind(this)),nn.register(R,"STATIC"),ro.emit("COMPONENTS_LOADED",null),mo.activate()}detectPageView(){ro.emit("PAGE_VIEW_CHANGED",null),this.userActionsDetector.performDetection(),Lr.handle(this.userActionsDetector),Nr.checkRules()}showFormFromCustomCode(e){({formVariantId:e}=e);let t=lt.getForm(qe.parseFormVariantId(e).formId);t&&("DEBUG"===t.publishStatus?st.isDebugVariantShouldBeShown(lt.getDebugFormVariants(),e)&&(To.showFormFromCustomCode(lt.getFormVariant(e)),ro.emit("SHOW_WIDGET_BY_CUSTOM_CODE",e)):(To.showFormFromCustomCode(lt.getFormVariant(e)),ro.emit("SHOW_WIDGET_BY_CUSTOM_CODE",e)))}addOnWidgetEventsHandlers(e,t){this.apiHandlers={...this.apiHandlers,CONTACT_DATA_SUBMIT:{...this.apiHandlers.CONTACT_DATA_SUBMIT,[e.formVariantId]:t}}}_onContactSubmit(e){({formVariantId:e}=e);try{this.apiHandlers.hasOwnProperty("CONTACT_DATA_SUBMIT")&&this.apiHandlers.CONTACT_DATA_SUBMIT[e]&&this.apiHandlers.CONTACT_DATA_SUBMIT[e]({type:"CONTACT_DATA_SUBMIT"})}catch(e){}}async _showWidgetFromAnotherWidget(e){let t=Fr.findTestId(Ce.getFormAbTestsConfig(),e.linkedToVariantId);if(t){var i=xr.getExperimentVariants().find((e=>e.testId===t));i&&(e.linkedToVariantId=i.formId)}let n=lt.getFormVariantByVariantId(e.linkedToVariantId);i=lt.getFormVariant(e.formVariantId);let o=e.triggeredByLauncher?"Launcher":"Rules";ht.isInDebugMode(i.formId)||new It(qe.createFormParams(i.id,e.triggeredBy)).handle(),n?To.showFormFromCustomCode(n,o):await(new at).loadIfNeeded([e.linkedToVariantId]).then((()=>{if(n=lt.getFormVariantByVariantId(e.linkedToVariantId))To.showFormFromCustomCode(n,o);else{let t='Error SHOW_WIDGET: widget not found. "'.concat(e.formVariantId,'" tried to show "').concat(e.linkedToVariantId,'"');Ee.error(t)}})),n&&Nr.onShowWidgetFromAnotherWidget(n)}destroy(){var e;null===(e=this.userActionsDetector)||void 0===e||e.destroy(),To.destroyAll(),Io.destroy(),Oo.destroy(),Dr.destroy()}};class Wr{static getInstance(){var e=function(){e.c(arguments)};return e.q=[],e.c=function(){e.q.push(arguments)},window.claspo=window.claspo||e,window.claspo}}class jr{static paramObjectHasFormVariantIdProperty(e){return!!(e[0][1]&&e[0][1].hasOwnProperty("formVariantId")&&"string"==typeof e[0][1].formVariantId&&e[0][1].formVariantId.length)}static callbackAsSecondArgPresent(e){return!(!e[0][2]||"function"!=typeof e[0][2])}static isShowFormFromCustomCodeValid(e){return jr.paramObjectHasFormVariantIdProperty(e)}static isOnWidgetEventsValid(e){return jr.paramObjectHasFormVariantIdProperty(e)&&jr.callbackAsSecondArgPresent(e)}}class zr{static getInstance(){var e=function(){e.c(arguments)};return e.q=[],e.c=function(){e.q.push(arguments)},window.eS=window.eS||e,window.eS}}let Kr=new class{init(e,t){window.claspo.__inited=!0,Ce.setInstanceDebugMode(!!localStorage.getItem("claspo-scripts")),e&&e.disableCookiesUsage?ot.disable():ot.activate(),Gr.activate(),window.addEventListener("beforeunload",(()=>{this.destroy()}))}destroy(){Gr.destroy()}};!function(t){async function i(){if(!/(bingbot|slurp|java|wget|curl|Commons-HttpClient|Python-urllib|libwww|httpunit|nutch|phpcrawl|msnbot|jyxobot|FAST-WebCrawler|FAST Enterprise Crawler|biglotron|teoma|convera|seekbot|gigablast|exabot|ngbot|ia_archiver|GingerCrawler|webmon |httrack|webcrawler|grub.org|UsineNouvelleCrawler|antibot|netresearchserver|speedy|fluffy|bibnum.bnf|findlink|msrbot|panscient|yacybot|AISearchBot|IOI|ips-agent|tagoobot|MJ12bot|dotbot|woriobot|yanga|buzzbot|mlbot|yandexbot|purebot|Linguee Bot|Voyager|CyberPatrol|voilabot|baiduspider|citeseerxbot|spbot|twengabot|postrank|turnitinbot|scribdbot|page2rss|sitebot|linkdex|Adidxbot|blekkobot|ezooms|dotbot|Mail.RU_Bot|discobot|heritrix|findthatfile|europarchive.org|NerdByNature.Bot|sistrix crawler|Aboundex|domaincrawler|wbsearchbot|summify|ccbot|edisterbot|seznambot|ec2linkfinder|gslfbot|aihitbot|intelium_bot|facebookexternalhit|yeti|RetrevoPageAnalyzer|lb-spider|sogou|lssbot|careerbot|wotbox|wocbot|ichiro|DuckDuckBot|lssrocketcrawler|drupact|webcompanycrawler|acoonbot|openindexspider|gnam gnam spider|web-archive-net.com.bot|backlinkcrawler|coccoc|integromedb|content crawler spider|toplistbot|seokicks-robot|it2media-domain-crawler|ip-web-crawler.com|siteexplorer.info|elisabot|proximic|changedetection|blexbot|arabot|WeSEE:Search|niki-bot|CrystalSemanticsBot|rogerbot|360Spider|psbot|InterfaxScanBot|Lipperhey SEO Service|CC Metadata Scaper|g00g1e.net|GrapeshotCrawler|urlappendbot|brainobot|fr-crawler|binlar|SimpleCrawler|Livelapbot|Twitterbot|cXensebot|smtbot|bnf.fr_bot|A6-Indexer|ADmantX|Facebot|Twitterbot|OrangeBot|memorybot|AdvBot|MegaIndex|SemanticScholarBot|ltx71|nerdybot|xovibot|BUbiNG|Qwantify|archive.org_bot|Applebot|TweetmemeBot|crawler4j|findxbot|SemrushBot|yoozBot|lipperhey|y!j-asr|Domain Re-Animator Bot|AddThis)/i.test(navigator.userAgent)){await async function(){let t=[];if(be(navigator.userAgent)&&t.push(e(Ce.getConfig().apiConfig.chunkShimUrl||"https://scripts.claspo.io/scripts/shim.js")),Ne){let i=Ce.getConfig().apiConfig.chunkIntersectionObserverUrl||"https://scripts.claspo.io/scripts/intersection-observer.js";t.push(e(i))}return Promise.all(t).catch((e=>{}))}();try{new ge(t).run(),window.scriptLog09u8y9("OK")}catch(e){Ee.error(e)}}}"loading"===document.readyState?Re(document,"DOMContentLoaded",(()=>{i()})):i()}(new class{constructor(e){this.modulesInitService=e,this.hasFormsInQueue=this.formsReadyToProcessCommands=!1,ro.on("COMPONENTS_LOADED",(()=>{this.formsReadyToProcessCommands=!0,this.hasFormsInQueue&&(this.hasFormsInQueue=!1,this._processEventQueue(zr.getInstance()))}))}process(){let e=Wr.getInstance(),t=e.q.find((e=>"init"===e[0][0]));e.__inited||(e.__inited=!0,t?this.modulesInitService.init(t[0][1],t[0][2]):this.modulesInitService.init(),this._processEventQueue(e))}_processEventQueue(e){this._processShowFormsQueue(e),this._processOnWidgetEventsQueue(e);let t=this;e.q.push=function(){Array.prototype.push.apply(this,arguments),t._processEventQueue(e)}}_processShowFormsQueue(e){if(this.formsReadyToProcessCommands){var t=e.q.filter((e=>"showWidget"===e[0][0]));e.q=e.q.filter((e=>"showWidget"!==e[0][0])),t.forEach((e=>{let t=e[0][1];jr.isShowFormFromCustomCodeValid(e)&&Gr.showFormFromCustomCode(t)}))}else this.hasFormsInQueue=!0}_processOnWidgetEventsQueue(e){if(this.formsReadyToProcessCommands){var t=e.q.filter((e=>"onWidgetEvents"===e[0][0]));e.q=e.q.filter((e=>"onWidgetEvents"!==e[0][0])),t.forEach((e=>{jr.isOnWidgetEventsValid(e)&&Gr.addOnWidgetEventsHandlers(e[0][1],e[0][2])}))}else this.hasFormsInQueue=!0}}(Kr))}();
} catch (error) {
    window.scriptLog09u8y9('ERROR', 'BOOTSTRAP_ERROR', error);
}
